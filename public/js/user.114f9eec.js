(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user"],{"0705":function(e,t,a){},"0fb4":function(e,t,a){},"2e1c":function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"e",(function(){return s})),a.d(t,"a",(function(){return o})),a.d(t,"f",(function(){return l})),a.d(t,"d",(function(){return c})),a.d(t,"b",(function(){return d}));var r=a("b775"),n={list:"/user.grade/list",all:"/user.grade/all",add:"/user.grade/add",edit:"/user.grade/edit",delete:"/user.grade/delete",back:"/Store/feedbackColl/all",grade:"/reward/add",gradeIndex:"/reward/list",deletedJl:"/reward/delete",rewEdit:"/reward/edit",getPl:"/goods/airdropList"};function i(e){return Object(r["b"])({url:n.getPl,method:"get",params:e})}function s(e){return Object(r["b"])({url:n.gradeIndex,method:"get",params:e})}function o(e){return Object(r["b"])({url:n.all,method:"get",params:e})}function l(e){return Object(r["b"])({url:n.rewEdit,method:"post",data:e})}function c(e){return Object(r["b"])({url:n.grade,method:"post",data:e})}function d(e){return Object(r["b"])({url:n.deletedJl,method:"post",data:e})}},"35aa":function(e,t,a){},"3f7a":function(e,t,a){},4016:function(e,t,a){"use strict";var r=a("3f7a"),n=a.n(r);n.a},4851:function(e,t,a){},"55ba":function(e,t,a){},"67f9":function(e,t,a){"use strict";var r=a("a497"),n=a.n(r);n.a},"74d2":function(e,t,a){"use strict";var r=a("0705"),n=a.n(r);n.a},"7ad7":function(e,t,a){"use strict";a.r(t);for(var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),a("div",{staticClass:"table-operator"},[a("a-button",{directives:[{name:"action",rawName:"v-action:add",arg:"add"}],attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("s-table",{ref:"table",attrs:{rowKey:"grade_id",loading:e.isLoading,columns:e.columns,data:e.loadData,pageSize:15},scopedSlots:e._u([{key:"upgrade",fn:function(t){return a("span",{},[e._v("邀请满"+e._s(t.upgrade)+"人")])}},{key:"status",fn:function(t){return a("span",{},[a("a-tag",{attrs:{color:t?"green":""}},[e._v(e._s(1==t?"启用":"禁用"))])],1)}},{key:"action",fn:function(t,r){return a("span",{},[a("a",{directives:[{name:"action",rawName:"v-action:edit",arg:"edit"}],staticStyle:{"margin-right":"8px"},on:{click:function(t){return e.handleEdit(r)}}},[e._v("编辑")]),a("a",{directives:[{name:"action",rawName:"v-action:delete",arg:"delete"}],on:{click:function(t){return e.handleDelete(r)}}},[e._v("删除")])])}}])}),a("AddForm",{ref:"AddForm",on:{handleSubmit:e.handleRefresh}}),a("EditForm",{ref:"EditForm",on:{handleSubmit:e.handleRefresh}})],1)},n=[],i=(a("d3b7"),a("5530")),s=a("2e1c"),o=a("2af9"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:720,visible:e.visible,confirmLoading:e.confirmLoading,maskClosable:!1},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"等级名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"例如：大众会员、黄金会员、铂金会员、钻石会员"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入等级名称"}]}],expression:"['name', {rules: [{required: true, message: '请输入等级名称'}]}]"}]})],1),a("a-form-item",{attrs:{label:"奖励条件",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("InputNumberGroup",{directives:[{name:"decorator",rawName:"v-decorator",value:["upgrade.expend_money",{rules:[{required:!0,message:"邀请条件不能为空"}]}],expression:"['upgrade.expend_money', { rules: [{ required: true, message: '邀请条件不能为空' }] }]"}],attrs:{addonBefore:"邀请好友满",addonAfter:"人",inputProps:{min:1}}}),a("div",{staticClass:"form-item-help"},[a("p",{staticClass:"extra"},[e._v("用户的实际消费金额满足后，自动升级")])])],1),a("a-form-item",{attrs:{label:"奖励藏品分类(请选择一个)",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["categorys",{rules:[{required:!0,message:"请选择1个奖励藏品分类"}]}],expression:"['categorys', {rules: [{required: true, message: '请选择1个奖励藏品分类'}]}]"}],attrs:{placeholder:"请选择奖励藏品分类",dropdownStyle:{maxHeight:"500px",overflow:"auto"},treeData:e.formData.categoryList,treeCheckable:"",treeCheckStrictly:"",allowClear:""}}),a("div",{staticClass:"form-item-help"},[a("p",{staticClass:"extra"},[e._v("选择奖励藏品分类，随机获取藏品分类中一个奖励")])])],1),a("a-form-item",{attrs:{label:"状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:1,rules:[{required:!0}]}],expression:"['status', {initialValue: 1, rules: [{required: true}]}]"}]},[a("a-radio",{attrs:{value:1}},[e._v("启用")]),a("a-radio",{attrs:{value:0}},[e._v("禁用")])],1)],1)],1)],1)],1)},c=[],d=(a("b0c0"),a("e1fe")),u=[],m=1;m<=20;m++)u.push(m);for(var f={components:{InputNumberGroup:o["b"]},data:function(){return{title:"新增会员等级",labelCol:{span:7},wrapperCol:{span:13},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),formData:d["a"].formData,weights:u}},created:function(){var e=this;d["a"].getFromData().then((function(){e.isLoading=!1}))},methods:{add:function(){this.visible=!0},handleSubmit:function(e){var t=this;e.preventDefault();var a=this.form.validateFields;a((function(e,a){!e&&t.onFormSubmit(a)}))},handleCancel:function(){this.visible=!1,this.form.resetFields()},onFormSubmit:function(e){var t=this,a={name:e.name,category_id:e.categorys[0].value,upgrade:e.upgrade.expend_money,status:e.status};this.confirmLoading=!0,s["d"]({form:a}).then((function(a){t.$message.success(a.message,1.5),t.handleCancel(),t.$emit("handleSubmit",e)})).finally((function(){t.confirmLoading=!1}))}}},h=f,p=a("2877"),v=Object(p["a"])(h,l,c,!1,null,null,null),g=v.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:720,visible:e.visible,confirmLoading:e.confirmLoading,maskClosable:!1},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"等级名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"例如：大众会员、黄金会员、铂金会员、钻石会员"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入等级名称"}]}],expression:"['name', {rules: [{required: true, message: '请输入等级名称'}]}]"}]})],1),a("a-form-item",{attrs:{label:"奖励条件",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("InputNumberGroup",{directives:[{name:"decorator",rawName:"v-decorator",value:["upgrade",{rules:[{required:!0,message:"邀请条件不能为空"}]}],expression:"['upgrade', { rules: [{ required: true, message: '邀请条件不能为空' }] }]"}],attrs:{addonBefore:"邀请好友满",addonAfter:"人",inputProps:{min:1}}})],1),a("a-form-item",{attrs:{label:"奖励藏品分类(请选择一个)",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["categorys",{rules:[{required:!0,message:"请选择1个奖励藏品分类"}]}],expression:"['categorys', {rules: [{required: true, message: '请选择1个奖励藏品分类'}]}]"}],attrs:{placeholder:"请选择奖励藏品分类",dropdownStyle:{maxHeight:"500px",overflow:"auto"},treeData:e.formData.categoryList,treeCheckable:"",treeCheckStrictly:"",allowClear:""}}),a("div",{staticClass:"form-item-help"},[a("p",{staticClass:"extra"},[e._v("选择奖励藏品分类，随机获取藏品分类中一个奖励")])])],1),a("a-form-item",{attrs:{label:"状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:1,rules:[{required:!0}]}],expression:"['status', {initialValue: 1, rules: [{required: true}]}]"}]},[a("a-radio",{attrs:{value:1}},[e._v("启用")]),a("a-radio",{attrs:{value:0}},[e._v("禁用")])],1)],1)],1)],1)],1)},_=[],C=a("88bc"),y=a.n(C),w=[],S=1;S<=20;S++)w.push(S);var I={components:{InputNumberGroup:o["b"]},data:function(){return{title:"编辑会员等级",labelCol:{span:7},wrapperCol:{span:13},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),weights:w,record:{},formData:d["a"].formData}},created:function(){var e=this;d["a"].getFromData().then((function(){e.isLoading=!1}))},methods:{edit:function(e){this.visible=!0,this.record=e,this.setFieldsValue()},setFieldsValue:function(){var e=this.record,t=this.form.setFieldsValue;e.cascader=[e.province_id,e.city_id,e.region_id],this.$nextTick((function(){t(y()(e,["name","weight","upgrade","equity","status","sort"]))}))},handleSubmit:function(e){var t=this;e.preventDefault();var a=this.form.validateFields;a((function(e,a){a.category_id=a.categorys[0].value,!e&&t.onFormSubmit(a)}))},handleCancel:function(){this.visible=!1,this.form.resetFields()},onFormSubmit:function(e){var t=this;this.confirmLoading=!0,s["f"]({gradeId:this.record.grade_id,form:e}).then((function(a){t.$message.success(a.message,1.5),t.handleCancel(),t.$emit("handleSubmit",e)})).finally((function(){t.confirmLoading=!1}))}}},R=I,x=Object(p["a"])(R,b,_,!1,null,null,null),P=x.exports,E={name:"Index",components:{STable:o["c"],AddForm:g,EditForm:P},data:function(){var e=this;return{queryParam:{},isLoading:!1,columns:[{title:"等级ID",dataIndex:"grade_id"},{title:"等级名称",dataIndex:"name"},{title:"奖励条件",dataIndex:"upgrade",scopedSlots:{customRender:"upgrade"}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"添加时间",dataIndex:"create_time"},{title:"操作",dataIndex:"action",width:"180px",scopedSlots:{customRender:"action"}}],loadData:function(t){return s["e"](Object(i["a"])(Object(i["a"])({},t),e.queryParam)).then((function(e){return e.data.list}))}}},created:function(){},methods:{handleAdd:function(){this.$refs.AddForm.add()},handleEdit:function(e){this.$refs.EditForm.edit(e)},handleDelete:function(e){var t=this,a=this.$confirm({title:"您确定要删除该记录吗?",content:"删除后不可恢复",onOk:function(){return s["b"]({gradeId:e.grade_id}).then((function(e){t.$message.success(e.message,1.5),t.handleRefresh()})).finally((function(e){a.destroy()}))}})},handleRefresh:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$refs.table.refresh(e)}}},L=E,k=Object(p["a"])(L,r,n,!1,null,null,null);t["default"]=k.exports},"886a":function(e,t,a){"use strict";var r=a("55ba"),n=a.n(r);n.a},"88bc":function(e,t,a){(function(t){var a=1/0,r=9007199254740991,n="[object Arguments]",i="[object Function]",s="[object GeneratorFunction]",o="[object Symbol]",l="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,d=l||c||Function("return this")();function u(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}function m(e,t){var a=-1,r=e?e.length:0,n=Array(r);while(++a<r)n[a]=t(e[a],a,e);return n}function f(e,t){var a=-1,r=t.length,n=e.length;while(++a<r)e[n+a]=t[a];return e}var h=Object.prototype,p=h.hasOwnProperty,v=h.toString,g=d.Symbol,b=h.propertyIsEnumerable,_=g?g.isConcatSpreadable:void 0,C=Math.max;function y(e,t,a,r,n){var i=-1,s=e.length;a||(a=R),n||(n=[]);while(++i<s){var o=e[i];t>0&&a(o)?t>1?y(o,t-1,a,r,n):f(n,o):r||(n[n.length]=o)}return n}function w(e,t){return e=Object(e),S(e,t,(function(t,a){return a in e}))}function S(e,t,a){var r=-1,n=t.length,i={};while(++r<n){var s=t[r],o=e[s];a(o,s)&&(i[s]=o)}return i}function I(e,t){return t=C(void 0===t?e.length-1:t,0),function(){var a=arguments,r=-1,n=C(a.length-t,0),i=Array(n);while(++r<n)i[r]=a[t+r];r=-1;var s=Array(t+1);while(++r<t)s[r]=a[r];return s[t]=i,u(e,this,s)}}function R(e){return E(e)||P(e)||!!(_&&e&&e[_])}function x(e){if("string"==typeof e||N(e))return e;var t=e+"";return"0"==t&&1/e==-a?"-0":t}function P(e){return k(e)&&p.call(e,"callee")&&(!b.call(e,"callee")||v.call(e)==n)}var E=Array.isArray;function L(e){return null!=e&&O(e.length)&&!F(e)}function k(e){return $(e)&&L(e)}function F(e){var t=D(e)?v.call(e):"";return t==i||t==s}function O(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function D(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function $(e){return!!e&&"object"==typeof e}function N(e){return"symbol"==typeof e||$(e)&&v.call(e)==o}var T=I((function(e,t){return null==e?{}:w(e,m(y(t,1),x))}));e.exports=T}).call(this,a("c8ba"))},"90bc":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-card",{attrs:{bordered:!1}},[r("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),r("s-table",{ref:"table",attrs:{rowKey:"user_id",loading:e.isLoading,columns:e.columns,data:e.loadData,pageSize:15},scopedSlots:e._u([{key:"goods",fn:function(e){return r("span",{},[r("div",{staticClass:"avatar"},[r("img",e?{attrs:{width:"45",height:"45",src:e.images,alt:"用户头像"}}:{attrs:{width:"45",height:"45",src:a("889b"),alt:"用户头像"}})])])}},{key:"name",fn:function(t,a){return r("span",{},[r("p",[r("span"),r("span",{staticClass:"c-p"},[e._v(e._s(a.name))])])])}},{key:"price",fn:function(t){return r("span",{},[r("span",{staticClass:"c-p"},[e._v(e._s(t))])])}},{key:"createtime",fn:function(t){return r("span",{},[r("span",{staticClass:"c-p"},[e._v(e._s(t))])])}},{key:"buyer_id",fn:function(t){return r("span",{},[r("span",{staticClass:"c-p"},[e._v(e._s(t))])])}},{key:"buy_username",fn:function(t){return r("span",{},[r("span",{staticClass:"c-p"},[e._v(e._s(t))])])}}])},[r("a",{directives:[{name:"action",rawName:"v-action:delete",arg:"delete"}],on:{click:function(t){return e.handleDelete(e.item)}}},[e._v("删除")]),e._v(" --\x3e ")])],1)},n=[],i=(a("d3b7"),a("5530")),s=a("fab2"),o=a("2e1c"),l=a("2af9"),c=a("04b3"),d={"MP-WEIXIN":"微信小程序",H5:"H5",APP:"APP"},u={"MP-WEIXIN":c["h"],H5:c["d"],APP:c["a"]},m={name:"Index",components:{STable:l["c"]},data:function(){var e=this;return{PlatformName:d,PlatformIcons:u,searchForm:this.$form.createForm(this),queryParam:{},isLoading:!1,selectedRowKeys:[],columns:[{title:"卖家ID",dataIndex:"user_id"},{title:"卖家名称",dataIndex:"sell_username",scopedSlots:{customRender:"sell_username"}},{title:"商品图片",dataIndex:"goods",scopedSlots:{customRender:"goods"}},{title:"商品名称",scopedSlots:{customRender:"name"}},{title:"实际金额",dataIndex:"price",scopedSlots:{customRender:"price"}},{title:"上架时间",dataIndex:"createtime"},{title:"买家ID",dataIndex:"buyer_id"},{title:"买家名称",dataIndex:"buy_username"}],loadData:function(t){return s["g"](Object(i["a"])(Object(i["a"])({},t),e.queryParam)).then((function(e){return e.data.list}))},gradeList:[]}},computed:{rowSelection:function(){return{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange}}},created:function(){this.getGradeList()},methods:{handleUpdateStatus:function(e){this.$refs.EditForm.edit(this.shopArr)},onSelectChange:function(e){this.selectedRowKeys=e},getGradeList:function(){var e=this;o["a"]().then((function(t){e.gradeList=t.data.list})),o["c"]().then((function(t){e.shopArr=t.data.list}))},handleGrade:function(e){this.$refs.GradeForm.handle(e)},handleRecharge:function(e){this.$refs.RechargeForm.handle(e)},handleDelete:function(e){var t=this,a=this.$confirm({title:"您确定要删除该记录吗?",content:"删除后不可恢复",onOk:function(){return s["c"]({userId:e.user_id}).then((function(e){t.$message.success(e.message,1.5),t.handleRefresh()})).finally((function(e){a.destroy()}))}})},handleSearch:function(e){var t=this;e.preventDefault(),this.searchForm.validateFields((function(e,a){e||(t.queryParam=Object(i["a"])(Object(i["a"])({},t.queryParam),a),t.handleRefresh(!0))}))},handleRefresh:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$refs.table.refresh(e)}}},f=m,h=(a("cc6c"),a("2877")),p=Object(h["a"])(f,r,n,!1,null,"4c843e7d",null);t["default"]=p.exports},9724:function(e,t,a){"use strict";var r=a("4851"),n=a.n(r);n.a},a497:function(e,t,a){},b8cc:function(e,t,a){"use strict";var r=a("0fb4"),n=a.n(r);n.a},c77d:function(e,t,a){},cc6c:function(e,t,a){"use strict";var r=a("c77d"),n=a.n(r);n.a},d0e6:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-card",{attrs:{bordered:!1}},[r("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),r("s-table",{ref:"table",attrs:{rowKey:"user_id",loading:e.isLoading,columns:e.columns,data:e.loadData,pageSize:15},scopedSlots:e._u([{key:"wallet",fn:function(e){return r("span",{},[r("div",{staticClass:"avatar"},[r("img",e?{attrs:{width:"45",height:"45",src:e.path,alt:"收款码"}}:{attrs:{width:"45",height:"45",src:a("889b"),alt:"用户头像"}})])])}},{key:"mobile",fn:function(t,a){return r("span",{},[r("p",[r("span"),r("span",{staticClass:"c-p"},[e._v(e._s(a.wallet.mobile))])])])}},{key:"price",fn:function(t){return r("span",{},[r("span",{staticClass:"c-p"},[e._v(e._s(t))])])}},{key:"create_time",fn:function(t){return r("span",{},[r("span",{staticClass:"c-p"},[e._v(e._s(t))])])}},{key:"bank",fn:function(t){return r("span",{},[r("span",{staticClass:"c-p"},[e._v(e._s(t))])])}},{key:"branch",fn:function(t){return r("span",{},[r("span",{staticClass:"c-p"},[e._v(e._s(t))])])}},{key:"real_name",fn:function(t){return r("span",{},[r("span",{staticClass:"c-p"},[e._v(e._s(t))])])}},{key:"action",fn:function(t){return r("span",{staticClass:"actions"},[0==t.type?r("a",{directives:[{name:"action",rawName:"v-action:recharge",arg:"recharge"}],attrs:{title:"会员充值"},on:{click:function(a){return e.handleRecharge(t)}}},[e._v("审核")]):e._e(),1==t.type?r("a",{directives:[{name:"action",rawName:"v-action:recharge",arg:"recharge"}],attrs:{title:"会员充值"}},[e._v("已通过")]):e._e(),2==t.type?r("a",{directives:[{name:"action",rawName:"v-action:recharge",arg:"recharge"}],attrs:{title:"会员充值"}},[e._v("已拒绝")]):e._e()])}}])}),r("GradeForm",{ref:"GradeForm",attrs:{gradeList:e.gradeList},on:{handleSubmit:e.handleRefresh}}),r("RechargeForm",{ref:"RechargeForm",on:{handleSubmit:e.handleRefresh}}),r("a-modal",{staticClass:"captcha-modal",attrs:{closable:!1,centered:"",width:"40%",cancelButtonProps:{props:{type:"link"}},okType:"link",cancelText:"关闭"},model:{value:e.confirmShow,callback:function(t){e.confirmShow=t},expression:"confirmShow"}},[r("h4",{staticClass:"fz-18 text-c"},[e._v("是否通过")]),r("template",{slot:"footer"},[r("a-button",{on:{click:e.handleCancel}},[e._v("取消")]),r("a-button",{attrs:{type:"primary"},on:{click:e.handleReject}},[e._v("拒绝")]),r("a-button",{attrs:{type:"primary"},on:{click:e.handleOk}},[e._v("通过")])],1)],2)],1)},n=[],i=(a("d3b7"),a("5530")),s=a("fab2"),o=a("2e1c"),l=a("2af9"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{staticClass:"noborder",attrs:{title:e.title,width:520,visible:e.visible,confirmLoading:e.confirmLoading,maskClosable:!1},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-tabs",{attrs:{activeKey:e.activeKey},on:{change:e.onChangeTabs}},[a("a-tab-pane",{key:e.RECHARGE_TYPE_POINTS,attrs:{tab:"充值积分"}},[e.activeKey===e.RECHARGE_TYPE_POINTS?[a("a-form-item",{staticClass:"mb-5",attrs:{label:"会员ID",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("span",[e._v(e._s(e.record.user_id))])]),a("a-form-item",{staticClass:"mb-5",attrs:{label:"当前积分",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("span",{staticClass:"c-p"},[e._v(e._s(e.record.points))])]),a("a-form-item",{attrs:{label:"充值方式",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:[e.RECHARGE_TYPE_POINTS+".mode",{initialValue:"inc",rules:[{required:!0}]}],expression:"[`${RECHARGE_TYPE_POINTS}.mode`, { initialValue: 'inc', rules: [{ required: true }] }]"}]},[a("a-radio",{attrs:{value:"inc"}},[e._v("增加")]),a("a-radio",{attrs:{value:"dec"}},[e._v("减少")]),a("a-radio",{attrs:{value:"final"}},[e._v("最终积分")])],1)],1),a("a-form-item",{attrs:{label:"变更数量",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:[e.RECHARGE_TYPE_POINTS+".value",{initialValue:"",rules:[{required:!0,message:"请输入变更的金数量"}]}],expression:"[`${RECHARGE_TYPE_POINTS}.value`, { initialValue: '', rules: [{ required: true, message: '请输入变更的金数量' }] }]"}],attrs:{min:.01}})],1),a("a-form-item",{attrs:{label:"管理员备注",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:[e.RECHARGE_TYPE_POINTS+".remark",{rules:[{required:!0,message:"请输入管理员备注"}]}],expression:"[`${RECHARGE_TYPE_POINTS}.remark`, { rules: [{ required: true, message: '请输入管理员备注' }] }]"}],attrs:{placeholder:"请输入管理员备注",rows:3}})],1)]:e._e()],2)],1)],1)],1)],1)},d=[],u="balance",m="points",f={components:{},data:function(){return{title:"会员充值",labelCol:{span:7},wrapperCol:{span:13},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),activeKey:m,RECHARGE_TYPE_BALANCE:u,RECHARGE_TYPE_POINTS:m,record:{}}},methods:{handle:function(e){this.visible=!0,this.record=e},onChangeTabs:function(e){this.activeKey=e},handleSubmit:function(e){var t=this;e.preventDefault();var a=this.form.validateFields;a((function(e,a){!e&&t.onFormSubmit(a)}))},handleCancel:function(){this.visible=!1,this.form.resetFields()},onFormSubmit:function(e){var t=this,a=this.record,r=this.activeKey;this.confirmLoading=!0,s["h"]({userId:a.user_id,target:r,form:e}).then((function(a){t.$message.success(a.message,1.5),t.handleCancel(),t.$emit("handleSubmit",e)})).finally((function(){t.confirmLoading=!1}))}}},h=f,p=(a("886a"),a("2877")),v=Object(p["a"])(h,c,d,!1,null,"c0741a84",null),g=(v.exports,a("04b3")),b={"MP-WEIXIN":"微信小程序",H5:"H5",APP:"APP"},_={"MP-WEIXIN":g["h"],H5:g["d"],APP:g["a"]},C={name:"Index",components:{STable:l["c"],RechargeForm:void 0},data:function(){var e=this;return{PlatformName:b,confirmShow:!1,PlatformIcons:_,searchForm:this.$form.createForm(this),queryParam:{},log_id:"",isLoading:!1,selectedRowKeys:[],columns:[{title:"申请人ID",dataIndex:"user_id"},{title:"用户行为",dataIndex:"remark",scopedSlots:{customRender:"remark"}},{title:"收款码",dataIndex:"wallet",scopedSlots:{customRender:"wallet"}},{title:"手机号",scopedSlots:{customRender:"mobile"}},{title:"实际金额",dataIndex:"money",scopedSlots:{customRender:"money"}},{title:"申请时间",dataIndex:"create_time"},{title:"开户银行",dataIndex:"bank"},{title:"开户支行",dataIndex:"branch"},{title:"名称",dataIndex:"real_name"},{title:"操作",width:"180px",scopedSlots:{customRender:"action"}}],loadData:function(t){return s["b"](Object(i["a"])(Object(i["a"])({},t),e.queryParam)).then((function(e){return e.data.list}))},gradeList:[]}},computed:{rowSelection:function(){return{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange}}},created:function(){this.getGradeList()},methods:{handleCancel:function(){this.confirmShow=!1},handleReject:function(){var e=this;s["d"]({logId:this.log_id,status:2}).then((function(t){e.confirmShow=!1,e.handleRefresh(!0)})).catch((function(t){e.confirmShow=!1,e.handleRefresh(!0)}))},handleOk:function(){var e=this;s["d"]({logId:this.log_id,status:1}).then((function(t){e.confirmShow=!1,e.handleRefresh(!0)})).catch((function(t){e.confirmShow=!1,e.handleRefresh(!0)}))},handleUpdateStatus:function(e){this.$refs.EditForm.edit(this.shopArr)},onSelectChange:function(e){this.selectedRowKeys=e},getGradeList:function(){var e=this;o["a"]().then((function(t){e.gradeList=t.data.list})),o["c"]().then((function(t){e.shopArr=t.data.list}))},handleGrade:function(e){this.$refs.GradeForm.handle(e)},handleRecharge:function(e){this.log_id=e.log_id,this.confirmShow=!0},handleDelete:function(e){var t=this,a=this.$confirm({title:"您确定要删除该记录吗?",content:"删除后不可恢复",onOk:function(){return s["c"]({userId:e.user_id}).then((function(e){t.$message.success(e.message,1.5),t.handleRefresh()})).finally((function(e){a.destroy()}))}})},handleSearch:function(e){var t=this;e.preventDefault(),this.searchForm.validateFields((function(e,a){e||(t.queryParam=Object(i["a"])(Object(i["a"])({},t.queryParam),a),t.handleRefresh(!0))}))},handleRefresh:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$refs.table.refresh(e)}}},y=C,w=(a("b8cc"),Object(p["a"])(y,r,n,!1,null,"99b41516",null));t["default"]=w.exports},d43c:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-card",{attrs:{bordered:!1}},[r("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),r("div",{staticClass:"table-operator"}),r("s-table",{ref:"table",attrs:{rowKey:"num",loading:e.isLoading,columns:e.columns,data:e.loadData,pageSize:15},scopedSlots:e._u([{key:"avatar_url",fn:function(e){return r("span",{},[r("div",{staticClass:"avatar"},[r("img",e?{attrs:{width:"45",height:"45",src:e,alt:"用户头像"}}:{attrs:{width:"45",height:"45",src:a("889b"),alt:"用户头像"}})])])}},{key:"main_info",fn:function(t){return r("span",{},[r("p",[e._v(e._s(t.nick_name))]),r("p",{staticClass:"c-p"},[e._v(e._s(t.mobile))])])}},{key:"balance",fn:function(t,a){return r("span",{},[r("p",[r("span",{staticClass:"c-p"},[e._v(e._s(a.points))])])])}},{key:"expend_money",fn:function(t){return r("span",{},[r("span",{staticClass:"c-p"},[e._v(e._s(t))])])}},{key:"platform",fn:function(t){return r("span",{staticClass:"platform"},[e.PlatformIcons[t]?r("p",[r("a-tooltip",[r("template",{slot:"title"},[e._v(e._s(e.PlatformName[t]))]),r("a-icon",{staticClass:"icon",class:[t],attrs:{component:e.PlatformIcons[t]}})],2)],1):e._e()])}},{key:"action",fn:function(t){return r("span",{staticClass:"actions"},[r("a",{directives:[{name:"action",rawName:"v-action:delete",arg:"delete"}],on:{click:function(a){return e.handleDelete(t)}}},[e._v("删除")])])}}])}),r("GradeForm",{ref:"GradeForm",attrs:{gradeList:e.gradeList},on:{handleSubmit:e.handleRefresh}}),r("RechargeForm",{ref:"RechargeForm",on:{handleSubmit:e.handleRefresh}})],1)},n=[],i=(a("99af"),a("4160"),a("d3b7"),a("159b"),a("5530")),s=a("fab2"),o=a("2e1c"),l=a("2af9"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{staticClass:"noborder",attrs:{title:e.title,width:520,visible:e.visible,confirmLoading:e.confirmLoading,maskClosable:!1},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"会员ID",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("span",[e._v(e._s(e.record.user_id))])]),a("a-form-item",{attrs:{label:"会员等级",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["grade_id",{rules:[{required:!0}]}],expression:"['grade_id', { rules: [{ required: true }] }]"}],attrs:{placeholder:"请选择会员等级"}},[a("a-select-option",{attrs:{value:0}},[e._v("无等级")]),e._l(e.gradeList,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.grade_id}},[e._v(e._s(t.name))])}))],2)],1),a("a-form-item",{attrs:{label:"管理员备注",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",{rules:[{required:!0,message:"请输入管理员备注"}]}],expression:"['remark', { rules: [{ required: true, message: '请输入管理员备注' }] }]"}],attrs:{placeholder:"请输入管理员备注",rows:3}})],1)],1)],1)],1)},d=[],u=a("88bc"),m=a.n(u),f={components:{},props:{gradeList:{type:Array,required:!0}},data:function(){return{title:"设置会员等级",labelCol:{span:7},wrapperCol:{span:13},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),record:{}}},methods:{handle:function(e){this.visible=!0,this.record=e,this.setFieldsValue()},setFieldsValue:function(){var e=this.record,t=this.form.setFieldsValue;this.$nextTick((function(){t(m()(e,["grade_id"]))}))},handleSubmit:function(e){var t=this;e.preventDefault();var a=this.form.validateFields;a((function(e,a){!e&&t.onFormSubmit(a)}))},handleCancel:function(){this.visible=!1,this.form.resetFields()},onFormSubmit:function(e){var t=this;this.confirmLoading=!0,s["e"]({userId:this.record.user_id,form:e}).then((function(a){t.$message.success(a.message,1.5),t.handleCancel(),t.$emit("handleSubmit",e)})).finally((function(){t.confirmLoading=!1}))}}},h=f,p=(a("74d2"),a("2877")),v=Object(p["a"])(h,c,d,!1,null,null,null),g=v.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{staticClass:"noborder",attrs:{title:e.title,width:520,visible:e.visible,confirmLoading:e.confirmLoading,maskClosable:!1},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-tabs",{attrs:{activeKey:e.activeKey},on:{change:e.onChangeTabs}},[a("a-tab-pane",{key:e.RECHARGE_TYPE_POINTS,attrs:{tab:"充值积分"}},[e.activeKey===e.RECHARGE_TYPE_POINTS?[a("a-form-item",{staticClass:"mb-5",attrs:{label:"会员ID",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("span",[e._v(e._s(e.record.user_id))])]),a("a-form-item",{staticClass:"mb-5",attrs:{label:"当前积分",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("span",{staticClass:"c-p"},[e._v(e._s(e.record.points))])]),a("a-form-item",{attrs:{label:"充值方式",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:[e.RECHARGE_TYPE_POINTS+".mode",{initialValue:"inc",rules:[{required:!0}]}],expression:"[`${RECHARGE_TYPE_POINTS}.mode`, { initialValue: 'inc', rules: [{ required: true }] }]"}]},[a("a-radio",{attrs:{value:"inc"}},[e._v("增加")]),a("a-radio",{attrs:{value:"dec"}},[e._v("减少")]),a("a-radio",{attrs:{value:"final"}},[e._v("最终积分")])],1)],1),a("a-form-item",{attrs:{label:"变更数量",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:[e.RECHARGE_TYPE_POINTS+".value",{initialValue:"",rules:[{required:!0,message:"请输入变更的金数量"}]}],expression:"[`${RECHARGE_TYPE_POINTS}.value`, { initialValue: '', rules: [{ required: true, message: '请输入变更的金数量' }] }]"}],attrs:{min:.01}})],1),a("a-form-item",{attrs:{label:"管理员备注",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:[e.RECHARGE_TYPE_POINTS+".remark",{rules:[{required:!0,message:"请输入管理员备注"}]}],expression:"[`${RECHARGE_TYPE_POINTS}.remark`, { rules: [{ required: true, message: '请输入管理员备注' }] }]"}],attrs:{placeholder:"请输入管理员备注",rows:3}})],1)]:e._e()],2)],1)],1)],1)],1)},_=[],C="balance",y="points",w={components:{},data:function(){return{title:"会员充值",labelCol:{span:7},wrapperCol:{span:13},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),activeKey:y,RECHARGE_TYPE_BALANCE:C,RECHARGE_TYPE_POINTS:y,record:{}}},methods:{handle:function(e){this.visible=!0,this.record=e},onChangeTabs:function(e){this.activeKey=e},handleSubmit:function(e){var t=this;e.preventDefault();var a=this.form.validateFields;a((function(e,a){!e&&t.onFormSubmit(a)}))},handleCancel:function(){this.visible=!1,this.form.resetFields()},onFormSubmit:function(e){var t=this,a=this.record,r=this.activeKey;this.confirmLoading=!0,s["h"]({userId:a.user_id,target:r,form:e}).then((function(a){t.$message.success(a.message,1.5),t.handleCancel(),t.$emit("handleSubmit",e)})).finally((function(){t.confirmLoading=!1}))}}},S=w,I=(a("d99a"),Object(p["a"])(S,b,_,!1,null,"2e1c020e",null)),R=I.exports,x=a("04b3"),P={"MP-WEIXIN":"微信小程序",H5:"H5",APP:"APP"},E={"MP-WEIXIN":x["h"],H5:x["d"],APP:x["a"]},L={name:"Index",components:{STable:l["c"],GradeForm:g,RechargeForm:R},data:function(){var e=this;return{PlatformName:P,PlatformIcons:E,searchForm:this.$form.createForm(this),queryParam:{},isLoading:!1,columns:[{title:"序号",dataIndex:"num"},{title:"会员ID",dataIndex:"user_id"},{title:"会员头像",dataIndex:"avatar_url",scopedSlots:{customRender:"avatar_url"}},{title:"昵称/手机号",scopedSlots:{customRender:"main_info"}},{title:"反馈内容",dataIndex:"textend",scopedSlots:{customRender:"textend"}},{title:"反馈时间",dataIndex:"addtime"}],loadData:function(t){return s["a"](Object(i["a"])(Object(i["a"])({},t),e.queryParam)).then((function(t){return t.data.list=JSON.parse(JSON.stringify(t.data)),t.data.list.data.forEach((function(t,a){t.num=a+1,t.addtime=e.utilTime(t.addtime)})),t.data.list}))},gradeList:[]}},created:function(){this.getGradeList()},methods:{utilTime:function(e){var t=new Date(1e3*e),a=t.getFullYear(),r=t.getMonth()+1;r=r<10?"0"+r:r;var n=t.getDate();n=n<10?"0"+n:n;var i=t.getHours();i=i<10?"0"+i:i;var s=t.getMinutes();s=s<10?"0"+s:s;var o=t.getSeconds();o=o<10?"0"+o:o;var l=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"];l[t.getDay()],t.getDay();return"".concat(a,"-").concat(r,"-").concat(n," ").concat(i,":").concat(s,":").concat(o)},getGradeList:function(){var e=this;o["a"]().then((function(t){e.gradeList=t.data.list}))},handleGrade:function(e){this.$refs.GradeForm.handle(e)},handleRecharge:function(e){this.$refs.RechargeForm.handle(e)},handleDelete:function(e){var t=this,a=this.$confirm({title:"您确定要删除该记录吗?",content:"删除后不可恢复",onOk:function(){return s["c"]({userId:e.user_id}).then((function(e){t.$message.success(e.message,1.5),t.handleRefresh()})).finally((function(e){a.destroy()}))}})},handleSearch:function(e){var t=this;e.preventDefault(),this.searchForm.validateFields((function(e,a){e||(t.queryParam=Object(i["a"])(Object(i["a"])({},t.queryParam),a),t.handleRefresh(!0))}))},handleRefresh:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$refs.table.refresh(e)}}},k=L,F=(a("f855"),Object(p["a"])(k,r,n,!1,null,"11198c02",null));t["default"]=F.exports},d99a:function(e,t,a){"use strict";var r=a("35aa"),n=a.n(r);n.a},dab6:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-card",{attrs:{bordered:!1}},[r("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),r("div",{staticClass:"table-operator"},[r("a-row",{staticClass:"row-item-search"},[r("a-form",{staticClass:"search-form",attrs:{form:e.searchForm,layout:"inline"},on:{submit:e.handleSearch}},[r("a-form-item",{attrs:{label:"昵称/手机号"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["search"],expression:"['search']"}],attrs:{placeholder:"请输入昵称/手机号"}})],1),r("a-form-item",{attrs:{label:"注册时间"}},[r("a-range-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["betweenTime"],expression:"['betweenTime']"}],attrs:{format:"YYYY-MM-DD"}})],1),r("a-form-item",{staticClass:"search-btn"},[r("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("搜索")])],1)],1)],1)],1),e.selectedRowKeys.length?r("div",{staticClass:"button-group"},[r("a-button-group",{staticClass:"ml-10"},[r("a-button",{directives:[{name:"action",rawName:"v-action:status",arg:"status"}],attrs:{icon:"arrow-up"},on:{click:function(t){return e.handleUpdateStatus(e.selectedRowKeys,!0)}}},[e._v("批量空投")])],1)],1):e._e(),r("s-table",{ref:"table",attrs:{rowKey:"user_id",loading:e.isLoading,columns:e.columns,data:e.loadData,rowSelection:e.rowSelection,pageSize:15},scopedSlots:e._u([{key:"avatar_url",fn:function(e){return r("span",{},[r("div",{staticClass:"avatar"},[r("img",e?{attrs:{width:"45",height:"45",src:e,alt:"用户头像"}}:{attrs:{width:"45",height:"45",src:a("889b"),alt:"用户头像"}})])])}},{key:"main_info",fn:function(t){return r("span",{},[r("p",[e._v(e._s(t.nick_name))]),r("p",{staticClass:"c-p"},[e._v(e._s(t.mobile))])])}},{key:"balance",fn:function(t,a){return r("span",{},[r("p",[r("span",[e._v("积分：")]),r("span",{staticClass:"c-p"},[e._v(e._s(a.points))])])])}},{key:"expend_money",fn:function(t){return r("span",{},[r("span",{staticClass:"c-p"},[e._v(e._s(t))])])}},{key:"platform",fn:function(t){return r("span",{staticClass:"platform"},[e.PlatformIcons[t]?r("p",[r("a-tooltip",[r("template",{slot:"title"},[e._v(e._s(e.PlatformName[t]))]),r("a-icon",{staticClass:"icon",class:[t],attrs:{component:e.PlatformIcons[t]}})],2)],1):e._e()])}},{key:"action",fn:function(t){return r("span",{staticClass:"actions"},[r("a",{directives:[{name:"action",rawName:"v-action:recharge",arg:"recharge"}],attrs:{title:"会员充值"},on:{click:function(a){return e.handleRecharge(t)}}},[e._v("充值")]),r("a",{directives:[{name:"action",rawName:"v-action:delete",arg:"delete"}],on:{click:function(a){return e.handleDelete(t)}}},[e._v("删除")])])}}])}),r("GradeForm",{ref:"GradeForm",attrs:{gradeList:e.gradeList},on:{handleSubmit:e.handleRefresh}}),r("RechargeForm",{ref:"RechargeForm",on:{handleSubmit:e.handleRefresh}}),r("EditForm",{ref:"EditForm",attrs:{userArr:e.selectedRowKeys,categoryList:e.shopArr},on:{handleSubmit:e.handleRefresh}})],1)},n=[],i=(a("d3b7"),a("5530")),s=a("fab2"),o=a("2e1c"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"选择藏品",width:1040,visible:e.visible,confirmLoading:e.confirmLoading,maskClosable:!1,destroyOnClose:!0},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("div",{staticStyle:{width:"100%",height:"100%",padding:"20px 30px",display:"flex","flex-wrap":"wrap"}},e._l(e.categoryList,(function(t,r){return a("div",{staticStyle:{padding:"20px"},on:{click:function(t){return e.change(r)}}},[a("a-radio-group",{attrs:{name:"radioGroup","default-value":0},model:{value:e.form.zhangqi,callback:function(t){e.$set(e.form,"zhangqi",t)},expression:"form.zhangqi"}},[a("a-radio",{staticStyle:{"margin-left":"29px","margin-bottom":"10px"},attrs:{value:e.changeIndex==r?0:1}}),a("div",{staticStyle:{width:"80px",height:"80px"}},[a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.goods_image}})]),a("div",{staticStyle:{color:"#000",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","max-width":"76px","text-align":"center"}},[e._v(e._s(t.goods_name))]),a("div",{staticStyle:{"text-align":"center"}},[e._v("ID:"+e._s(t.goods_id))])],1)],1)})),0)])},c=[],d=(a("99af"),a("2ef0")),u=a.n(d),m=a("2f71"),f=a("2af9"),h=a("8243"),p={components:{SelectImage:f["d"]},props:{categoryList:{type:Array,required:!0},userArr:{type:Array,required:!0}},data:function(){return{title:"",changeIndex:0,labelCol:{span:7},wrapperCol:{span:13},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),categoryListTree:[],record:{}}},methods:{change:function(e){this.changeIndex=e},edit:function(e){this.visible=!0,this.record=e,this.getCategoryList(),this.setFieldsValue()},setFieldsValue:function(){var e=this.record,t=this.form.setFieldsValue;this.$nextTick((function(){t(u.a.pick(e,["name","parent_id","image_id","status","sort"]))}))},getCategoryList:function(){var e=this.categoryList,t=h["a"].formatTreeData(e);this.categoryListTree=[{title:"顶级分类",key:0,value:0}].concat(t)},handleSubmit:function(e){var t=this,a={userIds:this.userArr,goodsId:this.categoryList[this.changeIndex].goods_id};this.confirmLoading=!0,m["f"](a).then((function(e){t.$message.success(e.message,1.5),t.handleCancel(),t.$emit("handleSubmit",a)})).finally((function(e){t.confirmLoading=!1}))},handleCancel:function(){this.visible=!1,this.form.resetFields()},onFormSubmit:function(e){var t=this;this.confirmLoading=!0,m["d"]({categoryId:this.record["category_id"],form:e}).then((function(a){t.$message.success(a.message,1.5),t.handleCancel(),t.$emit("handleSubmit",e)})).finally((function(e){t.confirmLoading=!1}))}}},v=p,g=a("2877"),b=Object(g["a"])(v,l,c,!1,null,null,null),_=b.exports,C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{staticClass:"noborder",attrs:{title:e.title,width:520,visible:e.visible,confirmLoading:e.confirmLoading,maskClosable:!1},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"会员ID",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("span",[e._v(e._s(e.record.user_id))])]),a("a-form-item",{attrs:{label:"会员等级",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["grade_id",{rules:[{required:!0}]}],expression:"['grade_id', { rules: [{ required: true }] }]"}],attrs:{placeholder:"请选择会员等级"}},[a("a-select-option",{attrs:{value:0}},[e._v("无等级")]),e._l(e.gradeList,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.grade_id}},[e._v(e._s(t.name))])}))],2)],1),a("a-form-item",{attrs:{label:"管理员备注",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",{rules:[{required:!0,message:"请输入管理员备注"}]}],expression:"['remark', { rules: [{ required: true, message: '请输入管理员备注' }] }]"}],attrs:{placeholder:"请输入管理员备注",rows:3}})],1)],1)],1)],1)},y=[],w=a("88bc"),S=a.n(w),I={components:{},props:{gradeList:{type:Array,required:!0}},data:function(){return{title:"设置会员等级",labelCol:{span:7},wrapperCol:{span:13},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),record:{}}},methods:{handle:function(e){this.visible=!0,this.record=e,this.setFieldsValue()},setFieldsValue:function(){var e=this.record,t=this.form.setFieldsValue;this.$nextTick((function(){t(S()(e,["grade_id"]))}))},handleSubmit:function(e){var t=this;e.preventDefault();var a=this.form.validateFields;a((function(e,a){!e&&t.onFormSubmit(a)}))},handleCancel:function(){this.visible=!1,this.form.resetFields()},onFormSubmit:function(e){var t=this;this.confirmLoading=!0,s["e"]({userId:this.record.user_id,form:e}).then((function(a){t.$message.success(a.message,1.5),t.handleCancel(),t.$emit("handleSubmit",e)})).finally((function(){t.confirmLoading=!1}))}}},R=I,x=(a("9724"),Object(g["a"])(R,C,y,!1,null,null,null)),P=x.exports,E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{staticClass:"noborder",attrs:{title:e.title,width:520,visible:e.visible,confirmLoading:e.confirmLoading,maskClosable:!1},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-tabs",{attrs:{activeKey:e.activeKey},on:{change:e.onChangeTabs}},[a("a-tab-pane",{key:e.RECHARGE_TYPE_POINTS,attrs:{tab:"充值积分"}},[e.activeKey===e.RECHARGE_TYPE_POINTS?[a("a-form-item",{staticClass:"mb-5",attrs:{label:"会员ID",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("span",[e._v(e._s(e.record.user_id))])]),a("a-form-item",{staticClass:"mb-5",attrs:{label:"当前积分",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("span",{staticClass:"c-p"},[e._v(e._s(e.record.points))])]),a("a-form-item",{attrs:{label:"充值方式",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:[e.RECHARGE_TYPE_POINTS+".mode",{initialValue:"inc",rules:[{required:!0}]}],expression:"[`${RECHARGE_TYPE_POINTS}.mode`, { initialValue: 'inc', rules: [{ required: true }] }]"}]},[a("a-radio",{attrs:{value:"inc"}},[e._v("增加")]),a("a-radio",{attrs:{value:"dec"}},[e._v("减少")]),a("a-radio",{attrs:{value:"final"}},[e._v("最终积分")])],1)],1),a("a-form-item",{attrs:{label:"变更数量",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:[e.RECHARGE_TYPE_POINTS+".value",{initialValue:"",rules:[{required:!0,message:"请输入变更的金数量"}]}],expression:"[`${RECHARGE_TYPE_POINTS}.value`, { initialValue: '', rules: [{ required: true, message: '请输入变更的金数量' }] }]"}],attrs:{min:.01}})],1),a("a-form-item",{attrs:{label:"管理员备注",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:[e.RECHARGE_TYPE_POINTS+".remark",{rules:[{required:!0,message:"请输入管理员备注"}]}],expression:"[`${RECHARGE_TYPE_POINTS}.remark`, { rules: [{ required: true, message: '请输入管理员备注' }] }]"}],attrs:{placeholder:"请输入管理员备注",rows:3}})],1)]:e._e()],2)],1)],1)],1)],1)},L=[],k="balance",F="points",O={components:{},data:function(){return{title:"会员充值",labelCol:{span:7},wrapperCol:{span:13},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),activeKey:F,RECHARGE_TYPE_BALANCE:k,RECHARGE_TYPE_POINTS:F,record:{}}},methods:{handle:function(e){this.visible=!0,this.record=e},onChangeTabs:function(e){this.activeKey=e},handleSubmit:function(e){var t=this;e.preventDefault();var a=this.form.validateFields;a((function(e,a){!e&&t.onFormSubmit(a)}))},handleCancel:function(){this.visible=!1,this.form.resetFields()},onFormSubmit:function(e){var t=this,a=this.record,r=this.activeKey;this.confirmLoading=!0,s["h"]({userId:a.user_id,target:r,form:e}).then((function(a){t.$message.success(a.message,1.5),t.handleCancel(),t.$emit("handleSubmit",e)})).finally((function(){t.confirmLoading=!1}))}}},D=O,$=(a("67f9"),Object(g["a"])(D,E,L,!1,null,"70e9a882",null)),N=$.exports,T=a("04b3"),A={"MP-WEIXIN":"微信小程序",H5:"H5",APP:"APP"},q={"MP-WEIXIN":T["h"],H5:T["d"],APP:T["a"]},G={name:"Index",components:{STable:f["c"],GradeForm:P,RechargeForm:N,EditForm:_},data:function(){var e=this;return{PlatformName:A,PlatformIcons:q,searchForm:this.$form.createForm(this),queryParam:{},isLoading:!1,selectedRowKeys:[],columns:[{title:"会员ID",dataIndex:"user_id"},{title:"上级ID",dataIndex:"extension_id",scopedSlots:{customRender:"extension_id"}},{title:"邀请人数",dataIndex:"num",scopedSlots:{customRender:"num"}},{title:"会员头像",dataIndex:"avatar_url",scopedSlots:{customRender:"avatar_url"}},{title:"昵称/手机号",scopedSlots:{customRender:"main_info"}},{title:"积分",dataIndex:"balance",scopedSlots:{customRender:"balance"}},{title:"实际消费金额",dataIndex:"expend_money",scopedSlots:{customRender:"expend_money"}},{title:"注册来源",dataIndex:"platform",scopedSlots:{customRender:"platform"}},{title:"注册时间",dataIndex:"create_time"},{title:"操作",width:"180px",scopedSlots:{customRender:"action"}}],loadData:function(t){return s["f"](Object(i["a"])(Object(i["a"])({},t),e.queryParam)).then((function(e){return e.data.list}))},gradeList:[]}},computed:{rowSelection:function(){return{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange}}},created:function(){this.getGradeList()},methods:{handleUpdateStatus:function(e){this.$refs.EditForm.edit(this.shopArr)},onSelectChange:function(e){this.selectedRowKeys=e},getGradeList:function(){var e=this;o["a"]().then((function(t){e.gradeList=t.data.list})),o["c"]().then((function(t){e.shopArr=t.data.list}))},handleGrade:function(e){this.$refs.GradeForm.handle(e)},handleRecharge:function(e){this.$refs.RechargeForm.handle(e)},handleDelete:function(e){var t=this,a=this.$confirm({title:"您确定要删除该记录吗?",content:"删除后不可恢复",onOk:function(){return s["c"]({userId:e.user_id}).then((function(e){t.$message.success(e.message,1.5),t.handleRefresh()})).finally((function(e){a.destroy()}))}})},handleSearch:function(e){var t=this;e.preventDefault(),this.searchForm.validateFields((function(e,a){e||(t.queryParam=Object(i["a"])(Object(i["a"])({},t.queryParam),a),t.handleRefresh(!0))}))},handleRefresh:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$refs.table.refresh(e)}}},j=G,H=(a("4016"),Object(g["a"])(j,r,n,!1,null,"7e2c5756",null));t["default"]=H.exports},e0fc:function(e,t,a){},e1fe:function(e,t,a){"use strict";a("4de4"),a("4160"),a("d81d"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0");var r=a("5530"),n=a("2ef0"),i=a.n(n),s=a("8243"),o=a("d084"),l=a("2e1c"),c=a("b775"),d={list:"/goods.service/list",all:"/goods.service/all",add:"/goods.service/add",edit:"/goods.service/edit",delete:"/goods.service/delete"};function u(e){return Object(c["b"])({url:d.all,method:"get",params:e})}var m={list:"/setting.delivery/list",all:"/setting.delivery/all",detail:"/setting.delivery/detail",add:"/setting.delivery/add",edit:"/setting.delivery/edit",delete:"/setting.delivery/delete"};function f(e){return Object(c["b"])({url:m.all,method:"get",params:e})}t["a"]={goodsId:null,formData:{goods:{},categoryList:[],deliveryList:[],debList:[],serviceList:[],defaultServiceIds:[],userGradeList:[],defaultUserGradeValue:{}},getFromData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.goodsId=t,new Promise((function(a,r){Promise.all([e.getGoodsDetail(t),e.getCategoryList(),e.getDeliveryList(),e.getDebList(),e.getServiceList(),e.getUserGradeList()]).then((function(){e.setDefaultData(),a({formData:e.formData})}))}))},getGoodsDetail:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!!t&&new Promise((function(a,r){o["g"]({goodsId:t}).then((function(t){e.formData.goods=t.data.goodsInfo,a()}))}))},getFieldsValue:function(){var e=this.formData.goods,t=this.formData.debList;e.categorys=this.formatCategoryIds(e.categoryIds),t.debLists=this.formatdebLists(t);var a=i.a.pick(e,["goods_name","categorys","debLists","goods_no","delivery_type","sort","delivery_id","status","spec_type","deduct_stock_type","content","selling_point","serviceIds","sales_initial","is_points_gift","is_points_discount","is_enable_grade","is_alone_grade","first"]),n=i.a.pick(e.skuList[0],["goods_price","line_price","stock_num","goods_weight"]);return Object(r["a"])(Object(r["a"])({},a),n)},formatCategoryIds:function(e){return e.map((function(e){return{value:e}}))},formatdebLists:function(e){return e.map((function(e){return{value:e}}))},getCategoryList:function(){var e=this;return new Promise((function(t,a){s["a"].getCategoryTreeSelect().then((function(a){e.formData.categoryList=a,t()}))}))},getDebList:function(){var e=this;return new Promise((function(t,a){s["a"].getDeb().then((function(a){e.formData.debList=a,t()}))}))},getDeliveryList:function(){var e=this;return new Promise((function(t,a){f().then((function(a){e.formData.deliveryList=a.data.list,t()}))}))},getServiceList:function(){var e=this;return new Promise((function(t,a){u().then((function(a){e.formData.serviceList=a.data.list,t()}))}))},getUserGradeList:function(){var e=this;return new Promise((function(t,a){l["a"]({status:1}).then((function(a){e.formData.userGradeList=a.data.list,t()}))}))},setDefaultData:function(){this.setDefaultServiceIds(),this.setDefaultUserGradeValue()},setDefaultServiceIds:function(){var e=this.formData.serviceList;if(!this.goodsId){var t=e.filter((function(e){return e.is_default}));this.formData.defaultServiceIds=t.map((function(e){return e.service_id}))}},setDefaultUserGradeValue:function(){var e=this.formData.userGradeList,t=this.goodsId&&this.formData.goods.alone_grade_equity?this.formData.goods.alone_grade_equity:{},a={};e.forEach((function(e){a[e.grade_id]=t[e.grade_id]||e.equity.discount})),this.formData.defaultUserGradeValue=Object(r["a"])({},a)}}},f855:function(e,t,a){"use strict";var r=a("e0fc"),n=a.n(r);n.a},fab2:function(e,t,a){"use strict";a.d(t,"f",(function(){return i})),a.d(t,"g",(function(){return s})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return l})),a.d(t,"h",(function(){return c})),a.d(t,"d",(function(){return d})),a.d(t,"e",(function(){return u})),a.d(t,"c",(function(){return m}));var r=a("b775"),n={list:"/user/list",detail:"/user/detail",recharge:"/user/recharge",grade:"/user/grade",delete:"/user/delete",back:"/Store/feedbackColl",mark:"/order/marketLog",balance:"/user.balance/log",examine:"/user.balance/examine"};function i(e){return Object(r["b"])({url:n.list,method:"get",params:e})}function s(e){return Object(r["b"])({url:n.mark,method:"get",params:e})}function o(e){return Object(r["b"])({url:n.balance,method:"get",params:e})}function l(e){return Object(r["b"])({url:n.back,method:"get",params:e})}function c(e){return Object(r["b"])({url:n.recharge,method:"post",data:e})}function d(e){return Object(r["b"])({url:n.examine,method:"post",data:e})}function u(e){return Object(r["b"])({url:n.grade,method:"post",data:e})}function m(e){return Object(r["b"])({url:n.delete,method:"post",data:e})}}}]);