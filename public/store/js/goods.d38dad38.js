(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["goods"],{"05a2":function(e,t,a){"use strict";var r=a("b758"),i=a.n(r);i.a},"063d":function(e,t,a){},"078d":function(e,t,a){"use strict";var r=a("ea67"),i=a.n(r);i.a},"093d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),a("div",{staticClass:"table-operator"},[a("a-button",{directives:[{name:"action",rawName:"v-action:add",arg:"add"}],attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新增")])],1),e.isLoading?e._e():a("a-table",{attrs:{rowKey:"category_id",columns:e.columns,dataSource:e.categoryList,defaultExpandAllRows:!0,expandIconColumnIndex:1,pagination:!1,loading:e.isLoading},scopedSlots:e._u([{key:"status",fn:function(t){return a("span",{},[a("a-tag",{attrs:{color:t?"green":""}},[e._v(e._s(t?"显示":"隐藏"))])],1)}},{key:"action",fn:function(t,r){return a("span",{},[a("a",{directives:[{name:"action",rawName:"v-action:edit",arg:"edit"}],staticStyle:{"margin-right":"8px"},on:{click:function(t){return e.handleEdit(r)}}},[e._v("编辑")]),a("a",{directives:[{name:"action",rawName:"v-action:delete",arg:"delete"}],on:{click:function(t){return e.handleDelete(r)}}},[e._v("删除")])])}}],null,!1,1032135766)}),a("AddForm",{ref:"AddForm",attrs:{categoryList:e.categoryList},on:{handleSubmit:e.handleRefresh}}),a("EditForm",{ref:"EditForm",attrs:{categoryList:e.categoryList},on:{handleSubmit:e.handleRefresh}})],1)},i=[],o=(a("d3b7"),a("2f71")),s=a("2af9"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"新增商品分类",width:720,visible:e.visible,confirmLoading:e.confirmLoading,maskClosable:!1,destroyOnClose:!0},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"分类名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,min:2,message:"请输入至少2个字符"}]}],expression:"['name', {rules: [{required: true, min: 2, message: '请输入至少2个字符'}]}]"}]})],1),a("a-form-item",{attrs:{label:"上级分类",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["parent_id",{initialValue:0}],expression:"['parent_id', {initialValue: 0}]"}],attrs:{treeData:e.categoryListTree,dropdownStyle:{maxHeight:"400px",overflow:"auto"},allowClear:""}})],1),a("a-form-item",{attrs:{label:"分类图片",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("SelectImage",{directives:[{name:"decorator",rawName:"v-decorator",value:["image_id"],expression:"['image_id']"}]})],1),a("a-form-item",{attrs:{label:"状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"用户端是否展示"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:1,rules:[{required:!0}]}],expression:"['status', {initialValue: 1, rules: [{required: true}]}]"}]},[a("a-radio",{attrs:{value:1}},[e._v("显示")]),a("a-radio",{attrs:{value:0}},[e._v("隐藏")])],1)],1),a("a-form-item",{attrs:{label:"排序",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"数字越小越靠前"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:100,rules:[{required:!0,message:"请输入至少1个数字"}]}],expression:"['sort', {initialValue: 100, rules: [{required: true, message: '请输入至少1个数字'}]}]"}],attrs:{min:0}})],1)],1)],1)],1)},n=[],u=(a("99af"),a("8243")),c={components:{SelectImage:s["d"]},props:{categoryList:{type:Array,required:!0}},data:function(){return{title:"",labelCol:{span:7},wrapperCol:{span:13},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),categoryListTree:[]}},methods:{add:function(){this.visible=!0,this.getCategoryList()},getCategoryList:function(){var e=this.categoryList,t=u["a"].formatTreeData(e);this.categoryListTree=[{title:"顶级分类",key:0,value:0}].concat(t)},handleSubmit:function(e){var t=this;e.preventDefault();var a=this.form.validateFields;a((function(e,a){e||t.onFormSubmit(a)}))},handleCancel:function(){this.visible=!1,this.form.resetFields()},onFormSubmit:function(e){var t=this;this.confirmLoading=!0,o["a"]({form:e}).then((function(a){t.$message.success(a.message,1.5),t.handleCancel(),t.$emit("handleSubmit",e)})).finally((function(e){t.confirmLoading=!1}))}}},d=c,m=a("2877"),p=Object(m["a"])(d,l,n,!1,null,null,null),f=p.exports,h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"编辑商品分类",width:720,visible:e.visible,confirmLoading:e.confirmLoading,maskClosable:!1,destroyOnClose:!0},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"分类名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,min:2,message:"请输入至少2个字符"}]}],expression:"['name', {rules: [{required: true, min: 2, message: '请输入至少2个字符'}]}]"}]})],1),a("a-form-item",{attrs:{label:"上级分类",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["parent_id"],expression:"['parent_id']"}],attrs:{treeData:e.categoryListTree,dropdownStyle:{maxHeight:"400px",overflow:"auto"},allowClear:""}})],1),a("a-form-item",{attrs:{label:"分类图片",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("SelectImage",{directives:[{name:"decorator",rawName:"v-decorator",value:["image_id"],expression:"['image_id']"}],attrs:{defaultList:e.record.image?[e.record.image]:[]}})],1),a("a-form-item",{attrs:{label:"状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"用户端是否展示"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:1,rules:[{required:!0}]}],expression:"['status', { initialValue: 1, rules: [{ required: true }] }]"}]},[a("a-radio",{attrs:{value:1}},[e._v("显示")]),a("a-radio",{attrs:{value:0}},[e._v("隐藏")])],1)],1),a("a-form-item",{attrs:{label:"排序",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"数字越小越靠前"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:100,rules:[{required:!0,message:"请输入至少1个数字"}]}],expression:"['sort', {initialValue: 100, rules: [{required: true, message: '请输入至少1个数字'}]}]"}],attrs:{min:0}})],1)],1)],1)],1)},g=[],v=a("2ef0"),b=a.n(v),_={components:{SelectImage:s["d"]},props:{categoryList:{type:Array,required:!0}},data:function(){return{title:"",labelCol:{span:7},wrapperCol:{span:13},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),categoryListTree:[],record:{}}},methods:{edit:function(e){this.visible=!0,this.record=e,this.getCategoryList(),this.setFieldsValue()},setFieldsValue:function(){var e=this.record,t=this.form.setFieldsValue;this.$nextTick((function(){t(b.a.pick(e,["name","parent_id","image_id","status","sort"]))}))},getCategoryList:function(){var e=this.categoryList,t=u["a"].formatTreeData(e);this.categoryListTree=[{title:"顶级分类",key:0,value:0}].concat(t)},handleSubmit:function(e){var t=this;e.preventDefault();var a=this.form.validateFields;a((function(e,a){e||t.onFormSubmit(a)}))},handleCancel:function(){this.visible=!1,this.form.resetFields()},onFormSubmit:function(e){var t=this;this.confirmLoading=!0,o["d"]({categoryId:this.record["category_id"],form:e}).then((function(a){t.$message.success(a.message,1.5),t.handleCancel(),t.$emit("handleSubmit",e)})).finally((function(e){t.confirmLoading=!1}))}}},C=_,w=Object(m["a"])(C,h,g,!1,null,null,null),y=w.exports,S={name:"Index",components:{STable:s["c"],AddForm:f,EditForm:y},data:function(){return{categoryList:[],queryParam:{},isLoading:!1,columns:[{title:"分类ID",dataIndex:"category_id"},{title:"分类名称",dataIndex:"name"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"排序",dataIndex:"sort"},{title:"添加时间",dataIndex:"create_time"},{title:"操作",dataIndex:"action",width:"180px",scopedSlots:{customRender:"action"}}]}},created:function(){this.getCategoryList(!0)},methods:{getCategoryList:function(e){var t=this;e&&(this.isLoading=!0),o["e"]().then((function(e){t.categoryList=e.data.list})).finally((function(e){t.isLoading=!1}))},handleAdd:function(){this.$refs.AddForm.add()},handleEdit:function(e){this.$refs.EditForm.edit(e)},handleDelete:function(e){var t=this,a=this.$confirm({title:"您确定要删除该记录吗?",content:"删除后不可恢复",onOk:function(){return o["c"]({categoryId:e["category_id"]}).then((function(e){t.$message.success(e.message,1.5),t.handleRefresh()})).finally((function(e){a.destroy()}))}})},handleRefresh:function(){this.getCategoryList()}}},k=S,x=Object(m["a"])(k,r,i,!1,null,null,null);t["default"]=x.exports},"0bf2":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-form-item",{attrs:{label:"商品规格",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form-item-help",staticStyle:{"line-height":"36px"}},[a("small",[e._v("最多添加3个商品规格组，生成的SKU数量不能超出50个")])]),e._l(e.multiSpecData.specList,(function(t,r){return a("div",{key:r,staticClass:"spec-group"},[a("div",{staticClass:"spec-group-item clearfix"},[a("a-input",{staticClass:"group-item-input",attrs:{readOnly:e.isSpecLocked,placeholder:"请输入规格名称"},on:{change:e.onChangeSpecGroupIpt},model:{value:t.spec_name,callback:function(a){e.$set(t,"spec_name",a)},expression:"item.spec_name"}}),e.isSpecLocked?e._e():a("a",{staticClass:"group-item-delete",attrs:{href:"javascript:;"},on:{click:function(t){return e.handleDeleteSpecGroup(r)}}},[e._v("删除规格组")])],1),a("div",{staticClass:"spec-value clearfix"},[e._l(t.valueList,(function(t,i){return a("div",{key:i,staticClass:"spec-value-item"},[a("a-input",{staticClass:"value-item-input",attrs:{readOnly:e.isSpecLocked,placeholder:"请输入规格值"},on:{change:e.onChangeSpecValueIpt},model:{value:t.spec_value,callback:function(a){e.$set(t,"spec_value",a)},expression:"itm.spec_value"}}),e.isSpecLocked?e._e():a("a-icon",{staticClass:"icon-close",attrs:{theme:"filled",type:"close-circle"},on:{click:function(t){return e.handleDeleteSpecValue(r,i)}}})],1)})),e.isSpecLocked?e._e():a("div",{staticClass:"spec-value-add"},[a("a",{staticClass:"group-item-delete",attrs:{href:"javascript:;"},on:{click:function(t){return e.handleAddSpecValue(r)}}},[e._v("新增规格值")])])],2)])})),!e.isSpecLocked&&e.multiSpecData.specList.length<3?a("a-button",{staticClass:"spec-group-add-btn",attrs:{icon:"plus"},on:{click:e.handleAddSpecGroup}},[e._v("添加规格组")]):e._e()],2),a("a-form-item",{directives:[{name:"show",rawName:"v-show",value:e.multiSpecData.skuList.length,expression:"multiSpecData.skuList.length"}],attrs:{label:"SKU列表",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e.multiSpecData.skuList.length>1?a("div",{staticClass:"sku-batch"},[a("span",{staticClass:"title"},[e._v("批量设置:")]),a("a-input-number",{attrs:{placeholder:"商品价格",min:.01,precision:2},model:{value:e.multiSpecData.skuBatchForm.goods_price,callback:function(t){e.$set(e.multiSpecData.skuBatchForm,"goods_price",t)},expression:"multiSpecData.skuBatchForm.goods_price"}}),a("a-input-number",{attrs:{placeholder:"划线价格",min:0,precision:2},model:{value:e.multiSpecData.skuBatchForm.line_price,callback:function(t){e.$set(e.multiSpecData.skuBatchForm,"line_price",t)},expression:"multiSpecData.skuBatchForm.line_price"}}),a("a-input-number",{attrs:{placeholder:"库存数量",min:0,precision:0},model:{value:e.multiSpecData.skuBatchForm.stock_num,callback:function(t){e.$set(e.multiSpecData.skuBatchForm,"stock_num",t)},expression:"multiSpecData.skuBatchForm.stock_num"}}),a("a-input-number",{attrs:{placeholder:"商品重量",min:0,precision:2},model:{value:e.multiSpecData.skuBatchForm.goods_weight,callback:function(t){e.$set(e.multiSpecData.skuBatchForm,"goods_weight",t)},expression:"multiSpecData.skuBatchForm.goods_weight"}}),a("a-input",{attrs:{placeholder:"sku编码"},model:{value:e.multiSpecData.skuBatchForm.goods_sku_no,callback:function(t){e.$set(e.multiSpecData.skuBatchForm,"goods_sku_no",t)},expression:"multiSpecData.skuBatchForm.goods_sku_no"}}),a("a-button",{on:{click:e.handleSkuBatch}},[e._v("立即设置")])],1):e._e(),a("a-table",{staticClass:"sku-list",attrs:{columns:e.multiSpecData.skuColumns,dataSource:e.multiSpecData.skuList,scroll:{x:!0},pagination:!1,bordered:""},scopedSlots:e._u([{key:"image",fn:function(t,r){return[a("SelectImage",{attrs:{defaultList:r.image_id>0&&r.image?[r.image]:[],width:50},model:{value:r.image_id,callback:function(t){e.$set(r,"image_id",t)},expression:"item.image_id"}})]}},{key:"goods_price",fn:function(t,r){return[a("a-input-number",{attrs:{size:"small",min:.01,precision:2},model:{value:r.goods_price,callback:function(t){e.$set(r,"goods_price",t)},expression:"item.goods_price"}})]}},{key:"line_price",fn:function(t,r){return[a("a-input-number",{attrs:{size:"small",min:0,precision:2},model:{value:r.line_price,callback:function(t){e.$set(r,"line_price",t)},expression:"item.line_price"}})]}},{key:"stock_num",fn:function(t,r){return[a("a-input-number",{attrs:{size:"small",min:0,precision:0},model:{value:r.stock_num,callback:function(t){e.$set(r,"stock_num",t)},expression:"item.stock_num"}})]}},{key:"goods_weight",fn:function(t,r){return[a("a-input-number",{attrs:{size:"small",min:0,precision:2},model:{value:r.goods_weight,callback:function(t){e.$set(r,"goods_weight",t)},expression:"item.goods_weight"}})]}},{key:"goods_sku_no",fn:function(t,r){return[a("a-input",{attrs:{size:"small"},model:{value:r.goods_sku_no,callback:function(t){e.$set(r,"goods_sku_no",t)},expression:"item.goods_sku_no"}})]}}])})],1)],1)},i=[],o=a("4d91"),s=a("9f60"),l=a("2af9"),n={components:{SelectImage:l["d"]},props:{defaultSpecList:o["a"].array.def([]),defaultSkuList:o["a"].array.def([]),isSpecLocked:o["a"].bool.def(!1)},data:function(){return{labelCol:{span:3},wrapperCol:{span:21},MultiSpecModel:new s["a"],multiSpecData:{specList:[],skuList:[]}}},watch:{defaultSpecList:function(e){e.length&&this.MultiSpecModel.isEmpty()&&this.getData()}},created:function(){this.getData()},methods:{getData:function(){var e=this.defaultSpecList,t=this.defaultSkuList;this.multiSpecData=this.MultiSpecModel.getData(e,t)},getFromSpecData:function(){return this.MultiSpecModel.getFromSpecData()},handleAddSpecGroup:function(){this.checkSkuMaxNum()&&this.MultiSpecModel.handleAddSpecGroup()},handleDeleteSpecGroup:function(e){var t=this,a=this.$confirm({title:"您确定要删除该规格组吗?",content:"删除后不可恢复",onOk:function(){t.MultiSpecModel.handleDeleteSpecGroup(e),a.destroy()}})},handleAddSpecValue:function(e){this.checkSkuMaxNum()&&this.MultiSpecModel.handleAddSpecValue(e)},handleDeleteSpecValue:function(e,t){var a=this,r=this.$confirm({title:"您确定要删除该规格值吗?",content:"删除后不可恢复",onOk:function(){a.MultiSpecModel.handleDeleteSpecValue(e,t),r.destroy()}})},onChangeSpecGroupIpt:function(){this.MultiSpecModel.onUpdate(!0)},onChangeSpecValueIpt:function(e,t){this.MultiSpecModel.onUpdate(!0)},checkSkuMaxNum:function(){var e=this.multiSpecData.skuList;return!(e.length>=50)||(this.$message.error("生成的sku列表数量不能大于50个，当前数量：".concat(e.length,"个"),2.5),!1)},handleSkuBatch:function(){this.MultiSpecModel.handleSkuBatch()},verifyForm:function(){return!!this.MultiSpecModel.verifyForm()||(this.$message.error(this.MultiSpecModel.getError(),2),!1)}}},u=n,c=(a("77b7"),a("2877")),d=Object(c["a"])(u,r,i,!1,null,"ececd11e",null);t["a"]=d.exports},"0d15":function(e,t,a){"use strict";var r=a("4072"),i=a.n(r);i.a},1788:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),a("div",{staticClass:"table-operator"},[a("a-row",{staticClass:"row-item-search"},[a("a-form",{staticClass:"search-form",attrs:{form:e.searchForm,layout:"inline"},on:{submit:e.handleSearch}},[a("a-form-item",{attrs:{label:"藏品名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goodsName"],expression:"['goodsName']"}],attrs:{placeholder:"请输入商品名称"}})],1),a("a-form-item",{attrs:{label:"藏品编码"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goodsNo"],expression:"['goodsNo']"}],attrs:{placeholder:"请输入商品编码"}})],1),a("a-form-item",{attrs:{label:"藏品分类"}},[a("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["categoryId",{initialValue:0}],expression:"['categoryId', { initialValue: 0 }]"}],attrs:{treeData:e.categoryListTree,dropdownStyle:{maxHeight:"500px",overflow:"auto"},allowClear:""}})],1),a("a-form-item",{staticClass:"search-btn"},[a("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("搜索")])],1)],1)],1),a("div",{staticClass:"row-item-tab clearfix"},[a("div",{staticClass:"tab-list fl-l"},[a("a-radio-group",{attrs:{defaultValue:e.queryParam.listType},on:{change:e.handleTabs}},[a("a-radio-button",{attrs:{value:"all"}},[e._v("全部")]),a("a-radio-button",{attrs:{value:"on_sale"}},[e._v("出售中")]),a("a-radio-button",{attrs:{value:"off_sale"}},[e._v("已下架")]),a("a-radio-button",{attrs:{value:"sold_out"}},[e._v("已售罄")])],1)],1),e.$auth("/goods/create")?a("a-button",{staticClass:"fl-l",attrs:{type:"primary",icon:"plus"},on:{click:e.handleCreate}},[e._v("创建藏品")]):e._e(),e.selectedRowKeys.length?a("div",{staticClass:"button-group"},[a("a-button-group",{staticClass:"ml-10"},[a("a-button",{directives:[{name:"action",rawName:"v-action:status",arg:"status"}],attrs:{icon:"arrow-up"},on:{click:function(t){return e.handleUpdateStatus(e.selectedRowKeys,!0)}}},[e._v("上架")]),a("a-button",{directives:[{name:"action",rawName:"v-action:status",arg:"status"}],attrs:{icon:"arrow-down"},on:{click:function(t){return e.handleUpdateStatus(e.selectedRowKeys,!1)}}},[e._v("下架")]),a("a-button",{directives:[{name:"action",rawName:"v-action:delete",arg:"delete"}],attrs:{icon:"delete"},on:{click:function(t){return e.handleDelete(e.selectedRowKeys)}}},[e._v("删除")])],1)],1):e._e()],1)],1),a("s-table",{ref:"table",attrs:{rowKey:"goods_id",loading:e.isLoading,columns:e.columns,data:e.loadData,rowSelection:e.rowSelection,pageSize:15},scopedSlots:e._u([{key:"goods_image",fn:function(e){return a("span",{},[a("a",{attrs:{title:"点击查看原图",href:e,target:"_blank"}},[a("img",{attrs:{width:"50",height:"50",src:e,alt:"商品图片"}})])])}},{key:"goods_name",fn:function(t){return a("span",{},[a("p",{staticClass:"twoline-hide",staticStyle:{width:"200px"}},[e._v(e._s(t))])])}},{key:"author",fn:function(t){return a("span",{},[a("p",{staticClass:"twoline-hide",staticStyle:{width:"160px"}},[e._v(e._s(t))])])}},{key:"type",fn:function(t){return a("span",{},[a("p",{staticClass:"twoline-hide",staticStyle:{width:"90px"}},[e._v(e._s(e.changeText(t)))])])}},{key:"is_box",fn:function(t){return a("span",{},[a("p",{staticClass:"twoline-hide",staticStyle:{width:"90px"}},[e._v(e._s(e.is_box(t)))])])}},{key:"status",fn:function(t,r){return a("span",{},[a("a-tag",{staticClass:"cur-p",attrs:{color:10==t?"green":"red"},on:{click:function(a){return e.handleUpdateStatus([r.goods_id],10!=t)}}},[e._v(e._s(10==t?"上架":"下架"))])],1)}},{key:"action",fn:function(t,r){return a("div",{staticClass:"actions"},[a("router-link",{attrs:{to:{path:"/goods/update",query:{goodsId:r.goods_id}}}},[e._v("编辑")]),a("a",{directives:[{name:"action",rawName:"v-action:delete",arg:"delete"}],on:{click:function(t){return e.handleDelete([r.goods_id])}}},[e._v("删除")]),1==r.is_shop?a("a",{directives:[{name:"action",rawName:"v-action:delete",arg:"delete"}],on:{click:function(t){return e.isShopTrue([r.goods_id])}}},[e._v("审核通过")]):e._e()],1)}}])})],1)},i=[],o=(a("d3b7"),a("5530")),s=a("d084"),l=a("2af9"),n=a("8243"),u=[{title:"藏品ID",dataIndex:"goods_id"},{title:"藏品图片",dataIndex:"goods_image",scopedSlots:{customRender:"goods_image"}},{title:"藏品名称",dataIndex:"goods_name",scopedSlots:{customRender:"goods_name"}},{title:"藏品作者",dataIndex:"author",scopedSlots:{customRender:"author"}},{title:"藏品类型",dataIndex:"type",scopedSlots:{customRender:"type"}},{title:"藏品属性",dataIndex:"is_box",scopedSlots:{customRender:"is_box"}},{title:"藏品价格",dataIndex:"goods_price_min",scopedSlots:{customRender:"goods_price_min"}},{title:"总销量",dataIndex:"sales_actual"},{title:"库存总量",dataIndex:"stock_total"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"排序",dataIndex:"sort"},{title:"添加时间",dataIndex:"create_time"},{title:"操作",dataIndex:"action",width:"180px",scopedSlots:{customRender:"action"}}],c={name:"Index",components:{ContentHeader:l["a"],STable:l["c"]},data:function(){var e=this;return{searchForm:this.$form.createForm(this),categoryListTree:[],queryParam:{listType:"all"},isLoading:!1,columns:u,selectedRowKeys:[],loadData:function(t){return s["m"](Object(o["a"])(Object(o["a"])({},t),e.queryParam)).then((function(e){return e.data.list}))}}},created:function(){this.$route.query.listType&&(this.queryParam.listType=this.$route.query.listType),this.getCategoryList()},computed:{rowSelection:function(){return{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange}},changeText:function(){return function(e){switch(e){case 0:return"普通藏品";case 1:return"碎片藏品";case 2:return"空投藏品";case 3:return"抽签藏品"}}},is_box:function(){return function(e){return 0==e?"普通藏品":"盲盒藏品"}}},methods:{onSelectChange:function(e){this.selectedRowKeys=e},handleTabs:function(e){this.queryParam.listType=e.target.value,this.handleRefresh(!0)},handleSearch:function(e){var t=this;e.preventDefault(),this.searchForm.validateFields((function(e,a){e||(t.queryParam=Object(o["a"])(Object(o["a"])({},t.queryParam),a),t.handleRefresh(!0))}))},handleReset:function(){this.searchForm.resetFields()},getCategoryList:function(){var e=this;this.isLoading=!0,n["a"].getListFromScreen().then((function(t){e.categoryListTree=t})).finally((function(t){e.isLoading=!1}))},handleUpdateStatus:function(e){var t=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.$auth("/goods/index.status"))return!1;this.isLoading=!0,s["o"]({goodsIds:e,state:a}).then((function(e){t.$message.success(e.message,1.5),t.handleRefresh()})).finally((function(e){t.isLoading=!1}))},handleDelete:function(e){var t=this,a=this.$confirm({title:"您确定要删除该记录吗?",content:"删除后不可恢复",onOk:function(){return s["g"]({goodsIds:e}).then((function(e){t.$message.success(e.message,1.5),t.handleRefresh()})).finally((function(e){a.destroy()}))}})},isShopTrue:function(e){var t=this,a=this;return s["n"]({goodsIds:e}).then((function(e){a.$message.success(e.message,1.5),a.handleRefresh()})).finally((function(e){t.isLoading=!1}))},handleCreate:function(){this.$router.push("/goods/create")},handleRefresh:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.selectedRowKeys=[],this.$refs.table.refresh(e)}}},d=c,m=(a("0d15"),a("2877")),p=Object(m["a"])(d,r,i,!1,null,"471e58ff",null);t["default"]=p.exports},"18af":function(e,t,a){},"1a12":function(e,t,a){"use strict";var r=a("8b24"),i=a.n(r);i.a},"1b8c":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),a("div",{staticClass:"table-operator"},[a("div",{staticClass:"row-item-tab clearfix"},[a("div",{staticClass:"tab-list fl-l"},[a("a-radio-group",{attrs:{defaultValue:e.queryParam.listType},on:{change:e.handleTabs}},[a("a-radio-button",{attrs:{value:"all"}},[e._v("全部")])],1)],1),e.$auth("/goods/create")?a("a-button",{staticClass:"fl-l",attrs:{type:"primary",icon:"plus"},on:{click:e.handleCreate}},[e._v("添加盲盒")]):e._e(),e.selectedRowKeys.length?a("div",{staticClass:"button-group"},[a("a-button-group",{staticClass:"ml-10"},[a("a-button",{directives:[{name:"action",rawName:"v-action:delete",arg:"delete"}],attrs:{icon:"delete"},on:{click:function(t){return e.handleDelete(e.selectedRowKeys)}}},[e._v("删除")])],1)],1):e._e()],1)]),a("s-table",{ref:"table",attrs:{rowKey:"id",loading:e.isLoading,columns:e.columns,data:e.loadData,rowSelection:e.rowSelection,pageSize:15},scopedSlots:e._u([{key:"thumb",fn:function(e){return a("span",{},[a("a",{attrs:{title:"点击查看原图",href:e,target:"_blank"}},[a("img",{attrs:{width:"50",height:"50",src:e,alt:"商品图片"}})])])}},{key:"blind_name",fn:function(t){return a("span",{},[a("p",{staticClass:"twoline-hide",staticStyle:{width:"180px"}},[e._v(e._s(t))])])}},{key:"action",fn:function(t,r){return a("div",{staticClass:"actions"},[a("router-link",{attrs:{to:{path:"/blinds/update",query:{goodsId:r.id}}}},[e._v("编辑")]),a("a",{directives:[{name:"action",rawName:"v-action:delete",arg:"delete"}],on:{click:function(t){return e.handleDelete([r.id])}}},[e._v("删除")])],1)}}])})],1)},i=[],o=(a("d3b7"),a("5530")),s=a("3bab"),l=a("2af9"),n=a("8243"),u=[{title:"盲盒ID",dataIndex:"id"},{title:"盲盒图片",dataIndex:"thumb",scopedSlots:{customRender:"thumb"}},{title:"盲盒标题",dataIndex:"blind_name",scopedSlots:{customRender:"blind_name"}},{title:"总销量",dataIndex:"sales"},{title:"库存总量",dataIndex:"total"},{title:"添加时间",dataIndex:"update_time"},{title:"操作",dataIndex:"action",width:"180px",scopedSlots:{customRender:"action"}}],c={name:"Index",components:{ContentHeader:l["a"],STable:l["c"]},data:function(){var e=this;return{searchForm:this.$form.createForm(this),categoryListTree:[],queryParam:{listType:"all"},isLoading:!1,columns:u,selectedRowKeys:[],loadData:function(t){return s["c"](Object(o["a"])(Object(o["a"])({},t),e.queryParam)).then((function(e){return e.data.lists}))}}},created:function(){this.$route.query.listType&&(this.queryParam.listType=this.$route.query.listType),this.getCategoryList()},computed:{rowSelection:function(){return{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange}}},methods:{onSelectChange:function(e){this.selectedRowKeys=e},handleTabs:function(e){this.queryParam.listType=e.target.value,this.handleRefresh(!0)},handleSearch:function(e){var t=this;e.preventDefault(),this.searchForm.validateFields((function(e,a){e||(t.queryParam=Object(o["a"])(Object(o["a"])({},t.queryParam),a),t.handleRefresh(!0))}))},handleReset:function(){this.searchForm.resetFields()},getCategoryList:function(){var e=this;this.isLoading=!0,n["a"].getListFromScreen().then((function(t){e.categoryListTree=t})).finally((function(t){e.isLoading=!1}))},handleUpdateStatus:function(e){var t=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.$auth("/goods/index.status"))return!1;this.isLoading=!0,s["d"]({goodsIds:e,state:a}).then((function(e){t.$message.success(e.message,1.5),t.handleRefresh()})).finally((function(e){t.isLoading=!1}))},handleDelete:function(e){var t=this,a=this.$confirm({title:"您确定要删除该记录吗?",content:"删除后不可恢复",onOk:function(){return s["e"]({goodsid:e}).then((function(e){t.$message.success(e.message,1.5),t.handleRefresh()})).finally((function(e){a.destroy()}))}})},handleCreate:function(){this.$router.push("/blinds/create")},handleRefresh:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.selectedRowKeys=[],this.$refs.table.refresh(e)}}},d=c,m=(a("55b9"),a("2877")),p=Object(m["a"])(d,r,i,!1,null,"55a1d843",null);t["default"]=p.exports},"1c29":function(e,t,a){},"1da1":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("d3b7"),a("e6cf");function r(e,t,a,r,i,o,s){try{var l=e[o](s),n=l.value}catch(u){return void a(u)}l.done?t(n):Promise.resolve(n).then(r,i)}function i(e){return function(){var t=this,a=arguments;return new Promise((function(i,o){var s=e.apply(t,a);function l(e){r(s,i,o,l,n,"next",e)}function n(e){r(s,i,o,l,n,"throw",e)}l(void 0)}))}}},2884:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),a("div",{staticClass:"table-operator"},[a("a-row",{staticClass:"row-item-search"},[a("a-form",{staticClass:"search-form",attrs:{form:e.searchForm,layout:"inline"},on:{submit:e.handleSearch}},[a("a-form-item",{attrs:{label:"藏品名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goodsName"],expression:"['goodsName']"}],attrs:{placeholder:"请输入藏品名称"}})],1),a("a-form-item",{attrs:{label:"藏品编码"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goodsNo"],expression:"['goodsNo']"}],attrs:{placeholder:"请输入藏品编码"}})],1),a("a-form-item",{staticClass:"search-btn"},[a("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("搜索")])],1)],1)],1),a("div",{staticClass:"row-item-tab clearfix"},[a("div",{staticClass:"tab-list fl-l"},[a("a-radio-group",{attrs:{defaultValue:e.queryParam.listType},on:{change:e.handleTabs}},[a("a-radio-button",{attrs:{value:"all"}},[e._v("全部")]),a("a-radio-button",{attrs:{value:"on_sale"}},[e._v("出售中")]),a("a-radio-button",{attrs:{value:"off_sale"}},[e._v("已下架")]),a("a-radio-button",{attrs:{value:"sold_out"}},[e._v("已售罄")])],1)],1),e.$auth("/fragments/create")?a("a-button",{staticClass:"fl-l",attrs:{type:"primary",icon:"plus"},on:{click:e.handleCreate}},[e._v("创建藏品")]):e._e(),e.selectedRowKeys.length?a("div",{staticClass:"button-group"},[a("a-button-group",{staticClass:"ml-10"},[a("a-button",{directives:[{name:"action",rawName:"v-action:status",arg:"status"}],attrs:{icon:"arrow-up"},on:{click:function(t){return e.handleUpdateStatus(e.selectedRowKeys,!0)}}},[e._v("上架")]),a("a-button",{directives:[{name:"action",rawName:"v-action:status",arg:"status"}],attrs:{icon:"arrow-down"},on:{click:function(t){return e.handleUpdateStatus(e.selectedRowKeys,!1)}}},[e._v("下架")]),a("a-button",{directives:[{name:"action",rawName:"v-action:delete",arg:"delete"}],attrs:{icon:"delete"},on:{click:function(t){return e.handleDelete(e.selectedRowKeys)}}},[e._v("删除")])],1)],1):e._e()],1)],1),a("s-table",{ref:"table",attrs:{rowKey:"goods_id",loading:e.isLoading,columns:e.columns,data:e.loadData,rowSelection:e.rowSelection,pageSize:15},scopedSlots:e._u([{key:"goods_image",fn:function(e){return a("span",{},[a("a",{attrs:{title:"点击查看原图",href:e,target:"_blank"}},[a("img",{attrs:{width:"50",height:"50",src:e,alt:"商品图片"}})])])}},{key:"goods_name",fn:function(t){return a("span",{},[a("p",{staticClass:"twoline-hide",staticStyle:{width:"270px"}},[e._v(e._s(t))])])}},{key:"status",fn:function(t,r){return a("span",{},[a("a-tag",{staticClass:"cur-p",attrs:{color:10==t?"green":"red"},on:{click:function(a){return e.handleUpdateStatus([r.goods_id],10!=t)}}},[e._v(e._s(10==t?"上架":"下架"))])],1)}},{key:"action",fn:function(t,r){return a("div",{staticClass:"actions"},[a("router-link",{attrs:{to:{path:"/fragments/update",query:{goodsId:r.goods_id}}}},[e._v("编辑")]),a("a",{directives:[{name:"action",rawName:"v-action:delete",arg:"delete"}],on:{click:function(t){return e.handleDelete([r.goods_id])}}},[e._v("删除")])],1)}}])})],1)},i=[],o=(a("d3b7"),a("5530")),s=a("d084"),l=a("2af9"),n=a("8243"),u=[{title:"藏品ID",dataIndex:"goods_id"},{title:"藏品图片",dataIndex:"goods_image",scopedSlots:{customRender:"goods_image"}},{title:"藏品名称",dataIndex:"goods_name",scopedSlots:{customRender:"goods_name"}},{title:"藏品价格",dataIndex:"goods_price_min",scopedSlots:{customRender:"goods_price_min"}},{title:"总销量",dataIndex:"sales_actual"},{title:"库存总量",dataIndex:"stock_total"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"排序",dataIndex:"sort"},{title:"添加时间",dataIndex:"create_time"},{title:"操作",dataIndex:"action",width:"180px",scopedSlots:{customRender:"action"}}],c={name:"Index",components:{ContentHeader:l["a"],STable:l["c"]},data:function(){var e=this;return{searchForm:this.$form.createForm(this),categoryListTree:[],queryParam:{listType:"all"},isLoading:!1,columns:u,selectedRowKeys:[],loadData:function(t){return s["k"](Object(o["a"])(Object(o["a"])({},t),e.queryParam)).then((function(e){return e.data.list}))}}},created:function(){this.$route.query.listType&&(this.queryParam.listType=this.$route.query.listType),this.getCategoryList()},computed:{rowSelection:function(){return{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange}}},methods:{onSelectChange:function(e){this.selectedRowKeys=e},handleTabs:function(e){this.queryParam.listType=e.target.value,this.handleRefresh(!0)},handleSearch:function(e){var t=this;e.preventDefault(),this.searchForm.validateFields((function(e,a){e||(t.queryParam=Object(o["a"])(Object(o["a"])({},t.queryParam),a),t.handleRefresh(!0))}))},handleReset:function(){this.searchForm.resetFields()},getCategoryList:function(){var e=this;this.isLoading=!0,n["a"].getListFromScreen().then((function(t){e.categoryListTree=t})).finally((function(t){e.isLoading=!1}))},handleUpdateStatus:function(e){var t=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.$auth("/goods/index.status"))return!1;this.isLoading=!0,s["o"]({goodsIds:e,state:a}).then((function(e){t.$message.success(e.message,1.5),t.handleRefresh()})).finally((function(e){t.isLoading=!1}))},handleDelete:function(e){var t=this,a=this.$confirm({title:"您确定要删除该记录吗?",content:"删除后不可恢复",onOk:function(){return s["g"]({goodsIds:e}).then((function(e){t.$message.success(e.message,1.5),t.handleRefresh()})).finally((function(e){a.destroy()}))}})},handleCreate:function(){this.$router.push("/fragments/create")},handleRefresh:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.selectedRowKeys=[],this.$refs.table.refresh(e)}}},d=c,m=(a("c9ef"),a("2877")),p=Object(m["a"])(d,r,i,!1,null,"3ae938ee",null);t["default"]=p.exports},"2e1c":function(e,t,a){"use strict";a.d(t,"c",(function(){return o})),a.d(t,"e",(function(){return s})),a.d(t,"a",(function(){return l})),a.d(t,"f",(function(){return n})),a.d(t,"d",(function(){return u})),a.d(t,"b",(function(){return c}));var r=a("b775"),i={list:"/user.grade/list",all:"/user.grade/all",add:"/user.grade/add",edit:"/user.grade/edit",delete:"/user.grade/delete",back:"/Store/feedbackColl/all",grade:"/reward/add",gradeIndex:"/reward/list",deletedJl:"/reward/delete",rewEdit:"/reward/edit",getPl:"/goods/airdropList"};function o(e){return Object(r["b"])({url:i.getPl,method:"get",params:e})}function s(e){return Object(r["b"])({url:i.gradeIndex,method:"get",params:e})}function l(e){return Object(r["b"])({url:i.all,method:"get",params:e})}function n(e){return Object(r["b"])({url:i.rewEdit,method:"post",data:e})}function u(e){return Object(r["b"])({url:i.grade,method:"post",data:e})}function c(e){return Object(r["b"])({url:i.deletedJl,method:"post",data:e})}},3626:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),a("div",{staticClass:"table-operator"},[a("div",{staticClass:"row-item-tab clearfix"},[a("div",{staticClass:"tab-list fl-l"},[a("a-radio-group",{attrs:{defaultValue:e.queryParam.listType},on:{change:e.handleTabs}},[a("a-radio-button",{attrs:{value:"all"}},[e._v("全部")])],1)],1),e.$auth("/goods/create")?a("a-button",{staticClass:"fl-l",attrs:{type:"primary",icon:"plus"},on:{click:e.handleCreate}},[e._v("添加盲盒")]):e._e(),e.selectedRowKeys.length?a("div",{staticClass:"button-group"},[a("a-button-group",{staticClass:"ml-10"},[a("a-button",{directives:[{name:"action",rawName:"v-action:status",arg:"status"}],attrs:{icon:"arrow-up"},on:{click:function(t){return e.handleUpdateStatus(e.selectedRowKeys,!0)}}},[e._v("上架")]),a("a-button",{directives:[{name:"action",rawName:"v-action:status",arg:"status"}],attrs:{icon:"arrow-down"},on:{click:function(t){return e.handleUpdateStatus(e.selectedRowKeys,!1)}}},[e._v("下架")]),a("a-button",{directives:[{name:"action",rawName:"v-action:delete",arg:"delete"}],attrs:{icon:"delete"},on:{click:function(t){return e.handleDelete(e.selectedRowKeys)}}},[e._v("删除")])],1)],1):e._e()],1)]),a("s-table",{ref:"table",attrs:{rowKey:"goods_id",loading:e.isLoading,columns:e.columns,data:e.loadData,rowSelection:e.rowSelection,pageSize:15},scopedSlots:e._u([{key:"goods_image",fn:function(e){return a("span",{},[a("a",{attrs:{title:"点击查看原图",href:e,target:"_blank"}},[a("img",{attrs:{width:"50",height:"50",src:e,alt:"商品图片"}})])])}},{key:"goods_name",fn:function(t){return a("span",{},[a("p",{staticClass:"twoline-hide",staticStyle:{width:"180px"}},[e._v(e._s(t))])])}},{key:"probability",fn:function(t){return a("span",{},[a("p",{staticClass:"twoline-hide",staticStyle:{width:"120px"}},[e._v(e._s(t))])])}},{key:"type",fn:function(t){return a("span",{},[a("p",{staticClass:"twoline-hide",staticStyle:{width:"90px"}},[e._v(e._s(e.changeText(t)))])])}},{key:"status",fn:function(t,r){return a("span",{},[a("a-tag",{staticClass:"cur-p",attrs:{color:10==t?"green":"red"},on:{click:function(a){return e.handleUpdateStatus([r.goods_id],10!=t)}}},[e._v(e._s(10==t?"上架":"下架"))])],1)}},{key:"action",fn:function(t,r){return a("div",{staticClass:"actions"},[a("router-link",{attrs:{to:{path:"/blind/update",query:{goodsId:r.goods_id}}}},[e._v("编辑")]),a("a",{directives:[{name:"action",rawName:"v-action:delete",arg:"delete"}],on:{click:function(t){return e.handleDelete([r.goods_id])}}},[e._v("删除")])],1)}}])})],1)},i=[],o=(a("d3b7"),a("5530")),s=a("d084"),l=a("2af9"),n=a("8243"),u=[{title:"藏品ID",dataIndex:"goods_id"},{title:"藏品图片",dataIndex:"goods_image",scopedSlots:{customRender:"goods_image"}},{title:"藏品名称",dataIndex:"goods_name",scopedSlots:{customRender:"goods_name"}},{title:"盲盒几率",dataIndex:"probability",scopedSlots:{customRender:"probability"}},{title:"藏品类型",dataIndex:"type",scopedSlots:{customRender:"type"}},{title:"总销量",dataIndex:"sales_actual"},{title:"库存总量",dataIndex:"stock_total"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"排序",dataIndex:"sort"},{title:"添加时间",dataIndex:"create_time"},{title:"操作",dataIndex:"action",width:"180px",scopedSlots:{customRender:"action"}}],c={name:"Index",components:{ContentHeader:l["a"],STable:l["c"]},data:function(){var e=this;return{searchForm:this.$form.createForm(this),categoryListTree:[],queryParam:{listType:"all"},isLoading:!1,columns:u,selectedRowKeys:[],loadData:function(t){return s["d"](Object(o["a"])(Object(o["a"])({},t),e.queryParam)).then((function(e){return e.data.list}))}}},created:function(){this.$route.query.listType&&(this.queryParam.listType=this.$route.query.listType),this.getCategoryList()},computed:{rowSelection:function(){return{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange}},changeText:function(){return function(e){switch(e){case 0:return"普通藏品";case 1:return"碎片藏品";case 2:return"空投藏品";case 3:return"抽签藏品"}}}},methods:{onSelectChange:function(e){this.selectedRowKeys=e},handleTabs:function(e){this.queryParam.listType=e.target.value,this.handleRefresh(!0)},handleSearch:function(e){var t=this;e.preventDefault(),this.searchForm.validateFields((function(e,a){e||(t.queryParam=Object(o["a"])(Object(o["a"])({},t.queryParam),a),t.handleRefresh(!0))}))},handleReset:function(){this.searchForm.resetFields()},getCategoryList:function(){var e=this;this.isLoading=!0,n["a"].getListFromScreen().then((function(t){e.categoryListTree=t})).finally((function(t){e.isLoading=!1}))},handleUpdateStatus:function(e){var t=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.$auth("/goods/index.status"))return!1;this.isLoading=!0,s["e"]({goodsIds:e,state:a}).then((function(e){t.$message.success(e.message,1.5),t.handleRefresh()})).finally((function(e){t.isLoading=!1}))},handleDelete:function(e){var t=this,a=this.$confirm({title:"您确定要删除该记录吗?",content:"删除后不可恢复",onOk:function(){return s["g"]({goodsIds:e}).then((function(e){t.$message.success(e.message,1.5),t.handleRefresh()})).finally((function(e){a.destroy()}))}})},handleCreate:function(){this.$router.push("/blind/create")},handleRefresh:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.selectedRowKeys=[],this.$refs.table.refresh(e)}}},d=c,m=(a("1a12"),a("2877")),p=Object(m["a"])(d,r,i,!1,null,"15d07562",null);t["default"]=p.exports},3686:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),a("div",{staticClass:"table-operator"},[a("a-button",{directives:[{name:"action",rawName:"v-action:add",arg:"add"}],attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新增")])],1),e.isLoading?e._e():a("a-table",{attrs:{rowKey:"category_id",columns:e.columns,dataSource:e.categoryList,defaultExpandAllRows:!0,expandIconColumnIndex:1,pagination:!1,loading:e.isLoading},scopedSlots:e._u([{key:"status",fn:function(t){return a("span",{},[a("a-tag",{attrs:{color:t?"green":""}},[e._v(e._s(t?"显示":"隐藏"))])],1)}},{key:"action",fn:function(t,r){return a("span",{},[a("a",{directives:[{name:"action",rawName:"v-action:edit",arg:"edit"}],staticStyle:{"margin-right":"8px"},on:{click:function(t){return e.handleEdit(r)}}},[e._v("编辑")]),a("a",{directives:[{name:"action",rawName:"v-action:delete",arg:"delete"}],on:{click:function(t){return e.handleDelete(r)}}},[e._v("删除")])])}}],null,!1,1032135766)}),a("AddForm",{ref:"AddForm",attrs:{categoryList:e.categoryList},on:{handleSubmit:e.handleRefresh}}),a("EditForm",{ref:"EditForm",attrs:{categoryList:e.categoryList},on:{handleSubmit:e.handleRefresh}})],1)},i=[],o=(a("d3b7"),a("2f71")),s=a("2af9"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"新增商品分类",width:720,visible:e.visible,confirmLoading:e.confirmLoading,maskClosable:!1,destroyOnClose:!0},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"分类名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,min:2,message:"请输入至少2个字符"}]}],expression:"['name', {rules: [{required: true, min: 2, message: '请输入至少2个字符'}]}]"}]})],1),a("a-form-item",{attrs:{label:"上级分类",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["parent_id",{initialValue:0}],expression:"['parent_id', {initialValue: 0}]"}],attrs:{treeData:e.categoryListTree,dropdownStyle:{maxHeight:"400px",overflow:"auto"},allowClear:""}})],1),a("a-form-item",{attrs:{label:"分类图片",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("SelectImage",{directives:[{name:"decorator",rawName:"v-decorator",value:["image_id"],expression:"['image_id']"}]})],1),a("a-form-item",{attrs:{label:"状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"用户端是否展示"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:1,rules:[{required:!0}]}],expression:"['status', {initialValue: 1, rules: [{required: true}]}]"}]},[a("a-radio",{attrs:{value:1}},[e._v("显示")]),a("a-radio",{attrs:{value:0}},[e._v("隐藏")])],1)],1),a("a-form-item",{attrs:{label:"排序",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"数字越小越靠前"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:100,rules:[{required:!0,message:"请输入至少1个数字"}]}],expression:"['sort', {initialValue: 100, rules: [{required: true, message: '请输入至少1个数字'}]}]"}],attrs:{min:0}})],1)],1)],1)],1)},n=[],u=(a("99af"),a("8243")),c={components:{SelectImage:s["d"]},props:{categoryList:{type:Array,required:!0}},data:function(){return{title:"",labelCol:{span:7},wrapperCol:{span:13},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),categoryListTree:[]}},methods:{add:function(){this.visible=!0,this.getCategoryList()},getCategoryList:function(){var e=this.categoryList,t=u["a"].formatTreeData(e);this.categoryListTree=[{title:"顶级分类",key:0,value:0}].concat(t)},handleSubmit:function(e){var t=this;e.preventDefault();var a=this.form.validateFields;a((function(e,a){e||t.onFormSubmit(a)}))},handleCancel:function(){this.visible=!1,this.form.resetFields()},onFormSubmit:function(e){var t=this;this.confirmLoading=!0,o["a"]({form:e}).then((function(a){t.$message.success(a.message,1.5),t.handleCancel(),t.$emit("handleSubmit",e)})).finally((function(e){t.confirmLoading=!1}))}}},d=c,m=a("2877"),p=Object(m["a"])(d,l,n,!1,null,null,null),f=p.exports,h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"编辑商品分类",width:720,visible:e.visible,confirmLoading:e.confirmLoading,maskClosable:!1,destroyOnClose:!0},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"分类名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,min:2,message:"请输入至少2个字符"}]}],expression:"['name', {rules: [{required: true, min: 2, message: '请输入至少2个字符'}]}]"}]})],1),a("a-form-item",{attrs:{label:"上级分类",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["parent_id"],expression:"['parent_id']"}],attrs:{treeData:e.categoryListTree,dropdownStyle:{maxHeight:"400px",overflow:"auto"},allowClear:""}})],1),a("a-form-item",{attrs:{label:"分类图片",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("SelectImage",{directives:[{name:"decorator",rawName:"v-decorator",value:["image_id"],expression:"['image_id']"}],attrs:{defaultList:e.record.image?[e.record.image]:[]}})],1),a("a-form-item",{attrs:{label:"状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"用户端是否展示"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:1,rules:[{required:!0}]}],expression:"['status', { initialValue: 1, rules: [{ required: true }] }]"}]},[a("a-radio",{attrs:{value:1}},[e._v("显示")]),a("a-radio",{attrs:{value:0}},[e._v("隐藏")])],1)],1),a("a-form-item",{attrs:{label:"排序",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"数字越小越靠前"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:100,rules:[{required:!0,message:"请输入至少1个数字"}]}],expression:"['sort', {initialValue: 100, rules: [{required: true, message: '请输入至少1个数字'}]}]"}],attrs:{min:0}})],1)],1)],1)],1)},g=[],v=a("2ef0"),b=a.n(v),_={components:{SelectImage:s["d"]},props:{categoryList:{type:Array,required:!0}},data:function(){return{title:"",labelCol:{span:7},wrapperCol:{span:13},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),categoryListTree:[],record:{}}},methods:{edit:function(e){this.visible=!0,this.record=e,this.getCategoryList(),this.setFieldsValue()},setFieldsValue:function(){var e=this.record,t=this.form.setFieldsValue;this.$nextTick((function(){t(b.a.pick(e,["name","parent_id","image_id","status","sort"]))}))},getCategoryList:function(){var e=this.categoryList,t=u["a"].formatTreeData(e);this.categoryListTree=[{title:"顶级分类",key:0,value:0}].concat(t)},handleSubmit:function(e){var t=this;e.preventDefault();var a=this.form.validateFields;a((function(e,a){e||t.onFormSubmit(a)}))},handleCancel:function(){this.visible=!1,this.form.resetFields()},onFormSubmit:function(e){var t=this;this.confirmLoading=!0,o["d"]({categoryId:this.record["category_id"],form:e}).then((function(a){t.$message.success(a.message,1.5),t.handleCancel(),t.$emit("handleSubmit",e)})).finally((function(e){t.confirmLoading=!1}))}}},C=_,w=Object(m["a"])(C,h,g,!1,null,null,null),y=w.exports,S={name:"Index",components:{STable:s["c"],AddForm:f,EditForm:y},data:function(){return{categoryList:[],queryParam:{},isLoading:!1,columns:[{title:"分类ID",dataIndex:"category_id"},{title:"分类名称",dataIndex:"name"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"排序",dataIndex:"sort"},{title:"添加时间",dataIndex:"create_time"},{title:"操作",dataIndex:"action",width:"180px",scopedSlots:{customRender:"action"}}]}},created:function(){this.getCategoryList(!0)},methods:{getCategoryList:function(e){var t=this;e&&(this.isLoading=!0),o["e"]().then((function(e){t.categoryList=e.data.list})).finally((function(e){t.isLoading=!1}))},handleAdd:function(){this.$refs.AddForm.add()},handleEdit:function(e){this.$refs.EditForm.edit(e)},handleDelete:function(e){var t=this,a=this.$confirm({title:"您确定要删除该记录吗?",content:"删除后不可恢复",onOk:function(){return o["c"]({categoryId:e["category_id"]}).then((function(e){t.$message.success(e.message,1.5),t.handleRefresh()})).finally((function(e){a.destroy()}))}})},handleRefresh:function(){this.getCategoryList()}}},k=S,x=Object(m["a"])(k,r,i,!1,null,null,null);t["default"]=x.exports},"3af7":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-form-item",{attrs:{label:"商品规格",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form-item-help",staticStyle:{"line-height":"36px"}},[a("small",[e._v("最多添加3个商品规格组，生成的SKU数量不能超出50个")])]),e._l(e.multiSpecData.specList,(function(t,r){return a("div",{key:r,staticClass:"spec-group"},[a("div",{staticClass:"spec-group-item clearfix"},[a("a-input",{staticClass:"group-item-input",attrs:{readOnly:e.isSpecLocked,placeholder:"请输入规格名称"},on:{change:e.onChangeSpecGroupIpt},model:{value:t.spec_name,callback:function(a){e.$set(t,"spec_name",a)},expression:"item.spec_name"}}),e.isSpecLocked?e._e():a("a",{staticClass:"group-item-delete",attrs:{href:"javascript:;"},on:{click:function(t){return e.handleDeleteSpecGroup(r)}}},[e._v("删除规格组")])],1),a("div",{staticClass:"spec-value clearfix"},[e._l(t.valueList,(function(t,i){return a("div",{key:i,staticClass:"spec-value-item"},[a("a-input",{staticClass:"value-item-input",attrs:{readOnly:e.isSpecLocked,placeholder:"请输入规格值"},on:{change:e.onChangeSpecValueIpt},model:{value:t.spec_value,callback:function(a){e.$set(t,"spec_value",a)},expression:"itm.spec_value"}}),e.isSpecLocked?e._e():a("a-icon",{staticClass:"icon-close",attrs:{theme:"filled",type:"close-circle"},on:{click:function(t){return e.handleDeleteSpecValue(r,i)}}})],1)})),e.isSpecLocked?e._e():a("div",{staticClass:"spec-value-add"},[a("a",{staticClass:"group-item-delete",attrs:{href:"javascript:;"},on:{click:function(t){return e.handleAddSpecValue(r)}}},[e._v("新增规格值")])])],2)])})),!e.isSpecLocked&&e.multiSpecData.specList.length<3?a("a-button",{staticClass:"spec-group-add-btn",attrs:{icon:"plus"},on:{click:e.handleAddSpecGroup}},[e._v("添加规格组")]):e._e()],2),a("a-form-item",{directives:[{name:"show",rawName:"v-show",value:e.multiSpecData.skuList.length,expression:"multiSpecData.skuList.length"}],attrs:{label:"SKU列表",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e.multiSpecData.skuList.length>1?a("div",{staticClass:"sku-batch"},[a("span",{staticClass:"title"},[e._v("批量设置:")]),a("a-input-number",{attrs:{placeholder:"商品价格",min:.01,precision:2},model:{value:e.multiSpecData.skuBatchForm.goods_price,callback:function(t){e.$set(e.multiSpecData.skuBatchForm,"goods_price",t)},expression:"multiSpecData.skuBatchForm.goods_price"}}),a("a-input-number",{attrs:{placeholder:"划线价格",min:0,precision:2},model:{value:e.multiSpecData.skuBatchForm.line_price,callback:function(t){e.$set(e.multiSpecData.skuBatchForm,"line_price",t)},expression:"multiSpecData.skuBatchForm.line_price"}}),a("a-input-number",{attrs:{placeholder:"库存数量",min:0,precision:0},model:{value:e.multiSpecData.skuBatchForm.stock_num,callback:function(t){e.$set(e.multiSpecData.skuBatchForm,"stock_num",t)},expression:"multiSpecData.skuBatchForm.stock_num"}}),a("a-input-number",{attrs:{placeholder:"商品重量",min:0,precision:2},model:{value:e.multiSpecData.skuBatchForm.goods_weight,callback:function(t){e.$set(e.multiSpecData.skuBatchForm,"goods_weight",t)},expression:"multiSpecData.skuBatchForm.goods_weight"}}),a("a-input",{attrs:{placeholder:"sku编码"},model:{value:e.multiSpecData.skuBatchForm.goods_sku_no,callback:function(t){e.$set(e.multiSpecData.skuBatchForm,"goods_sku_no",t)},expression:"multiSpecData.skuBatchForm.goods_sku_no"}}),a("a-button",{on:{click:e.handleSkuBatch}},[e._v("立即设置")])],1):e._e(),a("a-table",{staticClass:"sku-list",attrs:{columns:e.multiSpecData.skuColumns,dataSource:e.multiSpecData.skuList,scroll:{x:!0},pagination:!1,bordered:""},scopedSlots:e._u([{key:"image",fn:function(t,r){return[a("SelectImage",{attrs:{defaultList:r.image_id>0&&r.image?[r.image]:[],width:50},model:{value:r.image_id,callback:function(t){e.$set(r,"image_id",t)},expression:"item.image_id"}})]}},{key:"goods_price",fn:function(t,r){return[a("a-input-number",{attrs:{size:"small",min:.01,precision:2},model:{value:r.goods_price,callback:function(t){e.$set(r,"goods_price",t)},expression:"item.goods_price"}})]}},{key:"line_price",fn:function(t,r){return[a("a-input-number",{attrs:{size:"small",min:0,precision:2},model:{value:r.line_price,callback:function(t){e.$set(r,"line_price",t)},expression:"item.line_price"}})]}},{key:"stock_num",fn:function(t,r){return[a("a-input-number",{attrs:{size:"small",min:0,precision:0},model:{value:r.stock_num,callback:function(t){e.$set(r,"stock_num",t)},expression:"item.stock_num"}})]}},{key:"goods_weight",fn:function(t,r){return[a("a-input-number",{attrs:{size:"small",min:0,precision:2},model:{value:r.goods_weight,callback:function(t){e.$set(r,"goods_weight",t)},expression:"item.goods_weight"}})]}},{key:"goods_sku_no",fn:function(t,r){return[a("a-input",{attrs:{size:"small"},model:{value:r.goods_sku_no,callback:function(t){e.$set(r,"goods_sku_no",t)},expression:"item.goods_sku_no"}})]}}])})],1)],1)},i=[],o=a("4d91"),s=a("9f60"),l=a("2af9"),n={components:{SelectImage:l["d"]},props:{defaultSpecList:o["a"].array.def([]),defaultSkuList:o["a"].array.def([]),isSpecLocked:o["a"].bool.def(!1)},data:function(){return{labelCol:{span:3},wrapperCol:{span:21},MultiSpecModel:new s["a"],multiSpecData:{specList:[],skuList:[]}}},watch:{defaultSpecList:function(e){e.length&&this.MultiSpecModel.isEmpty()&&this.getData()}},created:function(){this.getData()},methods:{getData:function(){var e=this.defaultSpecList,t=this.defaultSkuList;this.multiSpecData=this.MultiSpecModel.getData(e,t)},getFromSpecData:function(){return this.MultiSpecModel.getFromSpecData()},handleAddSpecGroup:function(){this.checkSkuMaxNum()&&this.MultiSpecModel.handleAddSpecGroup()},handleDeleteSpecGroup:function(e){var t=this,a=this.$confirm({title:"您确定要删除该规格组吗?",content:"删除后不可恢复",onOk:function(){t.MultiSpecModel.handleDeleteSpecGroup(e),a.destroy()}})},handleAddSpecValue:function(e){this.checkSkuMaxNum()&&this.MultiSpecModel.handleAddSpecValue(e)},handleDeleteSpecValue:function(e,t){var a=this,r=this.$confirm({title:"您确定要删除该规格值吗?",content:"删除后不可恢复",onOk:function(){a.MultiSpecModel.handleDeleteSpecValue(e,t),r.destroy()}})},onChangeSpecGroupIpt:function(){this.MultiSpecModel.onUpdate(!0)},onChangeSpecValueIpt:function(e,t){this.MultiSpecModel.onUpdate(!0)},checkSkuMaxNum:function(){var e=this.multiSpecData.skuList;return!(e.length>=50)||(this.$message.error("生成的sku列表数量不能大于50个，当前数量：".concat(e.length,"个"),2.5),!1)},handleSkuBatch:function(){this.MultiSpecModel.handleSkuBatch()},verifyForm:function(){return!!this.MultiSpecModel.verifyForm()||(this.$message.error(this.MultiSpecModel.getError(),2),!1)}}},u=n,c=(a("ad8e"),a("2877")),d=Object(c["a"])(u,r,i,!1,null,"6219611c",null);t["a"]=d.exports},"3bab":function(e,t,a){"use strict";a.d(t,"f",(function(){return o})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return l})),a.d(t,"d",(function(){return n})),a.d(t,"a",(function(){return u})),a.d(t,"g",(function(){return c})),a.d(t,"e",(function(){return d}));a("5530");var r=a("b775"),i={list:"/goods/list",listByIds:"/goods/listByIds",detail:"/goods/detail",basic:"/goods/basic",add:"/goods/add",addBlind:"/blind/add",edit:"/blind/edit",delete:"/blind/del",state:"/goods/state",blind:"/blind/list",blindState:"/goods/state",getSyn:"/goods/rareList",addImg:"/upload/image",alllist:"/goods/alllist",details:"/blind/detail"};function o(e){return Object(r["b"])({url:i.details,method:"get",params:e})}function s(e){return Object(r["b"])({url:i.alllist,method:"post",params:e})}function l(e){return Object(r["b"])({url:i.blind,method:"get",params:e})}function n(e){return Object(r["b"])({url:i.blindState,method:"post",data:e})}function u(e){return Object(r["b"])({url:i.addBlind,method:"post",data:e})}function c(e){return Object(r["b"])({url:i.edit,method:"post",data:e})}function d(e){return Object(r["b"])({url:i.delete,method:"post",data:e})}},"3c82":function(e,t,a){},"3f8d":function(e,t,a){},4072:function(e,t,a){},"470f":function(e,t,a){},"55b9":function(e,t,a){"use strict";var r=a("470f"),i=a.n(r);i.a},5803:function(e,t,a){},"584d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),a("a-spin",{attrs:{spinning:e.isLoading}},[a("a-form",{attrs:{form:e.form,selfUpdate:!0},on:{submit:e.handleSubmit}},[a("a-tabs",{attrs:{activeKey:e.tabKey,tabBarStyle:{marginBottom:"30px"}},on:{change:e.handleTabs}},[a("a-tab-pane",{key:0,attrs:{tab:"基本信息"}}),a("a-tab-pane",{key:1,attrs:{tab:"规格/库存"}}),a("a-tab-pane",{key:2,attrs:{tab:"商品详情"}})],1),a("div",{staticClass:"tabs-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.tabKey,expression:"tabKey == 0"}],staticClass:"tab-pane"},[a("a-form-item",{attrs:{label:"藏品名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goods_name",{rules:[{required:!0,min:2,message:"请输入至少2个字符"}]}],expression:"['goods_name', { rules: [{ required: true, min: 2, message: '请输入至少2个字符' }] }]"}],attrs:{placeholder:"请输入藏品名称"}})],1),a("a-form-item",{attrs:{label:"藏品图片",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"建议尺寸：750*750像素, 最多上传10张, 可拖拽图片调整顺序, 第1张将作为商品首图"}},[a("SelectImage",{directives:[{name:"decorator",rawName:"v-decorator",value:["imagesIds",{rules:[{required:!0,message:"请至少上传1张藏品图片"}]}],expression:"['imagesIds', { rules: [{ required: true, message: '请至少上传1张藏品图片' }] }]"}],attrs:{multiple:"",maxNum:10,defaultList:e.formData.goods.goods_images}})],1),a("a-form-item",{attrs:{label:"盲盒开奖几率",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input-number",{staticStyle:{width:"200px"},attrs:{min:1,max:100},model:{value:e.add,callback:function(t){e.add=t},expression:"add"}}),a("span",{staticClass:"ml-10"},[e._v("%")]),a("div",{staticClass:"form-item-help"},[a("p",{staticClass:"extra"},[e._v("注：概率请填写整数")])])],1),a("a-form-item",{attrs:{label:"藏品状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:10,rules:[{required:!0}]}],expression:"['status', {initialValue: 10, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:10}},[e._v("上架")]),a("a-radio",{attrs:{value:20}},[e._v("下架")])],1)],1),a("a-form-item",{attrs:{label:"是否上链",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["is_sl",{initialValue:0,rules:[{required:!0}]}],expression:"['is_sl', {initialValue: 0, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:0}},[e._v("上")]),a("a-radio",{attrs:{value:1}},[e._v("不上")])],1)],1),a("a-form-item",{attrs:{label:"藏品类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{initialValue:0,rules:[{required:!0}]}],expression:"['type', {initialValue: 0, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:0}},[e._v("普通藏品")]),a("a-radio",{attrs:{value:1}},[e._v("碎片藏品")])],1)],1),a("a-form-item",{attrs:{label:"藏品属性",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["is_box",{initialValue:0,rules:[{required:!0}]}],expression:"['is_box', {initialValue: 0, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:0}},[e._v("普通")]),a("a-radio",{attrs:{value:1}},[e._v("盲盒")])],1)],1),a("a-form-item",{attrs:{label:"藏品排序",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"数字越小越靠前"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:100,rules:[{required:!0}]}],expression:"['sort', {initialValue: 100, rules:[{ required: true }]}]"}],attrs:{min:0}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.tabKey,expression:"tabKey == 1"}],staticClass:"tab-pane"},[a("a-form-item",{attrs:{label:"规格类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["spec_type",{initialValue:10,rules:[{required:!0}]}],expression:"['spec_type', {initialValue: 10, rules: [{ required: true }]}]"}],on:{change:function(t){return e.onForceUpdate()}}},[a("a-radio",{attrs:{value:10}},[e._v("单规格")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:20==e.form.getFieldValue("spec_type"),expression:"form.getFieldValue('spec_type') == 20"}]},[a("MultiSpec",{ref:"MultiSpec",attrs:{defaultSpecList:e.formData.goods.specList,defaultSkuList:e.formData.goods.skuList}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:10==e.form.getFieldValue("spec_type"),expression:"form.getFieldValue('spec_type') == 10"}]},[a("a-form-item",{attrs:{label:"藏品价格",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"商品的实际购买金额，最低0.01"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["goods_price_min",{initialValue:1,rules:[{required:!0,message:"请输入藏品价格"}]}],expression:"['goods_price_min', { initialValue: 1, rules:[{ required: true, message: '请输入藏品价格' }] }]"}],attrs:{min:.01,precision:2}}),a("span",{staticClass:"ml-10"},[e._v("元")])],1),a("a-form-item",{attrs:{label:"当前库存数量",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"商品的实际库存数量，为0时用户无法下单"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["stock_num",{initialValue:100,rules:[{required:!0,message:"请输入库存数量"}]}],expression:"['stock_num', { initialValue: 100, rules:[{ required: true, message: '请输入库存数量' }] }]"}],attrs:{min:0,precision:0}}),a("span",{staticClass:"ml-10"},[e._v("件")])],1),a("a-form-item",{attrs:{label:"发行量",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["get_total",{initialValue:0,rules:[{required:!0,message:"请输入发行量"}]}],expression:"['get_total', { initialValue: 0, rules:[{ required: true, message: '请输入发行量' }] }]"}],attrs:{min:0,precision:0}}),a("span",{staticClass:"ml-10"},[e._v("件")])],1)],1),a("a-form-item",{attrs:{label:"库存计算方式",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["deduct_stock_type",{initialValue:10,rules:[{required:!0}]}],expression:"['deduct_stock_type', {initialValue: 10, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:10}},[e._v("下单减库存")]),a("a-radio",{attrs:{value:20}},[e._v("付款减库存")])],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.tabKey,expression:"tabKey == 2"}],staticClass:"tab-pane"},[a("a-form-item",{attrs:{label:"藏品详情",labelCol:e.labelCol,wrapperCol:{span:16}}},[a("Ueditor",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{rules:[{required:!0,message:"藏品详情不能为空"}]}],expression:"['content', {rules: [{required: true, message: '藏品详情不能为空'}]}]"}]})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:3==e.tabKey,expression:"tabKey == 3"}],staticClass:"tab-pane"},[a("a-divider",{attrs:{orientation:"left"}},[e._v("积分设置")]),a("a-form-item",{attrs:{label:"积分赠送",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"开启后用户购买此商品将获得积分"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["is_points_gift",{initialValue:1,rules:[{required:!0}]}],expression:"['is_points_gift', {initialValue: 1, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:1}},[e._v("开启")]),a("a-radio",{attrs:{value:0}},[e._v("关闭")])],1)],1)],1)]),a("a-form-item",{staticClass:"mt-20",attrs:{"wrapper-col":{span:e.wrapperCol.span,offset:e.labelCol.span}}},[a("a-button",{attrs:{type:"primary","html-type":"submit",loading:e.isBtnLoading}},[e._v("提交")])],1)],1)],1)],1)},i=[],o=(a("c975"),a("b64b"),a("d3b7"),a("d084")),s=a("2af9"),l=a("e1fe"),n=a("964c"),u=a("ca00"),c=(a("c1df"),{components:{SelectImage:s["d"],SelectVideo:s["e"],Ueditor:s["f"],InputNumberGroup:s["b"],MultiSpec:n["a"]},data:function(){return{tabKey:0,labelCol:{span:3},wrapperCol:{span:10},isLoading:!1,overTime:null,isBtnLoading:!1,add:"",form:this.$form.createForm(this),goodsId:null,formData:l["a"].formData}},created:function(){this.initData()},beforeDestroy:function(){l["a"].formData.goods={}},methods:{initData:function(){var e=this;this.goodsId=this.$route.query.goodsId,this.isLoading=!0,l["a"].getFromData(this.goodsId).then((function(){Object(u["f"])(e.form.getFieldsValue())||e.form.setFieldsValue(l["a"].getFieldsValue()),e.isLoading=!1,e.add=e.formData.goods.probability}))},onForceUpdate:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$forceUpdate(),t&&setTimeout((function(){e.$forceUpdate()}),10)},handleTabs:function(e){this.tabKey=e},onReloadCategoryList:function(){var e=this;this.isLoading=!0,l["a"].getCategoryList().then((function(){e.isLoading=!1}))},onReloadServiceList:function(){var e=this;this.isLoading=!0,l["a"].getServiceList().then((function(){e.isLoading=!1}))},onReloadDeliveryList:function(){var e=this;this.isLoading=!0,l["a"].getDeliveryList().then((function(){e.isLoading=!1}))},handleSubmit:function(e){var t=this;e.preventDefault();var a=this.form.validateFields;a((function(e,a){if(e)return t.onTargetTabError(e),!1;if(20===a.spec_type){var r=t.$refs.MultiSpec;if(!r.verifyForm())return t.tabKey=1,!1;a.specData=r.getFromSpecData()}return a.probability=t.add,a.categorys=[10001],a.categoryIds=[10001],a.is_enable_grade=0,a.goods_weight=0,a.spec_type=10,a.is_points_gift=1,a.delivery_id=10001,a.is_points_discount=1,a.serviceIds=[10001,10003],a.goods_price=0,t.onFormSubmit(a),!0}))},onTargetTabError:function(e){var t=[["goods_name","categorys","imagesIds","delivery_id"],["spec_type","goods_price_min"],["content"],["alone_grade_equity","first_money","second_money","third_money"]],a=Object.keys(e).shift();for(var r in t)if(t[r].indexOf(a)>-1){this.tabKey=parseInt(r);break}},onFormSubmit:function(e){var t=this;this.isLoading=!0,this.isBtnLoading=!0,o["i"]({goodsId:this.goodsId,form:e}).then((function(e){t.$message.success(e.message,1.5),setTimeout((function(){t.$router.push("./index")}),1500)})).catch((function(){t.isBtnLoading=!1})).finally((function(){t.isLoading=!1}))}}}),d=c,m=(a("05a2"),a("2877")),p=Object(m["a"])(d,r,i,!1,null,"797dbd8f",null);t["default"]=p.exports},"673d":function(e,t,a){"use strict";var r=a("aac3"),i=a.n(r);i.a},"6e67":function(e,t,a){"use strict";var r=a("3c82"),i=a.n(r);i.a},7190:function(e,t,a){},7608:function(e,t,a){"use strict";var r=a("8e5d"),i=a.n(r);i.a},"77b7":function(e,t,a){"use strict";var r=a("8904"),i=a.n(r);i.a},"783c":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),a("a-spin",{attrs:{spinning:e.isLoading}},[a("a-form",{attrs:{form:e.form,selfUpdate:!0},on:{submit:e.handleSubmit}},[a("a-tabs",{attrs:{activeKey:e.tabKey,tabBarStyle:{marginBottom:"30px"}},on:{change:e.handleTabs}},[a("a-tab-pane",{key:0,attrs:{tab:"基本信息"}}),a("a-tab-pane",{key:1,attrs:{tab:"规格/库存"}}),a("a-tab-pane",{key:2,attrs:{tab:"盲盒详情"}})],1),a("div",{staticClass:"tabs-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.tabKey,expression:"tabKey == 0"}],staticClass:"tab-pane"},[a("a-form-item",{attrs:{label:"盲盒标题",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["blind_name",{rules:[{required:!0,min:2,message:"请输入至少2个字符"}]}],expression:"['blind_name', {rules: [{required: true, min: 2, message: '请输入至少2个字符'}]}]"}],attrs:{placeholder:"请输入盲盒标题"}})],1),a("a-form-item",{attrs:{label:"盲盒价格",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"盲盒的实际购买金额，最低0.01"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["price",{initialValue:1,rules:[{required:!0,message:"请输入盲盒价格"}]}],expression:"['price', { initialValue: 1, rules: [{ required: true, message: '请输入盲盒价格' }] }]"}],attrs:{min:.01,precision:2}}),a("span",{staticClass:"ml-10"},[e._v("元")])],1),a("a-form-item",{attrs:{label:"盲盒图片",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"建议尺寸：750*750像素, 最多上传10张, 可拖拽图片调整顺序, 第1张将作为商品首图"}},[a("SelectImage",{directives:[{name:"decorator",rawName:"v-decorator",value:["thumb",{rules:[{required:!0,message:"请至少上传1张商品图片"}]}],expression:"['thumb', {rules: [{required: true, message: '请至少上传1张商品图片'}]}]"}],attrs:{multiple:"",maxNum:10}})],1),a("a-form-item",{attrs:{label:"开售时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"请输入日期"},on:{change:e.changeStartTime},model:{value:e.starttime,callback:function(t){e.starttime=t},expression:"starttime"}})],1),a("a-form-item",{attrs:{label:"结束时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"请输入日期"},on:{change:e.changeEndTime},model:{value:e.endtime,callback:function(t){e.endtime=t},expression:"endtime"}})],1),a("a-form-item",{attrs:{label:"选择盲盒商品",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[0!=e.shopArr.length?a("a-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary"},on:{click:e.change}},[e._v("选择商品")]):e._e()],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.tabKey,expression:"tabKey == 1"}],staticClass:"tab-pane"},[a("a-form-item",{attrs:{label:"规格类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["spec_type",{initialValue:10,rules:[{required:!0}]}],expression:"['spec_type', { initialValue: 10, rules: [{ required: true }] }]"}],on:{change:function(t){return e.onForceUpdate()}}},[a("a-radio",{attrs:{value:10}},[e._v("单规格")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:20==e.form.getFieldValue("spec_type"),expression:"form.getFieldValue('spec_type') == 20"}]},[a("MultiSpec",{ref:"MultiSpec"})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:10==e.form.getFieldValue("spec_type"),expression:"form.getFieldValue('spec_type') == 10"}]},[a("a-form-item",{attrs:{label:"当前库存数量",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"盲盒的实际库存数量，为0时用户无法下单"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["total",{initialValue:100,rules:[{required:!0,message:"请输入库存数量"}]}],expression:"['total', { initialValue: 100, rules:[{ required: true, message: '请输入库存数量' }] }]"}],attrs:{min:0,precision:0}}),a("span",{staticClass:"ml-10"},[e._v("件")])],1),a("a-form-item",{attrs:{label:"限购数量",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"商品的每人限购数量，为0时用户无法下单"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["get_limit",{initialValue:1,rules:[{required:!0,message:"请输入限购数量"}]}],expression:"['get_limit', { initialValue: 1, rules:[{ required: true, message: '请输入限购数量' }] }]"}],attrs:{min:0,precision:0}}),a("span",{staticClass:"ml-10"},[e._v("件")])],1),a("a-form-item",{attrs:{label:"发行量",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["get_total",{initialValue:1,rules:[{required:!0,message:"请输入发行量"}]}],expression:"['get_total', { initialValue: 1, rules:[{ required: true, message: '请输入发行量' }] }]"}],attrs:{min:0,precision:0}}),a("span",{staticClass:"ml-10"},[e._v("件")])],1)],1),a("a-form-item",{attrs:{label:"库存计算方式",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["deduct_stock_type",{initialValue:10,rules:[{required:!0}]}],expression:"['deduct_stock_type', {initialValue: 10, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:10}},[e._v("下单减库存")]),a("a-radio",{attrs:{value:20}},[e._v("付款减库存")])],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.tabKey,expression:"tabKey == 2"}],staticClass:"tab-pane"},[a("a-form-item",{attrs:{label:"盲盒详情",labelCol:e.labelCol,wrapperCol:{span:16}}},[a("Ueditor",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{rules:[{required:!0,message:"盲盒详情不能为空"}]}],expression:"['content', { rules: [{ required: true, message: '盲盒详情不能为空' }] }]"}]})],1)],1)]),a("a-form-item",{staticClass:"mt-20",attrs:{"wrapper-col":{span:e.wrapperCol.span,offset:e.labelCol.span}}},[a("a-button",{attrs:{type:"primary","html-type":"submit",loading:e.isBtnLoading}},[e._v("提交")])],1)],1)],1),a("EditForm",{ref:"EditForm",attrs:{categoryList:e.shopArr},on:{result:e.newResult,handleSubmit:e.handleRefresh}})],1)},i=[],o=(a("4160"),a("c975"),a("a15b"),a("b64b"),a("d3b7"),a("159b"),a("d6af")),s=a("3bab"),l=a("c1df"),n=a.n(l),u=a("2af9"),c=a("e1fe"),d=a("3af7"),m={components:{EditForm:o["a"],SelectImage:u["d"],SelectVideo:u["e"],Ueditor:u["f"],InputNumberGroup:u["b"],MultiSpec:d["a"]},data:function(){return{tabKey:0,starttime:null,endtime:null,overTime:null,labelCol:{span:3},wrapperCol:{span:10},isLoading:!1,type:"time",isBtnLoading:!1,add:"",form:this.$form.createForm(this),formData:c["a"].formData,shopArr:[],arr:[]}},created:function(){var e=this;this.isLoading=!0,c["a"].getFromData().then((function(){e.isLoading=!1})),s["b"]({is_box:1}).then((function(t){t.data.list.forEach((function(e){e.show=!1})),e.shopArr=t.data.list}))},methods:{changeStartTime:function(e){var t=n()(e).format("YYYY-MM-DD HH:mm:ss");this.starttime=t},changeEndTime:function(e){var t=n()(e).format("YYYY-MM-DD HH:mm:ss");this.endtime=t},handleRefresh:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.onForceUpdate()},newResult:function(e){this.arr=e},change:function(){this.$refs.EditForm.edit(this.shopArr)},onForceUpdate:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$forceUpdate(),t&&setTimeout((function(){e.$forceUpdate()}),10)},handleTabs:function(e){this.tabKey=e},onReloadCategoryList:function(){var e=this;this.isLoading=!0,c["a"].getCategoryList().then((function(){e.isLoading=!1}))},onReloadServiceList:function(){var e=this;this.isLoading=!0,c["a"].getServiceList().then((function(){e.isLoading=!1}))},onReloadDeliveryList:function(){var e=this;this.isLoading=!0,c["a"].getDeliveryList().then((function(){e.isLoading=!1}))},handleSubmit:function(e){var t=this;e.preventDefault();var a=this.form.validateFields;a((function(e,a){if(e)return t.onTargetTabError(e),!1;if(null==t.starttime)return t.$message.error("请选择开售时间",1.5);if(null==t.endtime)return t.$message.error("请选择结束时间",1.5);if(20===a.spec_type){var r=t.$refs.MultiSpec;if(!r.verifyForm())return t.tabKey=1,!1;a.specData=r.getFromSpecData()}a.starttime=t.starttime?t.starttime:null,a.endtime=t.endtime?t.endtime:null;var i=[];return t.arr.forEach((function(e,t){i.push(e.goods_id)})),a.goods_ids=i.join(","),t.onFormSubmit(a),!0}))},onTargetTabError:function(e){var t=[["blind_name","thumb","total","price","goods_ids"],["spec_type"],["content"]],a=Object.keys(e).shift();for(var r in t)if(t[r].indexOf(a)>-1){this.tabKey=parseInt(r);break}},onFormSubmit:function(e){var t=this;this.isLoading=!0,this.isBtnLoading=!0,s["a"]({data:e}).then((function(e){t.$message.success(e.message,1.5),setTimeout((function(){t.$router.push("./index")}),1500)})).catch((function(){t.isBtnLoading=!1})).finally((function(){t.isLoading=!1}))}}},p=m,f=(a("078d"),a("2877")),h=Object(f["a"])(p,r,i,!1,null,"7fcd0ac5",null);t["default"]=h.exports},"7a0e":function(e,t,a){},8399:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),a("a-spin",{attrs:{spinning:e.isLoading}},[a("a-form",{attrs:{form:e.form,selfUpdate:!0},on:{submit:e.handleSubmit}},[a("a-tabs",{attrs:{activeKey:e.tabKey,tabBarStyle:{marginBottom:"30px"}},on:{change:e.handleTabs}},[a("a-tab-pane",{key:0,attrs:{tab:"基本信息"}}),a("a-tab-pane",{key:1,attrs:{tab:"规格/库存"}}),a("a-tab-pane",{key:2,attrs:{tab:"商品详情"}})],1),a("div",{staticClass:"tabs-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.tabKey,expression:"tabKey == 0"}],staticClass:"tab-pane"},[a("a-form-item",{attrs:{label:"藏品名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goods_name",{rules:[{required:!0,min:2,message:"请输入至少2个字符"}]}],expression:"['goods_name', { rules: [{ required: true, min: 2, message: '请输入至少2个字符' }] }]"}],attrs:{placeholder:"请输入藏品名称"}})],1),a("a-form-item",{attrs:{label:"藏品分类",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["categorys",{rules:[{required:!0,message:"请至少选择1个商品分类"}]}],expression:"['categorys', { rules: [{required: true, message: '请至少选择1个商品分类'}]}]"}],attrs:{placeholder:"请选择藏品分类",dropdownStyle:{maxHeight:"500px",overflow:"auto"},treeData:e.formData.categoryList,treeCheckable:"",treeCheckStrictly:"",allowClear:""}}),a("div",{staticClass:"form-item-help"},[a("router-link",{attrs:{target:"_blank",to:{path:"/fragments/category/index"}}},[e._v("去新增")]),a("a",{attrs:{href:"javascript:;"},on:{click:e.onReloadCategoryList}},[e._v("刷新")])],1)],1),a("a-form-item",{attrs:{label:"合成所需碎片",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["debLists",{rules:[{required:!0,message:"请至少选择1个碎片"}]}],expression:"['debLists', {rules: [{required: true, message: '请至少选择1个碎片'}]}]"}],attrs:{placeholder:"请选择碎片",dropdownStyle:{maxHeight:"500px",overflow:"auto"},treeData:e.formData.debList,treeCheckable:"",treeCheckStrictly:"",allowClear:""}})],1),a("a-form-item",{attrs:{label:"藏品图片",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"建议尺寸：750*750像素, 最多上传10张, 可拖拽图片调整顺序, 第1张将作为商品首图"}},[a("SelectImage",{directives:[{name:"decorator",rawName:"v-decorator",value:["imagesIds",{rules:[{required:!0,message:"请至少上传1张藏品图片"}]}],expression:"['imagesIds', { rules: [{ required: true, message: '请至少上传1张藏品图片' }] }]"}],attrs:{multiple:"",maxNum:10,defaultList:e.formData.goods.goods_images}})],1),a("a-form-item",{attrs:{label:"藏品状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:10,rules:[{required:!0}]}],expression:"['status', {initialValue: 10, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:10}},[e._v("上架")]),a("a-radio",{attrs:{value:20}},[e._v("下架")])],1)],1),a("a-form-item",{attrs:{label:"藏品类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{initialValue:0,rules:[{required:!0}]}],expression:"['type', {initialValue: 0, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:0}},[e._v("普通藏品")]),a("a-radio",{attrs:{value:1}},[e._v("碎片藏品")])],1)],1),a("a-form-item",{attrs:{label:"合约地址",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{attrs:{placeholder:"请输入合约地址"},model:{value:e.goods_address,callback:function(t){e.goods_address=t},expression:"goods_address"}})],1),a("a-form-item",{attrs:{label:"链上标识",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{attrs:{placeholder:"请输入链上标识"},model:{value:e.logo,callback:function(t){e.logo=t},expression:"logo"}})],1),a("a-form-item",{attrs:{label:"开售时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"请输入日期"},on:{change:e.changeTime},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}})],1),a("a-form-item",{attrs:{label:"藏品排序",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"数字越小越靠前"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:100,rules:[{required:!0}]}],expression:"['sort', {initialValue: 100, rules:[{ required: true }]}]"}],attrs:{min:0}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.tabKey,expression:"tabKey == 1"}],staticClass:"tab-pane"},[a("a-form-item",{attrs:{label:"规格类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["spec_type",{initialValue:10,rules:[{required:!0}]}],expression:"['spec_type', {initialValue: 10, rules: [{ required: true }]}]"}],on:{change:function(t){return e.onForceUpdate()}}},[a("a-radio",{attrs:{value:10}},[e._v("单规格")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:20==e.form.getFieldValue("spec_type"),expression:"form.getFieldValue('spec_type') == 20"}]},[a("MultiSpec",{ref:"MultiSpec",attrs:{defaultSpecList:e.formData.goods.specList,defaultSkuList:e.formData.goods.skuList}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:10==e.form.getFieldValue("spec_type"),expression:"form.getFieldValue('spec_type') == 10"}]},[a("a-form-item",{attrs:{label:"藏品价格",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"商品的实际购买金额，最低0.01"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["goods_price",{rules:[{required:!0,message:"请输入藏品价格"}]}],expression:"['goods_price', { rules:[{ required: true, message: '请输入藏品价格' }] }]"}],attrs:{min:.01,precision:2}}),a("span",{staticClass:"ml-10"},[e._v("元")])],1),a("a-form-item",{attrs:{label:"作者",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{attrs:{precision:2},model:{value:e.author,callback:function(t){e.author=t},expression:"author"}})],1),a("a-form-item",{attrs:{label:"当前库存数量",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"商品的实际库存数量，为0时用户无法下单"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["stock_num",{initialValue:100,rules:[{required:!0,message:"请输入库存数量"}]}],expression:"['stock_num', { initialValue: 100, rules:[{ required: true, message: '请输入库存数量' }] }]"}],attrs:{min:0,precision:0}}),a("span",{staticClass:"ml-10"},[e._v("件")])],1)],1),a("a-form-item",{attrs:{label:"库存计算方式",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["deduct_stock_type",{initialValue:10,rules:[{required:!0}]}],expression:"['deduct_stock_type', {initialValue: 10, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:10}},[e._v("下单减库存")]),a("a-radio",{attrs:{value:20}},[e._v("付款减库存")])],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.tabKey,expression:"tabKey == 2"}],staticClass:"tab-pane"},[a("a-form-item",{attrs:{label:"藏品详情",labelCol:e.labelCol,wrapperCol:{span:16}}},[a("Ueditor",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{rules:[{required:!0,message:"藏品详情不能为空"}]}],expression:"['content', {rules: [{required: true, message: '藏品详情不能为空'}]}]"}]})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:3==e.tabKey,expression:"tabKey == 3"}],staticClass:"tab-pane"},[a("a-form-model-item",{attrs:{label:"文件选择"}},[a("a-upload",{attrs:{"before-upload":e.beforeUpload,remove:e.handleRemove,multiple:!1,"file-list":e.fileList}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),e._v(" 上传glb格式图片,限制一张 ")],1)],1)],1),""!=e.file_path?a("a-form-item",[a("a-button",[e._v(" 已上传 ")])],1):e._e()],1)]),a("a-form-item",{staticClass:"mt-20",attrs:{"wrapper-col":{span:e.wrapperCol.span,offset:e.labelCol.span}}},[a("a-button",{attrs:{type:"primary","html-type":"submit",loading:e.isBtnLoading}},[e._v("提交")])],1)],1)],1)],1)},i=[],o=(a("c975"),a("d81d"),a("fb6a"),a("a434"),a("b64b"),a("d3b7"),a("d084")),s=a("c1df"),l=a.n(s),n=a("2af9"),u=a("e1fe"),c=a("0bf2"),d=a("ca00"),m={components:{SelectImage:n["d"],SelectVideo:n["e"],Ueditor:n["f"],InputNumberGroup:n["b"],MultiSpec:c["a"]},data:function(){return{tabKey:0,labelCol:{span:3},wrapperCol:{span:10},goods_address:"",logo:"",isLoading:!1,startTime:null,overTime:null,isBtnLoading:!1,author:"",form:this.$form.createForm(this),goodsId:null,formData:u["a"].formData,fileList:[],uploading:[],file_path:"",shopArr:"",arr:[]}},created:function(){this.initData()},beforeDestroy:function(){u["a"].formData.goods={}},methods:{initData:function(){var e=this;this.goodsId=this.$route.query.goodsId,this.isLoading=!0,u["a"].getFromData(this.goodsId).then((function(t){Object(d["f"])(e.form.getFieldsValue())||e.form.setFieldsValue(u["a"].getFieldsValue()),e.isLoading=!1,e.startTime=e.formData.goods.startTime,e.author=e.formData.goods.author,e.goods_address=e.formData.goods.goods_address,e.logo=e.formData.goods.logo,e.file_path=e.formData.file_path}))},changeTime:function(e){var t=l()(e).format("YYYY-MM-DD HH:mm:ss");this.startTime=t},onForceUpdate:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$forceUpdate(),t&&setTimeout((function(){e.$forceUpdate()}),10)},handleTabs:function(e){this.tabKey=e},onReloadCategoryList:function(){var e=this;this.isLoading=!0,u["a"].getCategoryList().then((function(){e.isLoading=!1}))},onReloadServiceList:function(){var e=this;this.isLoading=!0,u["a"].getServiceList().then((function(){e.isLoading=!1}))},onReloadDeliveryList:function(){var e=this;this.isLoading=!0,u["a"].getDeliveryList().then((function(){e.isLoading=!1}))},beforeUpload:function(e){var t=this;this.fileList=[e],this.isLoading=!0,this.uploading.push(!0);var a=new FormData;a.append("iFile",e),o["c"](a).then((function(e){t.file_path=e.data.fileInfo.file_path})).finally((function(e){t.uploading.pop(),0===t.uploading.length&&(t.isLoading=!1)}))},handleRemove:function(e){var t=this.fileList.indexOf(e),a=this.fileList.slice();a.splice(t,1),this.fileList=a},handleSubmit:function(e){var t=this;e.preventDefault();var a=this.form.validateFields;if(null==this.startTime)return this.$message.error("请选择开售时间",1.5);a((function(e,a){if(e)return t.onTargetTabError(e),!1;if(20===a.spec_type){var r=t.$refs.MultiSpec;if(!r.verifyForm())return t.tabKey=1,!1;a.specData=r.getFromSpecData()}return a.categoryIds=a.categorys.map((function(e){return e.value})),delete a.categorys,a.debrisIds=a.debLists.map((function(e){return e.value})),delete a.debLists,a.is_enable_grade=0,a.goods_weight=0,a.spec_type=10,a.is_points_gift=1,a.delivery_id=10001,a.is_points_discount=1,a.serviceIds=[10001,10003],a.startTime=t.startTime,a.author=t.author,a.goods_address=t.goods_address,a.logo=t.logo,a.file_path=t.file_path,t.onFormSubmit(a),!0}))},onTargetTabError:function(e){var t=[["goods_name","categorys","imagesIds","delivery_id"],["spec_type","goods_price"],["content"],["alone_grade_equity","first_money","second_money","third_money"]],a=Object.keys(e).shift();for(var r in t)if(t[r].indexOf(a)>-1){this.tabKey=parseInt(r);break}},onFormSubmit:function(e){var t=this;this.isLoading=!0,this.isBtnLoading=!0,o["i"]({goodsId:this.goodsId,form:e}).then((function(e){t.$message.success(e.message,1.5),setTimeout((function(){t.$router.push("./index")}),1500)})).catch((function(){t.isBtnLoading=!1})).finally((function(){t.isLoading=!1}))}}},p=m,f=(a("c4cb"),a("2877")),h=Object(f["a"])(p,r,i,!1,null,"53f8a350",null);t["default"]=h.exports},8430:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-form-item",{attrs:{label:"商品规格",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form-item-help",staticStyle:{"line-height":"36px"}},[a("small",[e._v("最多添加3个商品规格组，生成的SKU数量不能超出50个")])]),e._l(e.multiSpecData.specList,(function(t,r){return a("div",{key:r,staticClass:"spec-group"},[a("div",{staticClass:"spec-group-item clearfix"},[a("a-input",{staticClass:"group-item-input",attrs:{readOnly:e.isSpecLocked,placeholder:"请输入规格名称"},on:{change:e.onChangeSpecGroupIpt},model:{value:t.spec_name,callback:function(a){e.$set(t,"spec_name",a)},expression:"item.spec_name"}}),e.isSpecLocked?e._e():a("a",{staticClass:"group-item-delete",attrs:{href:"javascript:;"},on:{click:function(t){return e.handleDeleteSpecGroup(r)}}},[e._v("删除规格组")])],1),a("div",{staticClass:"spec-value clearfix"},[e._l(t.valueList,(function(t,i){return a("div",{key:i,staticClass:"spec-value-item"},[a("a-input",{staticClass:"value-item-input",attrs:{readOnly:e.isSpecLocked,placeholder:"请输入规格值"},on:{change:e.onChangeSpecValueIpt},model:{value:t.spec_value,callback:function(a){e.$set(t,"spec_value",a)},expression:"itm.spec_value"}}),e.isSpecLocked?e._e():a("a-icon",{staticClass:"icon-close",attrs:{theme:"filled",type:"close-circle"},on:{click:function(t){return e.handleDeleteSpecValue(r,i)}}})],1)})),e.isSpecLocked?e._e():a("div",{staticClass:"spec-value-add"},[a("a",{staticClass:"group-item-delete",attrs:{href:"javascript:;"},on:{click:function(t){return e.handleAddSpecValue(r)}}},[e._v("新增规格值")])])],2)])})),!e.isSpecLocked&&e.multiSpecData.specList.length<3?a("a-button",{staticClass:"spec-group-add-btn",attrs:{icon:"plus"},on:{click:e.handleAddSpecGroup}},[e._v("添加规格组")]):e._e()],2),a("a-form-item",{directives:[{name:"show",rawName:"v-show",value:e.multiSpecData.skuList.length,expression:"multiSpecData.skuList.length"}],attrs:{label:"SKU列表",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e.multiSpecData.skuList.length>1?a("div",{staticClass:"sku-batch"},[a("span",{staticClass:"title"},[e._v("批量设置:")]),a("a-input-number",{attrs:{placeholder:"商品价格",min:.01,precision:2},model:{value:e.multiSpecData.skuBatchForm.goods_price,callback:function(t){e.$set(e.multiSpecData.skuBatchForm,"goods_price",t)},expression:"multiSpecData.skuBatchForm.goods_price"}}),a("a-input-number",{attrs:{placeholder:"划线价格",min:0,precision:2},model:{value:e.multiSpecData.skuBatchForm.line_price,callback:function(t){e.$set(e.multiSpecData.skuBatchForm,"line_price",t)},expression:"multiSpecData.skuBatchForm.line_price"}}),a("a-input-number",{attrs:{placeholder:"库存数量",min:0,precision:0},model:{value:e.multiSpecData.skuBatchForm.stock_num,callback:function(t){e.$set(e.multiSpecData.skuBatchForm,"stock_num",t)},expression:"multiSpecData.skuBatchForm.stock_num"}}),a("a-input-number",{attrs:{placeholder:"商品重量",min:0,precision:2},model:{value:e.multiSpecData.skuBatchForm.goods_weight,callback:function(t){e.$set(e.multiSpecData.skuBatchForm,"goods_weight",t)},expression:"multiSpecData.skuBatchForm.goods_weight"}}),a("a-input",{attrs:{placeholder:"sku编码"},model:{value:e.multiSpecData.skuBatchForm.goods_sku_no,callback:function(t){e.$set(e.multiSpecData.skuBatchForm,"goods_sku_no",t)},expression:"multiSpecData.skuBatchForm.goods_sku_no"}}),a("a-button",{on:{click:e.handleSkuBatch}},[e._v("立即设置")])],1):e._e(),a("a-table",{staticClass:"sku-list",attrs:{columns:e.multiSpecData.skuColumns,dataSource:e.multiSpecData.skuList,scroll:{x:!0},pagination:!1,bordered:""},scopedSlots:e._u([{key:"image",fn:function(t,r){return[a("SelectImage",{attrs:{defaultList:r.image_id>0&&r.image?[r.image]:[],width:50},model:{value:r.image_id,callback:function(t){e.$set(r,"image_id",t)},expression:"item.image_id"}})]}},{key:"goods_price",fn:function(t,r){return[a("a-input-number",{attrs:{size:"small",min:.01,precision:2},model:{value:r.goods_price,callback:function(t){e.$set(r,"goods_price",t)},expression:"item.goods_price"}})]}},{key:"line_price",fn:function(t,r){return[a("a-input-number",{attrs:{size:"small",min:0,precision:2},model:{value:r.line_price,callback:function(t){e.$set(r,"line_price",t)},expression:"item.line_price"}})]}},{key:"stock_num",fn:function(t,r){return[a("a-input-number",{attrs:{size:"small",min:0,precision:0},model:{value:r.stock_num,callback:function(t){e.$set(r,"stock_num",t)},expression:"item.stock_num"}})]}},{key:"goods_weight",fn:function(t,r){return[a("a-input-number",{attrs:{size:"small",min:0,precision:2},model:{value:r.goods_weight,callback:function(t){e.$set(r,"goods_weight",t)},expression:"item.goods_weight"}})]}},{key:"goods_sku_no",fn:function(t,r){return[a("a-input",{attrs:{size:"small"},model:{value:r.goods_sku_no,callback:function(t){e.$set(r,"goods_sku_no",t)},expression:"item.goods_sku_no"}})]}}])})],1)],1)},i=[],o=a("4d91"),s=a("9f60"),l=a("2af9"),n={components:{SelectImage:l["d"]},props:{defaultSpecList:o["a"].array.def([]),defaultSkuList:o["a"].array.def([]),isSpecLocked:o["a"].bool.def(!1)},data:function(){return{labelCol:{span:3},wrapperCol:{span:21},MultiSpecModel:new s["a"],multiSpecData:{specList:[],skuList:[]}}},watch:{defaultSpecList:function(e){e.length&&this.MultiSpecModel.isEmpty()&&this.getData()}},created:function(){this.getData()},methods:{getData:function(){var e=this.defaultSpecList,t=this.defaultSkuList;this.multiSpecData=this.MultiSpecModel.getData(e,t)},getFromSpecData:function(){return this.MultiSpecModel.getFromSpecData()},handleAddSpecGroup:function(){this.checkSkuMaxNum()&&this.MultiSpecModel.handleAddSpecGroup()},handleDeleteSpecGroup:function(e){var t=this,a=this.$confirm({title:"您确定要删除该规格组吗?",content:"删除后不可恢复",onOk:function(){t.MultiSpecModel.handleDeleteSpecGroup(e),a.destroy()}})},handleAddSpecValue:function(e){this.checkSkuMaxNum()&&this.MultiSpecModel.handleAddSpecValue(e)},handleDeleteSpecValue:function(e,t){var a=this,r=this.$confirm({title:"您确定要删除该规格值吗?",content:"删除后不可恢复",onOk:function(){a.MultiSpecModel.handleDeleteSpecValue(e,t),r.destroy()}})},onChangeSpecGroupIpt:function(){this.MultiSpecModel.onUpdate(!0)},onChangeSpecValueIpt:function(e,t){this.MultiSpecModel.onUpdate(!0)},checkSkuMaxNum:function(){var e=this.multiSpecData.skuList;return!(e.length>=50)||(this.$message.error("生成的sku列表数量不能大于50个，当前数量：".concat(e.length,"个"),2.5),!1)},handleSkuBatch:function(){this.MultiSpecModel.handleSkuBatch()},verifyForm:function(){return!!this.MultiSpecModel.verifyForm()||(this.$message.error(this.MultiSpecModel.getError(),2),!1)}}},u=n,c=(a("7608"),a("2877")),d=Object(c["a"])(u,r,i,!1,null,"735b5c9e",null);t["a"]=d.exports},8904:function(e,t,a){},"8b24":function(e,t,a){},"8c2d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),a("a-spin",{attrs:{spinning:e.isLoading}},[a("a-form",{attrs:{form:e.form,selfUpdate:!0},on:{submit:e.handleSubmit}},[a("a-tabs",{attrs:{activeKey:e.tabKey,tabBarStyle:{marginBottom:"30px"}},on:{change:e.handleTabs}},[a("a-tab-pane",{key:0,attrs:{tab:"基本信息"}}),a("a-tab-pane",{key:1,attrs:{tab:"规格/库存"}}),a("a-tab-pane",{key:2,attrs:{tab:"藏品详情"}})],1),a("div",{staticClass:"tabs-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.tabKey,expression:"tabKey == 0"}],staticClass:"tab-pane"},[a("a-form-item",{attrs:{label:"藏品名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goods_name",{rules:[{required:!0,min:2,message:"请输入至少2个字符"}]}],expression:"['goods_name', {rules: [{required: true, min: 2, message: '请输入至少2个字符'}]}]"}],attrs:{placeholder:"请输入藏品名称"}})],1),a("a-form-item",{attrs:{label:"藏品分类",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["categorys",{rules:[{required:!0,message:"请至少选择1个藏品分类"}]}],expression:"['categorys', {rules: [{required: true, message: '请至少选择1个藏品分类'}]}]"}],attrs:{placeholder:"请选择藏品分类",dropdownStyle:{maxHeight:"500px",overflow:"auto"},treeData:e.formData.categoryList,treeCheckable:"",treeCheckStrictly:"",allowClear:""}}),a("div",{staticClass:"form-item-help"},[a("router-link",{attrs:{target:"_blank",to:{path:"/fragments/category/index"}}},[e._v("去新增")]),a("a",{attrs:{href:"javascript:;"},on:{click:e.onReloadCategoryList}},[e._v("刷新")])],1)],1),a("a-form-item",{attrs:{label:"碎片列表",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["debLists",{rules:[{required:!0,message:"请至少选择1个碎片"}]}],expression:"['debLists', {rules: [{required: true, message: '请至少选择1个碎片'}]}]"}],attrs:{placeholder:"请选择碎片",dropdownStyle:{maxHeight:"500px",overflow:"auto"},treeData:e.formData.debList,treeCheckable:"",treeCheckStrictly:"",allowClear:""}})],1),a("a-form-item",{attrs:{label:"藏品图片",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"建议尺寸：750*750像素, 最多上传1张, 可拖拽图片调整顺序, 第1张将作为藏品首图"}},[a("SelectImage",{directives:[{name:"decorator",rawName:"v-decorator",value:["imagesIds",{rules:[{required:!0,message:"请至少上传1张藏品图片"}]}],expression:"['imagesIds', {rules: [{required: true, message: '请至少上传1张藏品图片'}]}]"}],attrs:{multiple:"",maxNum:1}})],1),a("a-form-item",{attrs:{label:"藏品状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:10,rules:[{required:!0}]}],expression:"['status', {initialValue: 10, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:10}},[e._v("上架")]),a("a-radio",{attrs:{value:20}},[e._v("下架")])],1)],1),a("a-form-item",{attrs:{label:"藏品类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{initialValue:0,rules:[{required:!0}]}],expression:"['type', {initialValue: 0, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:0}},[e._v("普通藏品")]),a("a-radio",{attrs:{value:1}},[e._v("碎片藏品")])],1)],1),a("a-form-item",{attrs:{label:"合约地址",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{attrs:{placeholder:"请输入合约地址"},model:{value:e.goods_address,callback:function(t){e.goods_address=t},expression:"goods_address"}})],1),a("a-form-item",{attrs:{label:"链上标识",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{attrs:{placeholder:"请输入链上标识"},model:{value:e.logo,callback:function(t){e.logo=t},expression:"logo"}})],1),a("a-form-item",{attrs:{label:"开售时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"请输入日期"},on:{change:e.changeTime},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}})],1),a("a-form-item",{attrs:{label:"藏品排序",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"数字越小越靠前"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:100,rules:[{required:!0}]}],expression:"['sort', {initialValue: 100, rules:[{ required: true }]}]"}],attrs:{min:0}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.tabKey,expression:"tabKey == 1"}],staticClass:"tab-pane"},[a("a-form-item",{attrs:{label:"规格类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["spec_type",{initialValue:10,rules:[{required:!0}]}],expression:"['spec_type', { initialValue: 10, rules: [{ required: true }] }]"}],on:{change:function(t){return e.onForceUpdate()}}},[a("a-radio",{attrs:{value:10}},[e._v("单规格")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:20==e.form.getFieldValue("spec_type"),expression:"form.getFieldValue('spec_type') == 20"}]},[a("MultiSpec",{ref:"MultiSpec"})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:10==e.form.getFieldValue("spec_type"),expression:"form.getFieldValue('spec_type') == 10"}]},[a("a-form-item",{attrs:{label:"藏品价格",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"藏品的实际购买金额，最低0.01"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["goods_price",{initialValue:1,rules:[{required:!0,message:"请输入藏品价格"}]}],expression:"['goods_price', { initialValue: 1, rules: [{ required: true, message: '请输入藏品价格' }] }]"}],attrs:{min:.01,precision:2}}),a("span",{staticClass:"ml-10"},[e._v("元")])],1),a("a-form-item",{attrs:{label:"作者",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{attrs:{precision:2},model:{value:e.author,callback:function(t){e.author=t},expression:"author"}})],1),a("a-form-item",{attrs:{label:"当前库存数量",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"藏品的实际库存数量，为0时用户无法下单"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["stock_num",{initialValue:100,rules:[{required:!0,message:"请输入库存数量"}]}],expression:"['stock_num', { initialValue: 100, rules:[{ required: true, message: '请输入库存数量' }] }]"}],attrs:{min:0,precision:0}}),a("span",{staticClass:"ml-10"},[e._v("件")])],1)],1),a("a-form-item",{attrs:{label:"库存计算方式",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["deduct_stock_type",{initialValue:10,rules:[{required:!0}]}],expression:"['deduct_stock_type', {initialValue: 10, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:10}},[e._v("下单减库存")]),a("a-radio",{attrs:{value:20}},[e._v("付款减库存")])],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.tabKey,expression:"tabKey == 2"}],staticClass:"tab-pane"},[a("a-form-item",{attrs:{label:"藏品详情",labelCol:e.labelCol,wrapperCol:{span:16}}},[a("Ueditor",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{rules:[{required:!0,message:"藏品详情不能为空"}]}],expression:"['content', { rules: [{ required: true, message: '藏品详情不能为空' }] }]"}]})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:3==e.tabKey,expression:"tabKey == 3"}],staticClass:"tab-pane"},[a("a-form-model-item",{attrs:{label:"文件选择"}},[a("a-upload",{attrs:{"before-upload":e.beforeUpload,remove:e.handleRemove,multiple:!1,"file-list":e.fileList}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),e._v(" 上传glb格式图片,限制一张 ")],1)],1)],1)],1)]),a("a-form-item",{staticClass:"mt-20",attrs:{"wrapper-col":{span:e.wrapperCol.span,offset:e.labelCol.span}}},[a("a-button",{attrs:{type:"primary","html-type":"submit",loading:e.isBtnLoading}},[e._v("提交")])],1)],1)],1)],1)},i=[],o=(a("c975"),a("d81d"),a("fb6a"),a("a434"),a("b64b"),a("d3b7"),a("d084")),s=a("c1df"),l=a.n(s),n=a("2af9"),u=a("e1fe"),c=a("0bf2"),d={components:{SelectImage:n["d"],SelectVideo:n["e"],Ueditor:n["f"],InputNumberGroup:n["b"],MultiSpec:c["a"]},data:function(){return{tabKey:0,startTime:null,overTime:null,goods_address:"",logo:"",labelCol:{span:3},wrapperCol:{span:10},isLoading:!1,type:"time",author:"",isBtnLoading:!1,form:this.$form.createForm(this),formData:u["a"].formData,fileList:[],uploading:[],file_path:"",shopArr:"",arr:[]}},created:function(){var e=this;this.isLoading=!0,u["a"].getFromData().then((function(){e.isLoading=!1}))},methods:{onForceUpdate:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$forceUpdate(),t&&setTimeout((function(){e.$forceUpdate()}),10)},changeTime:function(e){var t=l()(e).format("YYYY-MM-DD HH:mm:ss");this.startTime=t},handleTabs:function(e){this.tabKey=e},onReloadCategoryList:function(){var e=this;this.isLoading=!0,u["a"].getCategoryList().then((function(){e.isLoading=!1}))},beforeUpload:function(e){var t=this;this.fileList=[e],this.isLoading=!0,this.uploading.push(!0);var a=new FormData;a.append("iFile",e),o["c"](a).then((function(e){t.file_path=e.data.fileInfo.file_path})).finally((function(e){t.uploading.pop(),0===t.uploading.length&&(t.isLoading=!1,t.handleRefresh(!0))}))},handleRemove:function(e){var t=this.fileList.indexOf(e),a=this.fileList.slice();a.splice(t,1),this.fileList=a},onReloadServiceList:function(){var e=this;this.isLoading=!0,u["a"].getServiceList().then((function(){e.isLoading=!1}))},onReloadDeliveryList:function(){var e=this;this.isLoading=!0,u["a"].getDeliveryList().then((function(){e.isLoading=!1}))},handleSubmit:function(e){var t=this;e.preventDefault();var a=this.form.validateFields;if(null==this.startTime)return this.$message.error("请选择开售时间",1.5);a((function(e,a){if(e)return t.onTargetTabError(e),!1;if(20===a.spec_type){var r=t.$refs.MultiSpec;if(!r.verifyForm())return t.tabKey=1,!1;a.specData=r.getFromSpecData()}return a.categoryIds=a.categorys.map((function(e){return e.value})),delete a.categorys,a.debrisIds=a.debLists.map((function(e){return e.value})),delete a.debLists,a.is_box=2,a.is_enable_grade=0,a.goods_weight=0,a.spec_type=10,a.is_points_gift=1,a.delivery_id=10001,a.is_points_discount=1,a.serviceIds=[10001,10003],a.startTime=t.startTime,a.author=t.author,a.goods_address=t.goods_address,a.logo=t.logo,a.file_path=t.file_path,t.onFormSubmit(a),!0}))},onTargetTabError:function(e){var t=[["goods_name","categorys","imagesIds","delivery_id"],["spec_type","goods_price"],["content"],["alone_grade_equity","first_money","second_money","third_money"]],a=Object.keys(e).shift();for(var r in t)if(t[r].indexOf(a)>-1){this.tabKey=parseInt(r);break}},onFormSubmit:function(e){var t=this;this.isLoading=!0,this.isBtnLoading=!0,o["a"]({form:e}).then((function(e){t.$message.success(e.message,1.5),setTimeout((function(){t.$router.push("./index")}),1500)})).catch((function(){t.isBtnLoading=!1})).finally((function(){t.isLoading=!1}))}}},m=d,p=(a("ed02"),a("2877")),f=Object(p["a"])(m,r,i,!1,null,"5fe758e6",null);t["default"]=f.exports},"8e5d":function(e,t,a){},"964c":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-form-item",{attrs:{label:"商品规格",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{staticClass:"form-item-help",staticStyle:{"line-height":"36px"}},[a("small",[e._v("最多添加3个商品规格组，生成的SKU数量不能超出50个")])]),e._l(e.multiSpecData.specList,(function(t,r){return a("div",{key:r,staticClass:"spec-group"},[a("div",{staticClass:"spec-group-item clearfix"},[a("a-input",{staticClass:"group-item-input",attrs:{readOnly:e.isSpecLocked,placeholder:"请输入规格名称"},on:{change:e.onChangeSpecGroupIpt},model:{value:t.spec_name,callback:function(a){e.$set(t,"spec_name",a)},expression:"item.spec_name"}}),e.isSpecLocked?e._e():a("a",{staticClass:"group-item-delete",attrs:{href:"javascript:;"},on:{click:function(t){return e.handleDeleteSpecGroup(r)}}},[e._v("删除规格组")])],1),a("div",{staticClass:"spec-value clearfix"},[e._l(t.valueList,(function(t,i){return a("div",{key:i,staticClass:"spec-value-item"},[a("a-input",{staticClass:"value-item-input",attrs:{readOnly:e.isSpecLocked,placeholder:"请输入规格值"},on:{change:e.onChangeSpecValueIpt},model:{value:t.spec_value,callback:function(a){e.$set(t,"spec_value",a)},expression:"itm.spec_value"}}),e.isSpecLocked?e._e():a("a-icon",{staticClass:"icon-close",attrs:{theme:"filled",type:"close-circle"},on:{click:function(t){return e.handleDeleteSpecValue(r,i)}}})],1)})),e.isSpecLocked?e._e():a("div",{staticClass:"spec-value-add"},[a("a",{staticClass:"group-item-delete",attrs:{href:"javascript:;"},on:{click:function(t){return e.handleAddSpecValue(r)}}},[e._v("新增规格值")])])],2)])})),!e.isSpecLocked&&e.multiSpecData.specList.length<3?a("a-button",{staticClass:"spec-group-add-btn",attrs:{icon:"plus"},on:{click:e.handleAddSpecGroup}},[e._v("添加规格组")]):e._e()],2),a("a-form-item",{directives:[{name:"show",rawName:"v-show",value:e.multiSpecData.skuList.length,expression:"multiSpecData.skuList.length"}],attrs:{label:"SKU列表",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e.multiSpecData.skuList.length>1?a("div",{staticClass:"sku-batch"},[a("span",{staticClass:"title"},[e._v("批量设置:")]),a("a-input-number",{attrs:{placeholder:"商品价格",min:.01,precision:2},model:{value:e.multiSpecData.skuBatchForm.goods_price,callback:function(t){e.$set(e.multiSpecData.skuBatchForm,"goods_price",t)},expression:"multiSpecData.skuBatchForm.goods_price"}}),a("a-input-number",{attrs:{placeholder:"划线价格",min:0,precision:2},model:{value:e.multiSpecData.skuBatchForm.line_price,callback:function(t){e.$set(e.multiSpecData.skuBatchForm,"line_price",t)},expression:"multiSpecData.skuBatchForm.line_price"}}),a("a-input-number",{attrs:{placeholder:"库存数量",min:0,precision:0},model:{value:e.multiSpecData.skuBatchForm.stock_num,callback:function(t){e.$set(e.multiSpecData.skuBatchForm,"stock_num",t)},expression:"multiSpecData.skuBatchForm.stock_num"}}),a("a-input-number",{attrs:{placeholder:"商品重量",min:0,precision:2},model:{value:e.multiSpecData.skuBatchForm.goods_weight,callback:function(t){e.$set(e.multiSpecData.skuBatchForm,"goods_weight",t)},expression:"multiSpecData.skuBatchForm.goods_weight"}}),a("a-input",{attrs:{placeholder:"sku编码"},model:{value:e.multiSpecData.skuBatchForm.goods_sku_no,callback:function(t){e.$set(e.multiSpecData.skuBatchForm,"goods_sku_no",t)},expression:"multiSpecData.skuBatchForm.goods_sku_no"}}),a("a-button",{on:{click:e.handleSkuBatch}},[e._v("立即设置")])],1):e._e(),a("a-table",{staticClass:"sku-list",attrs:{columns:e.multiSpecData.skuColumns,dataSource:e.multiSpecData.skuList,scroll:{x:!0},pagination:!1,bordered:""},scopedSlots:e._u([{key:"image",fn:function(t,r){return[a("SelectImage",{attrs:{defaultList:r.image_id>0&&r.image?[r.image]:[],width:50},model:{value:r.image_id,callback:function(t){e.$set(r,"image_id",t)},expression:"item.image_id"}})]}},{key:"goods_price",fn:function(t,r){return[a("a-input-number",{attrs:{size:"small",min:.01,precision:2},model:{value:r.goods_price,callback:function(t){e.$set(r,"goods_price",t)},expression:"item.goods_price"}})]}},{key:"line_price",fn:function(t,r){return[a("a-input-number",{attrs:{size:"small",min:0,precision:2},model:{value:r.line_price,callback:function(t){e.$set(r,"line_price",t)},expression:"item.line_price"}})]}},{key:"stock_num",fn:function(t,r){return[a("a-input-number",{attrs:{size:"small",min:0,precision:0},model:{value:r.stock_num,callback:function(t){e.$set(r,"stock_num",t)},expression:"item.stock_num"}})]}},{key:"goods_weight",fn:function(t,r){return[a("a-input-number",{attrs:{size:"small",min:0,precision:2},model:{value:r.goods_weight,callback:function(t){e.$set(r,"goods_weight",t)},expression:"item.goods_weight"}})]}},{key:"goods_sku_no",fn:function(t,r){return[a("a-input",{attrs:{size:"small"},model:{value:r.goods_sku_no,callback:function(t){e.$set(r,"goods_sku_no",t)},expression:"item.goods_sku_no"}})]}}])})],1)],1)},i=[],o=a("4d91"),s=a("9f60"),l=a("2af9"),n={components:{SelectImage:l["d"]},props:{defaultSpecList:o["a"].array.def([]),defaultSkuList:o["a"].array.def([]),isSpecLocked:o["a"].bool.def(!1)},data:function(){return{labelCol:{span:3},wrapperCol:{span:21},MultiSpecModel:new s["a"],multiSpecData:{specList:[],skuList:[]}}},watch:{defaultSpecList:function(e){e.length&&this.MultiSpecModel.isEmpty()&&this.getData()}},created:function(){this.getData()},methods:{getData:function(){var e=this.defaultSpecList,t=this.defaultSkuList;this.multiSpecData=this.MultiSpecModel.getData(e,t)},getFromSpecData:function(){return this.MultiSpecModel.getFromSpecData()},handleAddSpecGroup:function(){this.checkSkuMaxNum()&&this.MultiSpecModel.handleAddSpecGroup()},handleDeleteSpecGroup:function(e){var t=this,a=this.$confirm({title:"您确定要删除该规格组吗?",content:"删除后不可恢复",onOk:function(){t.MultiSpecModel.handleDeleteSpecGroup(e),a.destroy()}})},handleAddSpecValue:function(e){this.checkSkuMaxNum()&&this.MultiSpecModel.handleAddSpecValue(e)},handleDeleteSpecValue:function(e,t){var a=this,r=this.$confirm({title:"您确定要删除该规格值吗?",content:"删除后不可恢复",onOk:function(){a.MultiSpecModel.handleDeleteSpecValue(e,t),r.destroy()}})},onChangeSpecGroupIpt:function(){this.MultiSpecModel.onUpdate(!0)},onChangeSpecValueIpt:function(e,t){this.MultiSpecModel.onUpdate(!0)},checkSkuMaxNum:function(){var e=this.multiSpecData.skuList;return!(e.length>=50)||(this.$message.error("生成的sku列表数量不能大于50个，当前数量：".concat(e.length,"个"),2.5),!1)},handleSkuBatch:function(){this.MultiSpecModel.handleSkuBatch()},verifyForm:function(){return!!this.MultiSpecModel.verifyForm()||(this.$message.error(this.MultiSpecModel.getError(),2),!1)}}},u=n,c=(a("a1a7"),a("2877")),d=Object(c["a"])(u,r,i,!1,null,"375ff57f",null);t["a"]=d.exports},"9a9d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),a("div",{staticClass:"table-operator"},[a("a-button",{directives:[{name:"action",rawName:"v-action:add",arg:"add"}],attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新增")])],1),e.isLoading?e._e():a("a-table",{attrs:{rowKey:"id",columns:e.columns,dataSource:e.rateList,defaultExpandAllRows:!0,expandIconColumnIndex:1,pagination:!1,loading:e.isLoading},scopedSlots:e._u([{key:"action",fn:function(t,r){return a("span",{},[a("a",{directives:[{name:"action",rawName:"v-action:edit",arg:"edit"}],staticStyle:{"margin-right":"8px"},on:{click:function(t){return e.handleEdit(r)}}},[e._v("编辑")]),a("a",{directives:[{name:"action",rawName:"v-action:delete",arg:"delete"}],on:{click:function(t){return e.handleDelete(r)}}},[e._v("删除")])])}}],null,!1,1130629880)})],1),a("a-drawer",{attrs:{title:"费率",width:720,visible:e.visible,"body-style":{paddingBottom:"80px"}},on:{close:e.onClose}},[a("a-form",{attrs:{model:e.form,layout:"vertical"}},[a("a-form-item",{attrs:{label:"二级市场费率",name:"withdrawal_rate"}},[a("a-input-number",{staticStyle:{width:"100%"},attrs:{min:0,step:.1},model:{value:e.form.withdrawal_rate,callback:function(t){e.$set(e.form,"withdrawal_rate",t)},expression:"form.withdrawal_rate"}})],1),a("a-form-item",{attrs:{label:"提现手续费",name:"transac_rate"}},[a("a-input-number",{staticStyle:{width:"100%"},attrs:{min:0,step:.1},model:{value:e.form.transac_rate,callback:function(t){e.$set(e.form,"transac_rate",t)},expression:"form.transac_rate"}})],1),a("a-form-item",{attrs:{label:"备注信息",name:"remarks"}},[a("a-input",{model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1),a("a-form-item",{attrs:{"wrapper-col":{span:14,offset:4}}},[a("a-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("Create")]),a("a-button",{staticStyle:{"margin-left":"10px"}},[e._v("Cancel")])],1)],1)],1)],1)},i=[],o=(a("d3b7"),a("b775")),s={list:"/rate/list",add:"/rate/create",edit:"/rate/update",delete:"/rate/delete"};function l(e){return Object(o["b"])({url:s.list,method:"get",params:e})}function n(e){return Object(o["b"])({url:s.add,method:"post",data:e})}function u(e){return Object(o["b"])({url:s.edit,method:"post",data:e})}function c(e){return Object(o["b"])({url:s.delete,method:"post",data:e})}var d=a("2af9"),m={name:"Index",components:{STable:d["c"]},data:function(){return{rateList:[],queryParam:{},isLoading:!1,columns:[{title:"序号",dataIndex:"id"},{title:"二级市场费率",dataIndex:"withdrawal_rate"},{title:"提现费率",dataIndex:"transac_rate"},{title:"备注信息",dataIndex:"remarks"},{title:"创建时间",dataIndex:"create_time"},{title:"更新时间",dataIndex:"update_time"},{title:"操作",dataIndex:"action",width:"180px",scopedSlots:{customRender:"action"}}],form:{id:0,withdrawal_rate:"",transac_rate:"",remarks:""},visible:!1,isNew:!1}},created:function(){this.getRateList(!0)},methods:{getRateList:function(e){var t=this;e&&(this.isLoading=!0),l().then((function(e){t.rateList=e.data})).finally((function(e){t.isLoading=!1}))},handleAdd:function(){this.visible=!0,this.isNew=!0},handleEdit:function(e){this.form={id:e.id,withdrawal_rate:e.withdrawal_rate,transac_rate:e.transac_rate,remarks:e.remarks},this.visible=!0},handleDelete:function(e){var t=this,a=this.$confirm({title:"您确定要删除该记录吗?",content:"删除后不可恢复",onOk:function(){return c({id:e.id}).then((function(e){t.$message.success(e.message,1.5),t.handleRefresh()})).finally((function(e){a.destroy()}))}})},handleRefresh:function(){this.getRateList()},onClose:function(){this.visible=!1},onSubmit:function(){var e=this;""!=this.form.withdrawal_rate&&""!=this.form.transac_rate?""!=this.form.remarks?this.isNew?n({withdrawal_rate:this.form.withdrawal_rate,transac_rate:this.form.transac_rate,remarks:this.form.remarks}).then((function(t){e.$message.success(t.message,1.5),e.visible=!1,e.isNew=!1,e.handleRefresh()})):u({id:this.form.id,withdrawal_rate:this.form.withdrawal_rate,transac_rate:this.form.transac_rate,remarks:this.form.remarks}).then((function(t){e.$message.success(t.message,1.5),e.visible=!1,e.handleRefresh()})):this.$message.success("请填写备注",1.5):this.$message.success("请填写二级市场费率",1.5)}}},p=m,f=a("2877"),h=Object(f["a"])(p,r,i,!1,null,null,null);t["default"]=h.exports},"9f60":function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));a("99af"),a("7db0"),a("4160"),a("a15b"),a("d81d"),a("13d5"),a("a434"),a("b0c0"),a("b64b"),a("159b");var r=a("5530"),i=a("d4ec"),o=a("bee2"),s=a("2ef0"),l=a.n(s),n=a("ca00"),u=[{title:"预览图",dataIndex:"image",width:90,scopedSlots:{customRender:"image"}},{title:"商品价格",dataIndex:"goods_price",width:120,scopedSlots:{customRender:"goods_price"}},{title:"划线价格",dataIndex:"line_price",width:120,scopedSlots:{customRender:"line_price"}},{title:"库存数量",dataIndex:"stock_num",width:120,scopedSlots:{customRender:"stock_num"}},{title:"商品重量 (KG)",dataIndex:"goods_weight",width:120,scopedSlots:{customRender:"goods_weight"}},{title:"SKU编码",dataIndex:"goods_sku_no",width:140,scopedSlots:{customRender:"goods_sku_no"}}],c={image_id:0,image:{},goods_price:"",line_price:"",stock_num:"",goods_weight:"",goods_sku_no:""},d=function(){function e(){Object(i["a"])(this,e),this.multiSpecData={},this.error="",this.multiSpecData={specList:[],skuList:[],skuColumns:l.a.cloneDeep(u),skuBatchForm:l.a.cloneDeep(c)}}return Object(o["a"])(e,[{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.length&&(this.multiSpecData.specList=l.a.cloneDeep(e),this.multiSpecData.skuList=l.a.cloneDeep(t));var a=this.specGroupArr(),r=p(a),i=this.rowSpanArr(a,r);return this.buildSkuColumns(i),this.buildSkuList(r),this.multiSpecData}},{key:"isEmpty",value:function(){return 0===this.multiSpecData.specList.length}},{key:"getError",value:function(){return this.error}},{key:"specGroupArr",value:function(){var e=[];return this.multiSpecData.specList.forEach((function(t){var a=[];t.valueList.forEach((function(e){a.push(e)})),e.push(a)})),e}},{key:"rowSpanArr",value:function(e,t){for(var a=[],r=t.length,i=0;i<e.length;i++)a[i]=parseInt(r/e[i].length),r=a[i];return a}},{key:"buildSkuList",value:function(e){for(var t=[],a=function(a){var i=Object(r["a"])(Object(r["a"])({},c),{},{key:a,skuKey:e[a].map((function(e){return e.key})).join("_"),skuKeys:e[a].map((function(e){return{groupKey:e.groupKey,valueKey:e.key}}))});e[a].forEach((function(e,t){i["spec_value_".concat(t)]=e.spec_value})),t.push(i)},i=0;i<e.length;i++)a(i);this.multiSpecData.skuList=this.oldSkuList(t)}},{key:"oldSkuList",value:function(e){var t=this.multiSpecData.skuList.concat();if(!t.length||!e.length)return e;var a=function(a){var i={};i=t.length===e.length?l.a.cloneDeep(t[a]):t.find((function(t){return t.skuKey===e[a].skuKey})),i&&(e[a]=Object(r["a"])(Object(r["a"])({},e[a]),l.a.pick(i,Object.keys(c))))};for(var i in e)a(i);return e}},{key:"buildSkuColumns",value:function(e){for(var t=this.multiSpecData.specList,a=u.concat(),r=function(t,a,r,i){var o={children:a,attrs:{}},s=e[t-1];return o.attrs.rowSpan=i%s===0?s:0,o},i=function(e){var i=t[e-1];a.unshift({title:i.spec_name,dataIndex:"spec_value_".concat(e-1),customRender:function(t,a,i){return r(e,t,a,i)}})},o=t.length;o>0;o--)i(o);this.multiSpecData.skuColumns=a}},{key:"handleAddSpecGroup",value:function(){var e=this.multiSpecData.specList;e.push({key:e.length||0,spec_name:"",valueList:[]});var t=e.length-1;this.handleAddSpecValue(t)}},{key:"handleAddSpecValue",value:function(e){var t=this.multiSpecData.specList[e],a=t.valueList;a.push({key:a.length||0,groupKey:t.key,spec_value:""})}},{key:"handleDeleteSpecGroup",value:function(e){this.multiSpecData.specList.splice(e,1),this.onUpdate(!1)}},{key:"handleDeleteSpecValue",value:function(e,t){this.multiSpecData.specList[e].valueList.splice(t,1),this.onUpdate(!1)}},{key:"handleSkuBatch",value:function(){var e=this.getFilterObject(this.multiSpecData.skuBatchForm),t=this.multiSpecData.skuList;for(var a in t)t[a]=Object(r["a"])(Object(r["a"])({},t[a]),e);this.onUpdate(!1)}},{key:"getFilterObject",value:function(e){var t={};for(var a in e){var r=e[a];Object(n["e"])(r)||(t[a]=r)}return t}},{key:"verifyForm",value:function(){return!!this.verifySpec()&&!!this.verifySkuList()}},{key:"verifySkuList",value:function(){var e=[{field:"goods_price",name:"商品价格"},{field:"stock_num",name:"库存数量"},{field:"goods_weight",name:"商品重量"}],t=this.multiSpecData.skuList;for(var a in t){var r=t[a];for(var i in e){var o=r[e[i].field];if(""===o||null===o)return this.error="".concat(e[i].name,"不能为空"),!1}}return!0}},{key:"verifySpec",value:function(){var e=this.multiSpecData.specList;if(!e.length)return this.error="亲，还没有添加规格组~",!1;for(var t in e){var a=e[t];if(Object(n["e"])(a.spec_name))return this.error="规格组名称不能为空~",!1;var r=a.valueList;if(!r.length)return this.error="还没有添加规格值~",!1;for(var i in r)if(Object(n["e"])(r[i].spec_value))return this.error="规格值不能为空~",!1}return!0}},{key:"getFromSpecData",value:function(){var e=this.multiSpecData,t=e.specList,a=e.skuList,r={specList:l.a.cloneDeep(t),skuList:l.a.cloneDeep(a)};for(var i in r.skuList){var o=r.skuList[i];delete o.image,delete o.key}return r}},{key:"onUpdate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e?Object(n["c"])(m,200)(this):m(this)}}]),e}(),m=function(e){return e.getData()},p=function(e){return e.length?Array.prototype.reduce.call(e,(function(e,t){var a=[];return e.forEach((function(e){t.forEach((function(t){a.push(e.concat([t]))}))})),a}),[[]]):[]}},a1a7:function(e,t,a){"use strict";var r=a("5803"),i=a.n(r);i.a},aac3:function(e,t,a){},ad8e:function(e,t,a){"use strict";var r=a("3f8d"),i=a.n(r);i.a},af37:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),a("a-spin",{attrs:{spinning:e.isLoading}},[a("a-form",{attrs:{form:e.form,selfUpdate:!0},on:{submit:e.handleSubmit}},[a("a-tabs",{attrs:{activeKey:e.tabKey,tabBarStyle:{marginBottom:"30px"}},on:{change:e.handleTabs}},[a("a-tab-pane",{key:0,attrs:{tab:"基本信息"}}),a("a-tab-pane",{key:1,attrs:{tab:"规格/库存"}}),a("a-tab-pane",{key:2,attrs:{tab:"商品详情"}})],1),a("div",{staticClass:"tabs-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.tabKey,expression:"tabKey == 0"}],staticClass:"tab-pane"},[a("a-form-item",{attrs:{label:"盲盒标题",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["blind_name",{rules:[{required:!0,min:2,message:"请输入至少2个字符"}]}],expression:"['blind_name', { rules: [{ required: true, min: 2, message: '请输入至少2个字符' }] }]"}],attrs:{placeholder:"请输入盲盒标题"}})],1),a("a-form-item",{attrs:{label:"盲盒价格",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"盲盒的实际购买金额，最低0.01"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["price",{initialValue:1,rules:[{required:!0,message:"请输入盲盒价格"}]}],expression:"['price', { initialValue: 1, rules: [{ required: true, message: '请输入盲盒价格' }] }]"}],attrs:{min:.01,precision:2}}),a("span",{staticClass:"ml-10"},[e._v("元")])],1),a("a-form-item",{attrs:{label:"盲盒图片",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"建议尺寸：750*750像素, 最多上传10张, 可拖拽图片调整顺序, 第1张将作为商品首图"}},[a("SelectImage",{directives:[{name:"decorator",rawName:"v-decorator",value:["thumb",{rules:[{required:!0,message:"请至少上传1张藏品图片"}]}],expression:"['thumb', { rules: [{ required: true, message: '请至少上传1张藏品图片' }] }]"}],attrs:{multiple:"",maxNum:10,defaultList:e.formData.goods.goods_images}})],1),a("a-form-item",{attrs:{label:"开售时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"请输入日期"},on:{change:e.changeStartTime},model:{value:e.starttime,callback:function(t){e.starttime=t},expression:"starttime"}})],1),a("a-form-item",{attrs:{label:"结束时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"请输入日期"},on:{change:e.changeEndTime},model:{value:e.endtime,callback:function(t){e.endtime=t},expression:"endtime"}})],1),a("a-form-item",{attrs:{label:"选择盲盒商品",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[0!=e.shopArr.length?a("a-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary"},on:{click:e.change}},[e._v("选择商品")]):e._e()],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.tabKey,expression:"tabKey == 1"}],staticClass:"tab-pane"},[a("a-form-item",{attrs:{label:"规格类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["spec_type",{initialValue:10,rules:[{required:!0}]}],expression:"['spec_type', {initialValue: 10, rules: [{ required: true }]}]"}],on:{change:function(t){return e.onForceUpdate()}}},[a("a-radio",{attrs:{value:10}},[e._v("单规格")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:20==e.form.getFieldValue("spec_type"),expression:"form.getFieldValue('spec_type') == 20"}]},[a("MultiSpec",{ref:"MultiSpec",attrs:{defaultSpecList:e.formData.goods.specList,defaultSkuList:e.formData.goods.skuList}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:10==e.form.getFieldValue("spec_type"),expression:"form.getFieldValue('spec_type') == 10"}]},[a("a-form-item",{attrs:{label:"当前库存数量",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"商品的实际库存数量，为0时用户无法下单"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["total",{initialValue:100,rules:[{required:!0,message:"请输入库存数量"}]}],expression:"['total', { initialValue: 100, rules:[{ required: true, message: '请输入库存数量' }] }]"}],attrs:{min:0,precision:0}}),a("span",{staticClass:"ml-10"},[e._v("件")])],1),a("a-form-item",{attrs:{label:"限购数量",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"商品的每人限购数量，为0时用户无法下单"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["get_limit",{initialValue:1,rules:[{required:!0,message:"请输入限购数量"}]}],expression:"['get_limit', { initialValue: 1, rules:[{ required: true, message: '请输入限购数量' }] }]"}],attrs:{min:0,precision:0}}),a("span",{staticClass:"ml-10"},[e._v("件")])],1),a("a-form-item",{attrs:{label:"发行量",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["get_total",{initialValue:1,rules:[{required:!0,message:"请输入发行量"}]}],expression:"['get_total', { initialValue: 1, rules:[{ required: true, message: '请输入发行量' }] }]"}],attrs:{min:0,precision:0}}),a("span",{staticClass:"ml-10"},[e._v("件")])],1)],1),a("a-form-item",{attrs:{label:"库存计算方式",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["deduct_stock_type",{initialValue:10,rules:[{required:!0}]}],expression:"['deduct_stock_type', {initialValue: 10, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:10}},[e._v("下单减库存")]),a("a-radio",{attrs:{value:20}},[e._v("付款减库存")])],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.tabKey,expression:"tabKey == 2"}],staticClass:"tab-pane"},[a("a-form-item",{attrs:{label:"盲盒详情",labelCol:e.labelCol,wrapperCol:{span:16}}},[a("Ueditor",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{rules:[{required:!0,message:"盲盒详情不能为空"}]}],expression:"['content', {rules: [{required: true, message: '盲盒详情不能为空'}]}]"}]})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:3==e.tabKey,expression:"tabKey == 3"}],staticClass:"tab-pane"},[a("a-divider",{attrs:{orientation:"left"}},[e._v("积分设置")]),a("a-form-item",{attrs:{label:"积分赠送",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"开启后用户购买此商品将获得积分"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["is_points_gift",{initialValue:1,rules:[{required:!0}]}],expression:"['is_points_gift', {initialValue: 1, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:1}},[e._v("开启")]),a("a-radio",{attrs:{value:0}},[e._v("关闭")])],1)],1)],1)]),a("a-form-item",{staticClass:"mt-20",attrs:{"wrapper-col":{span:e.wrapperCol.span,offset:e.labelCol.span}}},[a("a-button",{attrs:{type:"primary","html-type":"submit",loading:e.isBtnLoading}},[e._v("提交")])],1)],1)],1),a("EditForm",{ref:"EditForm",attrs:{categoryList:e.shopArr},on:{result:e.newResult}})],1)},i=[],o=(a("4160"),a("c975"),a("a15b"),a("b64b"),a("d3b7"),a("ac1f"),a("1276"),a("159b"),a("d6af")),s=a("3bab"),l=a("2af9"),n=a("e1fe"),u=a("3af7"),c=a("ca00"),d=a("c1df"),m=a.n(d),p={components:{SelectImage:l["d"],SelectVideo:l["e"],Ueditor:l["f"],InputNumberGroup:l["b"],MultiSpec:u["a"],EditForm:o["a"]},data:function(){return{tabKey:0,labelCol:{span:3},wrapperCol:{span:10},isLoading:!1,starttime:null,endtime:null,overTime:null,isBtnLoading:!1,add:"",form:this.$form.createForm(this),goodsId:null,shopArr:[],arr:[],formData:n["a"].formData}},created:function(){this.initData()},beforeDestroy:function(){n["a"].formData.goods={}},methods:{change:function(){this.$refs.EditForm.edit(this.shopArr)},newResult:function(e){this.arr=e},changeStartTime:function(e){var t=m()(e).format("YYYY-MM-DD HH:mm:ss");this.starttime=t},changeEndTime:function(e){var t=m()(e).format("YYYY-MM-DD HH:mm:ss");this.endtime=t},initData:function(){var e=this;this.goodsId=this.$route.query.goodsId,this.isLoading=!0,n["a"].getFromDatas(this.goodsId).then((function(){Object(c["f"])(e.form.getFieldsValue())||e.form.setFieldsValue(n["a"].getFieldsValues()),e.isLoading=!1,e.add=e.formData.goods.probability,e.starttime=e.formData.goods.starttime,e.endtime=e.formData.goods.endtime})),s["b"]({is_box:1}).then((function(t){setTimeout((function(){e.$nextTick((function(){var a=e.formData.goods.goods_ids.split(",");t.data.list.forEach((function(e){for(var t=0;t<=a.length;t++)a[t]===e.goods_id&&(e.show=!0)})),e.shopArr=t.data.list,e.arr=t.data.list}))}))}),1e3)},onForceUpdate:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$forceUpdate(),t&&setTimeout((function(){e.$forceUpdate()}),10)},handleTabs:function(e){this.tabKey=e},onReloadCategoryList:function(){var e=this;this.isLoading=!0,n["a"].getCategoryList().then((function(){e.isLoading=!1}))},onReloadServiceList:function(){var e=this;this.isLoading=!0,n["a"].getServiceList().then((function(){e.isLoading=!1}))},onReloadDeliveryList:function(){var e=this;this.isLoading=!0,n["a"].getDeliveryList().then((function(){e.isLoading=!1}))},handleSubmit:function(e){var t=this;e.preventDefault();var a=this.form.validateFields;a((function(e,a){if(e)return t.onTargetTabError(e),!1;if(null==t.starttime)return t.onTargetTabError("请选择开售时间"),!1;if(null==t.endtime)return t.onTargetTabError("请选择结束时间"),!1;a.starttime=t.starttime?t.starttime:null,a.endtime=t.endtime?t.endtime:null;var r=[];return t.arr.forEach((function(e,t){r.push(e.goods_id)})),a.goods_ids=r.join(","),t.onFormSubmit(a),!0}))},onTargetTabError:function(e){var t=[["blind_name","thumb","total","price","goods_ids"],["spec_type"],["content"]],a=Object.keys(e).shift();for(var r in t)if(t[r].indexOf(a)>-1){this.tabKey=parseInt(r);break}},onFormSubmit:function(e){var t=this;this.isLoading=!0,this.isBtnLoading=!0,e.id=this.goodsId,s["g"]({data:e}).then((function(e){t.$message.success(e.message,1.5),setTimeout((function(){t.$router.push("./index")}),1500)})).catch((function(){t.isBtnLoading=!1})).finally((function(){t.isLoading=!1}))}}},f=p,h=(a("6e67"),a("2877")),g=Object(h["a"])(f,r,i,!1,null,"1b43d24a",null);t["default"]=g.exports},b121:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),a("a-spin",{attrs:{spinning:e.isLoading}},[a("a-form",{attrs:{form:e.form,selfUpdate:!0},on:{submit:e.handleSubmit}},[a("a-tabs",{attrs:{activeKey:e.tabKey,tabBarStyle:{marginBottom:"30px"}},on:{change:e.handleTabs}},[a("a-tab-pane",{key:0,attrs:{tab:"基本信息"}}),a("a-tab-pane",{key:1,attrs:{tab:"规格/库存"}}),a("a-tab-pane",{key:2,attrs:{tab:"藏品详情"}})],1),a("div",{staticClass:"tabs-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.tabKey,expression:"tabKey == 0"}],staticClass:"tab-pane"},[a("a-form-item",{attrs:{label:"藏品名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goods_name",{rules:[{required:!0,min:2,message:"请输入至少2个字符"}]}],expression:"['goods_name', {rules: [{required: true, min: 2, message: '请输入至少2个字符'}]}]"}],attrs:{placeholder:"请输入藏品名称"}})],1),a("a-form-item",{attrs:{label:"藏品图片",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"建议尺寸：750*750像素, 最多上传10张, 可拖拽图片调整顺序, 第1张将作为商品首图"}},[a("SelectImage",{directives:[{name:"decorator",rawName:"v-decorator",value:["imagesIds",{rules:[{required:!0,message:"请至少上传1张商品图片"}]}],expression:"['imagesIds', {rules: [{required: true, message: '请至少上传1张商品图片'}]}]"}],attrs:{multiple:"",maxNum:10}})],1),a("a-form-item",{attrs:{label:"盲盒开奖几率",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input-number",{staticStyle:{width:"200px"},attrs:{min:1,max:100},model:{value:e.add,callback:function(t){e.add=t},expression:"add"}}),a("span",{staticClass:"ml-10"},[e._v("%")]),a("div",{staticClass:"form-item-help"},[a("p",{staticClass:"extra"},[e._v("注：概率请填写整数")])])],1),a("a-form-item",{attrs:{label:"商品状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:10,rules:[{required:!0}]}],expression:"['status', {initialValue: 10, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:10}},[e._v("上架")]),a("a-radio",{attrs:{value:20}},[e._v("下架")])],1)],1),a("a-form-item",{attrs:{label:"是否上链",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["is_sl",{initialValue:0,rules:[{required:!0}]}],expression:"['is_sl', {initialValue: 0, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:0}},[e._v("上")]),a("a-radio",{attrs:{value:1}},[e._v("不上")])],1)],1),a("a-form-item",{attrs:{label:"藏品类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{initialValue:0,rules:[{required:!0}]}],expression:"['type', {initialValue: 0, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:0}},[e._v("普通藏品")]),a("a-radio",{attrs:{value:1}},[e._v("碎片藏品")])],1)],1),a("a-form-item",{attrs:{label:"藏品属性",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["is_box",{initialValue:0,rules:[{required:!0}]}],expression:"['is_box', {initialValue: 0, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:0}},[e._v("普通")]),a("a-radio",{attrs:{value:1}},[e._v("盲盒")])],1)],1),a("a-form-item",{attrs:{label:"藏品排序",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"数字越小越靠前"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:100,rules:[{required:!0}]}],expression:"['sort', {initialValue: 100, rules:[{ required: true }]}]"}],attrs:{min:0}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.tabKey,expression:"tabKey == 1"}],staticClass:"tab-pane"},[a("a-form-item",{attrs:{label:"规格类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["spec_type",{initialValue:10,rules:[{required:!0}]}],expression:"['spec_type', { initialValue: 10, rules: [{ required: true }] }]"}],on:{change:function(t){return e.onForceUpdate()}}},[a("a-radio",{attrs:{value:10}},[e._v("单规格")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:20==e.form.getFieldValue("spec_type"),expression:"form.getFieldValue('spec_type') == 20"}]},[a("MultiSpec",{ref:"MultiSpec"})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:10==e.form.getFieldValue("spec_type"),expression:"form.getFieldValue('spec_type') == 10"}]},[a("a-form-item",{attrs:{label:"藏品价格",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"藏品的实际购买金额，最低0.01"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["goods_price_min",{initialValue:1,rules:[{required:!0,message:"请输入藏品价格"}]}],expression:"['goods_price_min', { initialValue: 1, rules: [{ required: true, message: '请输入藏品价格' }] }]"}],attrs:{min:.01,precision:2}}),a("span",{staticClass:"ml-10"},[e._v("元")])],1),a("a-form-item",{attrs:{label:"当前库存数量",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"藏品的实际库存数量，为0时用户无法下单"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["stock_num",{initialValue:100,rules:[{required:!0,message:"请输入库存数量"}]}],expression:"['stock_num', { initialValue: 100, rules:[{ required: true, message: '请输入库存数量' }] }]"}],attrs:{min:0,precision:0}}),a("span",{staticClass:"ml-10"},[e._v("件")])],1),a("a-form-item",{attrs:{label:"发行量",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["get_total",{initialValue:0,rules:[{required:!0,message:"请输入发行量"}]}],expression:"['get_total', { initialValue: 0, rules:[{ required: true, message: '请输入发行量' }] }]"}],attrs:{min:0,precision:0}}),a("span",{staticClass:"ml-10"},[e._v("件")])],1)],1),a("a-form-item",{attrs:{label:"库存计算方式",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["deduct_stock_type",{initialValue:10,rules:[{required:!0}]}],expression:"['deduct_stock_type', {initialValue: 10, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:10}},[e._v("下单减库存")]),a("a-radio",{attrs:{value:20}},[e._v("付款减库存")])],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.tabKey,expression:"tabKey == 2"}],staticClass:"tab-pane"},[a("a-form-item",{attrs:{label:"藏品详情",labelCol:e.labelCol,wrapperCol:{span:16}}},[a("Ueditor",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{rules:[{required:!0,message:"藏品详情不能为空"}]}],expression:"['content', { rules: [{ required: true, message: '藏品详情不能为空' }] }]"}]})],1)],1)]),a("a-form-item",{staticClass:"mt-20",attrs:{"wrapper-col":{span:e.wrapperCol.span,offset:e.labelCol.span}}},[a("a-button",{attrs:{type:"primary","html-type":"submit",loading:e.isBtnLoading}},[e._v("提交")])],1)],1)],1)],1)},i=[],o=(a("c975"),a("b64b"),a("d3b7"),a("d084")),s=a("2af9"),l=a("e1fe"),n=a("964c"),u={components:{SelectImage:s["d"],SelectVideo:s["e"],Ueditor:s["f"],InputNumberGroup:s["b"],MultiSpec:n["a"]},data:function(){return{tabKey:0,startTime:null,overTime:null,labelCol:{span:3},wrapperCol:{span:10},isLoading:!1,type:"time",isBtnLoading:!1,add:"",form:this.$form.createForm(this),formData:l["a"].formData}},created:function(){var e=this;this.isLoading=!0,l["a"].getFromData().then((function(){e.isLoading=!1}))},methods:{onForceUpdate:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$forceUpdate(),t&&setTimeout((function(){e.$forceUpdate()}),10)},handleTabs:function(e){this.tabKey=e},onReloadCategoryList:function(){var e=this;this.isLoading=!0,l["a"].getCategoryList().then((function(){e.isLoading=!1}))},onReloadServiceList:function(){var e=this;this.isLoading=!0,l["a"].getServiceList().then((function(){e.isLoading=!1}))},onReloadDeliveryList:function(){var e=this;this.isLoading=!0,l["a"].getDeliveryList().then((function(){e.isLoading=!1}))},handleSubmit:function(e){var t=this;e.preventDefault();var a=this.form.validateFields;a((function(e,a){if(e)return t.onTargetTabError(e),!1;if(20===a.spec_type){var r=t.$refs.MultiSpec;if(!r.verifyForm())return t.tabKey=1,!1;a.specData=r.getFromSpecData()}return a.probability=t.add,a.categorys=[10001],a.categoryIds=[10001],a.is_enable_grade=0,a.goods_weight=0,a.spec_type=10,a.is_points_gift=1,a.delivery_id=10001,a.is_points_discount=1,a.serviceIds=[10001,10003],a.goods_price=0,t.onFormSubmit(a),!0}))},onTargetTabError:function(e){var t=[["goods_name","categorys","imagesIds","delivery_id"],["spec_type","goods_price_min"],["content"],["alone_grade_equity","first_money","second_money","third_money"]],a=Object.keys(e).shift();for(var r in t)if(t[r].indexOf(a)>-1){this.tabKey=parseInt(r);break}},onFormSubmit:function(e){var t=this;this.isLoading=!0,this.isBtnLoading=!0,o["b"]({form:e}).then((function(e){t.$message.success(e.message,1.5),setTimeout((function(){t.$router.push("./index")}),1500)})).catch((function(){t.isBtnLoading=!1})).finally((function(){t.isLoading=!1}))}}},c=u,d=(a("f3064"),a("2877")),m=Object(d["a"])(c,r,i,!1,null,"f40e29be",null);t["default"]=m.exports},b758:function(e,t,a){},bc26:function(e,t,a){"use strict";var r=a("063d"),i=a.n(r);i.a},c1df6:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),a("a-spin",{attrs:{spinning:e.isLoading}},[a("a-form",{attrs:{form:e.form,selfUpdate:!0},on:{submit:e.handleSubmit}},[a("a-tabs",{attrs:{activeKey:e.tabKey,tabBarStyle:{marginBottom:"30px"}},on:{change:e.handleTabs}},[a("a-tab-pane",{key:0,attrs:{tab:"基本信息"}}),a("a-tab-pane",{key:1,attrs:{tab:"规格/库存"}}),a("a-tab-pane",{key:2,attrs:{tab:"商品详情"}})],1),a("div",{staticClass:"tabs-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.tabKey,expression:"tabKey == 0"}],staticClass:"tab-pane"},[a("a-form-item",{attrs:{label:"藏品名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goods_name",{rules:[{required:!0,min:2,message:"请输入至少2个字符"}]}],expression:"['goods_name', { rules: [{ required: true, min: 2, message: '请输入至少2个字符' }] }]"}],attrs:{placeholder:"请输入藏品名称"}})],1),a("a-form-item",{attrs:{label:"藏品分类",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["categorys",{rules:[{required:!0,message:"请至少选择1个藏品分类"}]}],expression:"['categorys', { rules: [{required: true, message: '请至少选择1个藏品分类'}]}]"}],attrs:{placeholder:"请选择藏品分类",dropdownStyle:{maxHeight:"500px",overflow:"auto"},treeData:e.formData.categoryList,treeCheckable:"",treeCheckStrictly:"",allowClear:""}}),a("div",{staticClass:"form-item-help"},[a("router-link",{attrs:{target:"_blank",to:{path:"/goods/category/index"}}},[e._v("去新增")]),a("a",{attrs:{href:"javascript:;"},on:{click:e.onReloadCategoryList}},[e._v("刷新")])],1)],1),a("a-form-item",{attrs:{label:"藏品图片",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"建议尺寸：750*750像素, 首张作为藏品图片显示"}},[a("SelectImage",{directives:[{name:"decorator",rawName:"v-decorator",value:["imagesIds",{rules:[{required:!0,message:"请至少上传1张藏品图片"}]}],expression:"['imagesIds', { rules: [{ required: true, message: '请至少上传1张藏品图片' }] }]"}],attrs:{multiple:"",defaultList:e.formData.goods.goods_images}})],1),a("a-form-item",{attrs:{label:"封面图片",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"建议尺寸：750*750像素, 作为藏品图片显示"}},[a("SelectImage",{directives:[{name:"decorator",rawName:"v-decorator",value:["cover_id"],expression:"['cover_id']"}],attrs:{multiple:"",defaultList:e.formData.goods.cover_path}})],1),a("a-form-item",{attrs:{label:"是否可挂售",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["isresale",{initialValue:2,rules:[{required:!0}]}],expression:"['isresale', {initialValue: 2, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:1}},[e._v("是")]),a("a-radio",{attrs:{value:2}},[e._v("否")])],1)],1),a("a-form-item",{attrs:{label:"是否可转增",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["isgive",{initialValue:2,rules:[{required:!0}]}],expression:"['isgive', {initialValue: 2, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:1}},[e._v("是")]),a("a-radio",{attrs:{value:2}},[e._v("否")])],1)],1),a("a-form-item",{attrs:{label:"藏品状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:10,rules:[{required:!0}]}],expression:"['status', {initialValue: 10, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:10}},[e._v("上架")]),a("a-radio",{attrs:{value:20}},[e._v("下架")])],1)],1),a("a-form-item",{attrs:{label:"是否限量",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["is_limit",{initialValue:0,rules:[{required:!0}]}],expression:"['is_limit', {initialValue: 0, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:0}},[e._v("否")]),a("a-radio",{attrs:{value:1}},[e._v("是")])],1)],1),a("a-form-item",{attrs:{label:"是否珍藏版",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["is_hide",{initialValue:0,rules:[{required:!0}]}],expression:"['is_hide', {initialValue: 0, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:0}},[e._v("否")]),a("a-radio",{attrs:{value:1}},[e._v("是")])],1)],1),a("a-form-item",{attrs:{label:"是否上链",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["is_sl",{initialValue:0,rules:[{required:!0}]}],expression:"['is_sl', {initialValue: 0, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:0}},[e._v("上")]),a("a-radio",{attrs:{value:1}},[e._v("不上")])],1)],1),a("a-form-item",{attrs:{label:"会员标签",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["is_user",{initialValue:0,rules:[{required:!0}]}],expression:"['is_user', {initialValue: 0, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:0}},[e._v("否")]),a("a-radio",{attrs:{value:1}},[e._v("是")])],1)],1),a("a-form-item",{attrs:{label:"藏品类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{initialValue:0,rules:[{required:!0}]}],expression:"['type', {initialValue: 0, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:0}},[e._v("普通藏品")]),a("a-radio",{attrs:{value:1}},[e._v("碎片藏品")]),a("a-radio",{attrs:{value:2}},[e._v("空投藏品")]),a("a-radio",{attrs:{value:3}},[e._v("抽签藏品")])],1)],1),a("a-form-item",{attrs:{label:"藏品属性",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["is_box",{initialValue:0,rules:[{required:!0}]}],expression:"['is_box', {initialValue: 0, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:0}},[e._v("普通")]),a("a-radio",{attrs:{value:1}},[e._v("盲盒")])],1)],1),a("a-form-item",{attrs:{label:"优先购状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["first",{initialValue:0,rules:[{required:!0}]}],expression:"['first', {initialValue: 0, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:0}},[e._v("关闭")]),a("a-radio",{attrs:{value:1}},[e._v("开启")])],1)],1),a("a-form-item",{attrs:{label:"是否快照",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["hot_type",{initialValue:0,rules:[{required:!0}]}],expression:"['hot_type', {initialValue: 0, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:0}},[e._v("不快照")]),a("a-radio",{attrs:{value:1}},[e._v("快照")])],1)],1),a("a-form-item",{attrs:{label:"限价",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input-number",{staticStyle:{width:"200px"},model:{value:e.limit_price,callback:function(t){e.limit_price=t},expression:"limit_price"}})],1),a("a-form-item",{attrs:{label:"限购",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input-number",{staticStyle:{width:"200px"},model:{value:e.get_limit,callback:function(t){e.get_limit=t},expression:"get_limit"}})],1),a("a-form-item",{attrs:{label:"发行量",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input-number",{staticStyle:{width:"200px"},model:{value:e.get_total,callback:function(t){e.get_total=t},expression:"get_total"}})],1),a("a-form-item",{attrs:{label:"虚拟发行量",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input-number",{staticStyle:{width:"200px"},model:{value:e.xn_sale,callback:function(t){e.xn_sale=t},expression:"xn_sale"}})],1),a("a-form-item",{attrs:{label:"优先购时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input-number",{staticStyle:{width:"200px"},model:{value:e.souTime,callback:function(t){e.souTime=t},expression:"souTime"}}),a("span",{staticClass:"ml-10"},[e._v("小时")]),a("div",{staticClass:"form-item-help"},[a("p",{staticClass:"extra"},[e._v("注：请填写整数字0~100，例：1，即提前一小时可购买")])])],1),a("a-form-item",{attrs:{label:"快照时间段",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-date-picker",{staticStyle:{width:"20%"},attrs:{showTime:"",format:"HH:mm:ss",placeholder:"请输入开始日期"},on:{change:e.changehot_starttime},model:{value:e.hot_starttime,callback:function(t){e.hot_starttime=t},expression:"hot_starttime"}}),a("p"),a("a-date-picker",{staticStyle:{width:"20%"},attrs:{showTime:"",format:"HH:mm:ss",placeholder:"请输入结束日期"},on:{change:e.changehot_endtime},model:{value:e.hot_endtime,callback:function(t){e.hot_endtime=t},expression:"hot_endtime"}})],1),a("a-form-item",{attrs:{label:"优先购指定拥有藏品",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary"},on:{click:e.change}},[e._v("选择商品")])],1),""!=e.arr?a("div",{staticStyle:{width:"100%",height:"100%",padding:"20px 30px 60px 120px",display:"flex","flex-wrap":"wrap"}},e._l(e.arr,(function(t,r){return a("div",{key:r,staticStyle:{padding:"20px"}},[a("div",{staticStyle:{width:"80px",height:"80px"}},[a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.goods_image}})]),a("div",{staticStyle:{color:"#000",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","max-width":"76px","text-align":"center"}},[e._v(" "+e._s(t.goods_name)+" ")]),a("div",{staticStyle:{"text-align":"center"}},[e._v("ID:"+e._s(t.goods_id))])])})),0):e._e(),a("a-form-item",{attrs:{label:"快照指定藏品",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary"},on:{click:e.changeKuai}},[e._v("选择商品")])],1),""!=e.arrKuai?a("div",{staticStyle:{width:"100%",height:"100%",padding:"20px 30px 60px 120px",display:"flex","flex-wrap":"wrap"}},e._l(e.arrKuai,(function(t,r){return a("div",{key:r,staticStyle:{padding:"20px"}},[a("div",{staticStyle:{width:"80px",height:"80px"}},[a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.goods_image}})]),a("div",{staticStyle:{color:"#000",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","max-width":"76px","text-align":"center"}},[e._v(" "+e._s(t.goods_name))]),a("div",{staticStyle:{"text-align":"center"}},[e._v("ID:"+e._s(t.goods_id))])])})),0):e._e(),a("a-form-item",{attrs:{label:"链上标识",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{attrs:{placeholder:"请输入链上标识"},model:{value:e.logo,callback:function(t){e.logo=t},expression:"logo"}})],1),a("a-form-item",{attrs:{label:"开售时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"请输入日期"},on:{change:e.changeTime},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}})],1),a("a-form-item",{attrs:{label:"抽签时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"请输入日期"},on:{change:e.changemakeTime},model:{value:e.maketime,callback:function(t){e.maketime=t},expression:"maketime"}})],1),a("a-form-item",{attrs:{label:"结束时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"请输入日期"},on:{change:e.changeendTime},model:{value:e.endtime,callback:function(t){e.endtime=t},expression:"endtime"}})],1),a("a-form-item",{attrs:{label:"验签时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"请输入日期"},on:{change:e.changepublishTime},model:{value:e.publishtime,callback:function(t){e.publishtime=t},expression:"publishtime"}})],1),a("a-form-item",{attrs:{label:"藏品排序",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"数字越小越靠前"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:100,rules:[{required:!0}]}],expression:"['sort', {initialValue: 100, rules:[{ required: true }]}]"}],attrs:{min:0}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.tabKey,expression:"tabKey == 1"}],staticClass:"tab-pane"},[a("a-form-item",{attrs:{label:"规格类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["spec_type",{initialValue:10,rules:[{required:!0}]}],expression:"['spec_type', {initialValue: 10, rules: [{ required: true }]}]"}],on:{change:function(t){return e.onForceUpdate()}}},[a("a-radio",{attrs:{value:10}},[e._v("单规格")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:20==e.form.getFieldValue("spec_type"),expression:"form.getFieldValue('spec_type') == 20"}]},[a("MultiSpec",{ref:"MultiSpec",attrs:{defaultSpecList:e.formData.goods.specList,defaultSkuList:e.formData.goods.skuList}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:10==e.form.getFieldValue("spec_type"),expression:"form.getFieldValue('spec_type') == 10"}]},[a("a-form-item",{attrs:{label:"藏品价格",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"商品的实际购买金额，最低0.01"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["goods_price",{rules:[{required:!0,message:"请输入藏品价格"}]}],expression:"['goods_price', { rules:[{ required: true, message: '请输入藏品价格' }] }]"}],attrs:{min:.01,precision:2}}),a("span",{staticClass:"ml-10"},[e._v("元")])],1),a("a-form-item",{attrs:{label:"费率",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input-number",{attrs:{precision:2},model:{value:e.rate,callback:function(t){e.rate=t},expression:"rate"}})],1),a("a-form-item",{attrs:{label:"作者",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{attrs:{precision:2},model:{value:e.author,callback:function(t){e.author=t},expression:"author"}})],1),a("a-form-item",{attrs:{label:"发行方",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{attrs:{precision:2},model:{value:e.c_name,callback:function(t){e.c_name=t},expression:"c_name"}})],1),a("a-form-item",{attrs:{label:"赠送藏品券",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["give_num",{initialValue:1,rules:[{required:!0,message:"请输入赠送藏品券"}]}],expression:"['give_num', { initialValue: 1, rules: [{ required: true, message: '请输入赠送藏品券' }] }]"}],attrs:{precision:2}})],1),a("a-form-item",{attrs:{label:"销量",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sales_actual",{initialValue:1,rules:[{required:!0,message:"请输入销量"}]}],expression:"['sales_actual', { initialValue: 1, rules: [{ required: true, message: '请输入销量' }] }]"}]})],1),a("a-form-item",{attrs:{label:"当前库存数量",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"商品的实际库存数量，为0时用户无法下单"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["stock_num",{initialValue:100,rules:[{required:!0,message:"请输入库存数量"}]}],expression:"['stock_num', { initialValue: 100, rules:[{ required: true, message: '请输入库存数量' }] }]"}],attrs:{min:0,precision:0}}),a("span",{staticClass:"ml-10"},[e._v("件")])],1)],1),a("a-form-item",{attrs:{label:"库存计算方式",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["deduct_stock_type",{initialValue:10,rules:[{required:!0}]}],expression:"['deduct_stock_type', {initialValue: 10, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:10}},[e._v("下单减库存")]),a("a-radio",{attrs:{value:20}},[e._v("付款减库存")])],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.tabKey,expression:"tabKey == 2"}],staticClass:"tab-pane"},[a("a-form-item",{attrs:{label:"藏品详情",labelCol:e.labelCol,wrapperCol:{span:16}}},[a("Ueditor",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{rules:[{required:!0,message:"藏品详情不能为空"}]}],expression:"['content', {rules: [{required: true, message: '藏品详情不能为空'}]}]"}]})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:3==e.tabKey,expression:"tabKey == 3"}],staticClass:"tab-pane"},[a("a-form-model-item",{attrs:{label:"文件选择"}},[a("a-upload",{attrs:{"before-upload":e.beforeUpload,remove:e.handleRemove,multiple:!1,"file-list":e.fileList}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),e._v(" 上传glb格式图片,限制一张 ")],1)],1)],1),""!=e.file_path?a("a-form-item",[a("a-button",[e._v(" 已上传 ")])],1):e._e()],1)]),a("a-form-item",{staticClass:"mt-20",attrs:{"wrapper-col":{span:e.wrapperCol.span,offset:e.labelCol.span}}},[a("a-button",{attrs:{type:"primary","html-type":"submit",loading:e.isBtnLoading}},[e._v("提交")])],1)],1)],1),a("EditForm",{ref:"EditForm",attrs:{categoryList:e.shopArr,type:!0},on:{result:e.newResult}}),a("EditForm",{ref:"EditFormKuai",attrs:{categoryList:e.shopArrKuai},on:{result:e.newResultKuai}})],1)},i=[],o=(a("4160"),a("c975"),a("d81d"),a("fb6a"),a("a434"),a("b64b"),a("d3b7"),a("159b"),a("96cf"),a("1da1")),s=a("d084"),l=a("f585"),n=a("d292"),u=a("c1df"),c=a.n(u),d=a("2af9"),m=a("e1fe"),p=a("8430"),f=a("ca00"),h={components:{SelectImage:d["d"],SelectVideo:d["e"],Ueditor:d["f"],InputNumberGroup:d["b"],MultiSpec:p["a"],EditForm:n["a"]},data:function(){return{tabKey:0,labelCol:{span:3},wrapperCol:{span:10},fileList:[],goods_address:"",logo:"",isLoading:!1,startTime:null,endtime:null,maketime:null,publishtime:null,hot_starttime:null,hot_endtime:null,overTime:null,isBtnLoading:!1,author:"",rate:0,c_name:"",form:this.$form.createForm(this),goodsId:null,formData:m["a"].formData,uploading:[],file_path:"",shopArr:[],shopArrKuai:[],arr:[],arrKuai:[],souTime:"",get_limit:0,limit_price:0,get_total:0,xn_sale:0}},created:function(){this.initData()},beforeDestroy:function(){m["a"].formData.goods={}},methods:{change:function(){this.$refs.EditForm.edit(this.shopArr)},changeKuai:function(){this.$refs.EditFormKuai.edit(this.shopArrKuai)},newResult:function(e){this.arr=e},newResultKuai:function(e){this.arrKuai=e},initData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.goodsId=e.$route.query.goodsId,e.isLoading=!0,t.next=4,m["a"].getFromData(e.goodsId).then((function(t){Object(f["f"])(e.form.getFieldsValue())||e.form.setFieldsValue(m["a"].getFieldsValue());var a=new Date,r={year:a.getFullYear(),month:a.getMonth()+1,date:a.getDate()},i=r.year+"-0"+r.month+"-0"+r.date;e.isLoading=!1,e.startTime=e.formData.goods.startTime,e.endtime=e.formData.goods.endtime?e.formData.goods.endtime:null,e.maketime=e.formData.goods.maketime?e.formData.goods.maketime:null,e.publishtime=e.formData.goods.publishtime?e.formData.goods.publishtime:null,e.hot_endtime=e.formData.goods.hot_endtime?i+" "+e.formData.goods.hot_endtime:null,e.hot_starttime=e.formData.goods.hot_starttime?i+" "+e.formData.goods.hot_starttime:null,e.author=e.formData.goods.author,e.rate=e.formData.goods.rate,e.c_name=e.formData.goods.c_name,e.goods_address=e.formData.goods.goods_address,e.logo=e.formData.goods.logo,e.type=e.formData.goods.type,e.isresale=e.formData.goods.isresale,e.isgive=e.formData.goods.isgive,e.is_limit=e.formData.goods.is_limit,e.is_hide=e.formData.goods.is_hide,e.file_path=e.formData.file_path,e.souTime=e.formData.goods.first_time,e.get_limit=e.formData.goods.get_limit?e.formData.goods.get_limit:0,e.limit_price=e.formData.goods.limit_price?e.formData.goods.limit_price:0,e.get_total=e.formData.goods.get_total?e.formData.goods.get_total:0,e.xn_sale=e.formData.goods.xn_sale?e.formData.goods.xn_sale:0}));case 4:return t.next=6,l["f"]().then((function(t){var a=Object.assign([],t.data.list);1==e.formData.goods.first?(a.forEach((function(t,a){for(var r in t.show=!1,t.num=e.formData.goods.first_goods_num[t.goods_id]?e.formData.goods.first_goods_num[t.goods_id]+"":"1",e.formData.goods.first_goods_id)t.goods_id==e.formData.goods.first_goods_id[r]&&(t.show=!0,e.arr.push(t))})),e.shopArr=a):(a.forEach((function(e,t){e.show=!1,e.num="1"})),e.shopArr=a)}));case 6:return t.next=8,l["f"]().then((function(t){var a=Object.assign([],t.data.list);1==e.formData.goods.hot_type?(a.forEach((function(t,a){for(var r in t.show=!1,e.formData.goods.hot_ids)t.goods_id==e.formData.goods.hot_ids[r]&&(t.show=!0,e.arrKuai.push(t))})),e.shopArrKuai=a):(a.forEach((function(e,t){e.show=!1})),e.shopArrKuai=a)}));case 8:case"end":return t.stop()}}),t)})))()},beforeUpload:function(e){var t=this;this.fileList=[e],this.isLoading=!0,this.uploading.push(!0);var a=new FormData;a.append("iFile",e),s["c"](a).then((function(e){t.file_path=e.data.fileInfo.file_path})).finally((function(e){t.uploading.pop(),0===t.uploading.length&&(t.isLoading=!1)}))},handleRemove:function(e){var t=this.fileList.indexOf(e),a=this.fileList.slice();a.splice(t,1),this.fileList=a},changeTime:function(e){var t=c()(e).format("YYYY-MM-DD HH:mm:ss");this.startTime=t},changeendTime:function(e){var t=c()(e).format("YYYY-MM-DD HH:mm:ss");this.endtime=t},changemakeTime:function(e){var t=c()(e).format("YYYY-MM-DD HH:mm:ss");this.maketime=t},changepublishTime:function(e){var t=c()(e).format("YYYY-MM-DD HH:mm:ss");this.publishtime=t},changehot_starttime:function(e){var t=c()(e).format("YYYY-MM-DD HH:mm:ss");this.hot_starttime=t},changehot_endtime:function(e){var t=c()(e).format("YYYY-MM-DD HH:mm:ss");this.hot_endtime=t},onForceUpdate:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$forceUpdate(),t&&setTimeout((function(){e.$forceUpdate()}),10)},handleTabs:function(e){this.tabKey=e},onReloadCategoryList:function(){var e=this;this.isLoading=!0,m["a"].getCategoryList().then((function(){e.isLoading=!1}))},onReloadServiceList:function(){var e=this;this.isLoading=!0,m["a"].getServiceList().then((function(){e.isLoading=!1}))},onReloadDeliveryList:function(){var e=this;this.isLoading=!0,m["a"].getDeliveryList().then((function(){e.isLoading=!1}))},handleSubmit:function(e){var t=this;e.preventDefault();var a=this.form.validateFields;if(null==this.startTime)return this.$message.error("请选择开售时间",1.5);a((function(e,a){if(3==a.type){if(null==t.maketime)return t.$message.error("请选择抽签时间",1.5);if(null==t.endtime)return t.$message.error("请选择结束时间",1.5);if(null==t.publishtime)return t.$message.error("请选择验签时间",1.5)}if(e)return t.onTargetTabError(e),!1;if(20===a.spec_type){var r=t.$refs.MultiSpec;if(!r.verifyForm())return t.tabKey=1,!1;if(1==a.first&&null==t.souTime)return t.$message.error("请添加优先购提前时间",1.5);if(1==a.first&&""==t.arr)return t.$message.error("请选择优先购指定藏品",1.5);a.specData=r.getFromSpecData()}a.first_goods_id=t.arr.map((function(e){return e.goods_id})),a.first_time=t.souTime,a.categoryIds=a.categorys.map((function(e){return e.value})),a.is_enable_grade=0,a.goods_weight=0,a.spec_type=10,a.is_points_gift=1,a.delivery_id=10001,a.is_points_discount=1,a.serviceIds=[10001,10003],a.startTime=t.startTime,a.endtime=t.endtime,a.maketime=t.maketime,a.publishtime=t.publishtime,a.hot_endtime=t.hot_endtime?t.hot_endtime.substring(t.hot_endtime.indexOf(" ")+1):0,a.hot_starttime=t.hot_starttime?t.hot_starttime.substring(t.hot_starttime.indexOf(" ")+1):0,a.author=t.author,a.rate=t.rate,a.c_name=t.c_name,a.goods_address=t.goods_address,a.logo=t.logo,a.file_path=t.file_path,a.get_limit=t.get_limit?t.get_limit:0,a.limit_price=t.limit_price?t.limit_price:0,a.get_total=t.get_total?t.get_total:0,a.xn_sale=t.xn_sale?t.xn_sale:0;var i=[];return t.arrKuai.forEach((function(e,t){i.push(e.goods_id)})),a.hot_ids=i,t.onFormSubmit(a),!0}))},onTargetTabError:function(e){var t=[["goods_name","categorys","imagesIds","cover_id","delivery_id","endtime","maketime","publishtime","hot_endtime","hot_starttime","hot_type"],["spec_type","goods_price"],["content"],["alone_grade_equity","first_money","second_money","third_money"]],a=Object.keys(e).shift();for(var r in t)if(t[r].indexOf(a)>-1){this.tabKey=parseInt(r);break}},onFormSubmit:function(e){var t=this;this.isLoading=!0,this.isBtnLoading=!0,s["i"]({goodsId:this.goodsId,form:e}).then((function(e){t.$message.success(e.message,1.5),setTimeout((function(){t.$router.push("./index")}),1500)})).catch((function(){t.isBtnLoading=!1})).finally((function(){t.isLoading=!1}))}}},g=h,v=(a("bc26"),a("2877")),b=Object(v["a"])(g,r,i,!1,null,"16357efa",null);t["default"]=b.exports},c4cb:function(e,t,a){"use strict";var r=a("1c29"),i=a.n(r);i.a},c9ef:function(e,t,a){"use strict";var r=a("18af"),i=a.n(r);i.a},d292:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"选择藏品",width:1040,visible:e.visible,confirmLoading:e.confirmLoading,maskClosable:!1,destroyOnClose:!0},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[e.categoryList?a("div",{staticStyle:{width:"100%",height:"100%",padding:"20px 30px",display:"flex","flex-wrap":"wrap"}},e._l(e.categoryList,(function(t,r){return a("div",{staticStyle:{padding:"20px"}},[a("a-radio-group",{attrs:{name:"radioGroup","default-value":0},model:{value:e.form.zhangqi,callback:function(t){e.$set(e.form,"zhangqi",t)},expression:"form.zhangqi"}},[a("a-radio",{staticStyle:{"margin-left":"29px","margin-bottom":"10px"},attrs:{value:t.show?0:1},on:{click:function(t){return e.change(r)}}}),a("div",{staticStyle:{width:"80px",height:"80px"}},[a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.goods_image}})]),a("div",{staticStyle:{color:"#000",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","max-width":"76px","text-align":"center"}},[e._v(" "+e._s(t.goods_name)+" ")]),a("div",{staticStyle:{"text-align":"center"}},[e._v("ID:"+e._s(t.goods_id))]),e.type?a("div",{staticStyle:{width:"80px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.num,expression:"item.num"}],staticStyle:{width:"100%",border:"1px solid #ccc","font-size":"12px","border-radius":"2px"},attrs:{type:"number",placeholder:"数量"},domProps:{value:t.num},on:{input:function(a){a.target.composing||e.$set(t,"num",a.target.value)}}})]):e._e()],1)],1)})),0):e._e()])},i=[],o=(a("99af"),a("4160"),a("d3b7"),a("159b"),a("2ef0")),s=a.n(o),l=a("2f71"),n=a("2af9"),u=a("8243"),c={components:{SelectImage:n["d"]},props:{categoryList:{type:Array,required:!0},type:{type:Boolean,default:!1}},data:function(){return{title:"",changeIndex:0,labelCol:{span:7},wrapperCol:{span:13},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),categoryListTree:[],record:{}}},methods:{change:function(e){this.categoryList[e].show=!this.categoryList[e].show},edit:function(e){this.visible=!0,this.record=e,this.getCategoryList(),this.setFieldsValue()},setFieldsValue:function(){var e=this.record,t=this.form.setFieldsValue;this.$nextTick((function(){t(s.a.pick(e,["name","parent_id","image_id","status","sort"]))}))},getCategoryList:function(){var e=this.categoryList,t=u["a"].formatTreeData(e);this.categoryListTree=[{title:"顶级分类",key:0,value:0}].concat(t)},handleSubmit:function(e){var t=[];this.categoryList.forEach((function(e){e.show&&t.push(e)})),this.$emit("result",t),this.handleCancel()},handleCancel:function(){this.visible=!1,this.form.resetFields()},onFormSubmit:function(e){var t=this;this.confirmLoading=!0,l["d"]({categoryId:this.record["category_id"],form:e}).then((function(e){t.$message.success(e.message,1.5),t.handleCancel()})).finally((function(e){t.confirmLoading=!1}))}}},d=c,m=a("2877"),p=Object(m["a"])(d,r,i,!1,null,null,null);t["a"]=p.exports},d6af:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"选择盲盒",width:1040,visible:e.visible,confirmLoading:e.confirmLoading,maskClosable:!1,destroyOnClose:!0},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[e.categoryList?a("div",{staticStyle:{width:"100%",height:"100%",padding:"20px 30px",display:"flex","flex-wrap":"wrap"}},e._l(e.categoryList,(function(t,r){return a("div",{staticStyle:{padding:"20px"},on:{click:function(t){return e.change(r)}}},[a("a-radio-group",{attrs:{name:"radioGroup","default-value":0},model:{value:e.form.zhangqi,callback:function(t){e.$set(e.form,"zhangqi",t)},expression:"form.zhangqi"}},[a("a-radio",{staticStyle:{"margin-left":"29px","margin-bottom":"10px"},attrs:{value:t.show?0:1}}),a("div",{staticStyle:{width:"80px",height:"80px"}},[a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.goods_image}})]),a("div",{staticStyle:{color:"#000",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","max-width":"76px","text-align":"center"}},[e._v(e._s(t.goods_name))]),a("div",{staticStyle:{"text-align":"center"}},[e._v("ID:"+e._s(t.goods_id))]),a("div",{staticStyle:{"text-align":"center"}},[e._v("概率:"+e._s(t.probability))])],1)],1)})),0):e._e()])},i=[],o=(a("99af"),a("4160"),a("d3b7"),a("159b"),a("2ef0")),s=a.n(o),l=a("2f71"),n=a("2af9"),u=a("8243"),c={components:{SelectImage:n["d"]},props:{categoryList:{type:Array,required:!0}},data:function(){return{title:"",changeIndex:0,labelCol:{span:7},wrapperCol:{span:13},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),categoryListTree:[],record:{}}},methods:{change:function(e){this.categoryList[e].show=!this.categoryList[e].show},edit:function(e){this.visible=!0,this.record=e,this.getCategoryList(),this.setFieldsValue()},setFieldsValue:function(){var e=this.record,t=this.form.setFieldsValue;this.$nextTick((function(){t(s.a.pick(e,["name","parent_id","image_id","status","sort"]))}))},getCategoryList:function(){var e=this.categoryList,t=u["a"].formatTreeData(e);this.categoryListTree=[{title:"顶级分类",key:0,value:0}].concat(t)},handleSubmit:function(e){var t=[];this.categoryList.forEach((function(e){e.show&&t.push(e)})),this.$emit("result",t),this.handleCancel()},handleCancel:function(){this.visible=!1,this.form.resetFields()},onFormSubmit:function(e){var t=this;this.confirmLoading=!0,l["d"]({categoryId:this.record["category_id"],form:e}).then((function(e){t.$message.success(e.message,1.5),t.handleCancel()})).finally((function(e){t.confirmLoading=!1}))}}},d=c,m=a("2877"),p=Object(m["a"])(d,r,i,!1,null,null,null);t["a"]=p.exports},e1fe:function(e,t,a){"use strict";a("4de4"),a("4160"),a("d81d"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0");var r=a("5530"),i=a("2ef0"),o=a.n(i),s=a("8243"),l=a("d084"),n=a("3bab"),u=a("2e1c"),c=a("b775"),d={list:"/goods.service/list",all:"/goods.service/all",add:"/goods.service/add",edit:"/goods.service/edit",delete:"/goods.service/delete"};function m(e){return Object(c["b"])({url:d.all,method:"get",params:e})}var p={list:"/setting.delivery/list",all:"/setting.delivery/all",detail:"/setting.delivery/detail",add:"/setting.delivery/add",edit:"/setting.delivery/edit",delete:"/setting.delivery/delete"};function f(e){return Object(c["b"])({url:p.all,method:"get",params:e})}t["a"]={goodsId:null,formData:{goods:{},categoryList:[],deliveryList:[],debList:[],serviceList:[],defaultServiceIds:[],userGradeList:[],defaultUserGradeValue:{}},getFromData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.goodsId=t,new Promise((function(a,r){Promise.all([e.getGoodsDetail(t),e.getCategoryList(),e.getDeliveryList(),e.getDebList(),e.getServiceList(),e.getUserGradeList()]).then((function(){e.setDefaultData(),a({formData:e.formData})}))}))},getFromDatas:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.goodsid=t,new Promise((function(a,r){Promise.all([e.getGoodsDetails(t)]).then((function(){e.setDefaultData(),a({formData:e.formData})}))}))},getGoodsDetails:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!!t&&new Promise((function(a,r){n["f"]({goodsid:t}).then((function(t){e.formData.goods=t.data.goodsInfo,a()}))}))},getGoodsDetail:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!!t&&new Promise((function(a,r){l["h"]({goodsId:t}).then((function(t){e.formData.goods=t.data.goodsInfo,a()}))}))},getFieldsValues:function(){var e=this.formData.goods,t=this.formData.debList;t.debLists=this.formatdebLists(t);var a=o.a.pick(e,["blind_name","content","create_time","goods_ids","id","price","sales","thumb","total","update_time","get_limit","get_total"]);return Object(r["a"])({},a)},getFieldsValue:function(){var e=this.formData.goods,t=this.formData.debList;e.categorys=this.formatCategoryIds(e.categoryIds),t.debLists=this.formatdebLists(t);var a=o.a.pick(e,["is_limit","author","isgive","isresale","is_hide","type","goods_name","categorys","debLists","goods_no","delivery_type","sort","delivery_id","status","spec_type","deduct_stock_type","content","endtime","maketime","publishtime","selling_point","serviceIds","sales_initial","is_points_gift","is_points_discount","is_enable_grade","is_alone_grade","first","goods_price_min","get_limit","hot_type","hot_starttime","hot_endtime","hot_ids","get_total","is_shop","is_box","is_sl","give_num","sales_actual","xn_sale"]),i=o.a.pick(e.skuList[0],["goods_price","line_price","stock_num","goods_weight"]);return Object(r["a"])(Object(r["a"])({},a),i)},formatCategoryIds:function(e){return e.map((function(e){return{value:e}}))},formatdebLists:function(e){return e.map((function(e){return{value:e}}))},getCategoryList:function(){var e=this;return new Promise((function(t,a){s["a"].getCategoryTreeSelect().then((function(a){e.formData.categoryList=a,t()}))}))},getDebList:function(){var e=this;return new Promise((function(t,a){s["a"].getDeb().then((function(a){e.formData.debList=a,t()}))}))},getDeliveryList:function(){var e=this;return new Promise((function(t,a){f().then((function(a){e.formData.deliveryList=a.data.list,t()}))}))},getServiceList:function(){var e=this;return new Promise((function(t,a){m().then((function(a){e.formData.serviceList=a.data.list,t()}))}))},getUserGradeList:function(){var e=this;return new Promise((function(t,a){u["a"]({status:1}).then((function(a){e.formData.userGradeList=a.data.list,t()}))}))},setDefaultData:function(){this.setDefaultServiceIds(),this.setDefaultUserGradeValue()},setDefaultServiceIds:function(){var e=this.formData.serviceList;if(!this.goodsId){var t=e.filter((function(e){return e.is_default}));this.formData.defaultServiceIds=t.map((function(e){return e.service_id}))}},setDefaultUserGradeValue:function(){var e=this.formData.userGradeList,t=this.goodsId&&this.formData.goods.alone_grade_equity?this.formData.goods.alone_grade_equity:{},a={};e.forEach((function(e){a[e.grade_id]=t[e.grade_id]||e.equity.discount})),this.formData.defaultUserGradeValue=Object(r["a"])({},a)}}},ea67:function(e,t,a){},ed02:function(e,t,a){"use strict";var r=a("7190"),i=a.n(r);i.a},f11f:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),a("a-spin",{attrs:{spinning:e.isLoading}},[a("a-form",{attrs:{form:e.form,selfUpdate:!0},on:{submit:e.handleSubmit}},[a("a-tabs",{attrs:{activeKey:e.tabKey,tabBarStyle:{marginBottom:"30px"}},on:{change:e.handleTabs}},[a("a-tab-pane",{key:0,attrs:{tab:"基本信息"}}),a("a-tab-pane",{key:1,attrs:{tab:"规格/库存"}}),a("a-tab-pane",{key:2,attrs:{tab:"藏品详情"}})],1),a("div",{staticClass:"tabs-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.tabKey,expression:"tabKey == 0"}],staticClass:"tab-pane"},[a("a-form-item",{attrs:{label:"藏品名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goods_name",{rules:[{required:!0,min:2,message:"请输入至少2个字符"}]}],expression:"['goods_name', {rules: [{required: true, min: 2, message: '请输入至少2个字符'}]}]"}],attrs:{placeholder:"请输入藏品名称"}})],1),a("a-form-item",{attrs:{label:"藏品分类",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["categorys",{rules:[{required:!0,message:"请至少选择1个藏品分类"}]}],expression:"['categorys', {rules: [{required: true, message: '请至少选择1个藏品分类'}]}]"}],attrs:{placeholder:"请选择藏品分类",dropdownStyle:{maxHeight:"500px",overflow:"auto"},treeData:e.formData.categoryList,treeCheckable:"",treeCheckStrictly:"",allowClear:""}}),a("div",{staticClass:"form-item-help"},[a("router-link",{attrs:{target:"_blank",to:{path:"/goods/category/index"}}},[e._v("去新增")]),a("a",{attrs:{href:"javascript:;"},on:{click:e.onReloadCategoryList}},[e._v("刷新")])],1)],1),a("a-form-item",{attrs:{label:"藏品图片",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"建议尺寸：750*750像素, 首张作为藏品显示图"}},[a("SelectImage",{directives:[{name:"decorator",rawName:"v-decorator",value:["imagesIds",{rules:[{required:!0,message:"请至少上传1张商品图片"}]}],expression:"['imagesIds', {rules: [{required: true, message: '请至少上传1张商品图片'}]}]"}],attrs:{multiple:""}})],1),a("a-form-item",{attrs:{label:"藏品封面",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"建议尺寸：750*750像素, 作为藏品显示图 "}},[a("SelectImage",{directives:[{name:"decorator",rawName:"v-decorator",value:["cover_id"],expression:"['cover_id']"}],attrs:{multiple:""}})],1),a("a-form-item",{attrs:{label:"是否可挂售",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["isresale",{initialValue:2,rules:[{required:!0}]}],expression:"['isresale', {initialValue: 2, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:1}},[e._v("是")]),a("a-radio",{attrs:{value:2}},[e._v("否")])],1)],1),a("a-form-item",{attrs:{label:"是否可转增",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["isgive",{initialValue:2,rules:[{required:!0}]}],expression:"['isgive', {initialValue: 2, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:1}},[e._v("是")]),a("a-radio",{attrs:{value:2}},[e._v("否")])],1)],1),a("a-form-item",{attrs:{label:"藏品状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:10,rules:[{required:!0}]}],expression:"['status', {initialValue: 10, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:10}},[e._v("上架")]),a("a-radio",{attrs:{value:20}},[e._v("下架")])],1)],1),a("a-form-item",{attrs:{label:"是否限量",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["is_limit",{initialValue:0,rules:[{required:!0}]}],expression:"['is_limit', {initialValue: 0, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:0}},[e._v("否")]),a("a-radio",{attrs:{value:1}},[e._v("是")])],1)],1),a("a-form-item",{attrs:{label:"是否珍藏版",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["is_hide",{initialValue:0,rules:[{required:!0}]}],expression:"['is_hide', {initialValue: 0, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:0}},[e._v("否")]),a("a-radio",{attrs:{value:1}},[e._v("是")])],1)],1),a("a-form-item",{attrs:{label:"是否上链",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["is_sl",{initialValue:0,rules:[{required:!0}]}],expression:"['is_sl', {initialValue: 0, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:0}},[e._v("上")]),a("a-radio",{attrs:{value:1}},[e._v("不上")])],1)],1),a("a-form-item",{attrs:{label:"会员标签",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["is_user",{initialValue:0,rules:[{required:!0}]}],expression:"['is_user', {initialValue: 0, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:0}},[e._v("否")]),a("a-radio",{attrs:{value:1}},[e._v("是")])],1)],1),a("a-form-item",{attrs:{label:"藏品类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{initialValue:0,rules:[{required:!0}]}],expression:"['type', {initialValue: 0, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:0}},[e._v("普通藏品")]),a("a-radio",{attrs:{value:1}},[e._v("碎片藏品")]),a("a-radio",{attrs:{value:2}},[e._v("空投藏品")]),a("a-radio",{attrs:{value:3}},[e._v("抽签藏品")])],1)],1),a("a-form-item",{attrs:{label:"藏品属性",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["is_box",{initialValue:0,rules:[{required:!0}]}],expression:"['is_box', {initialValue: 0, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:0}},[e._v("普通")]),a("a-radio",{attrs:{value:1}},[e._v("盲盒")])],1)],1),a("a-form-item",{attrs:{label:"优先购状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["first",{initialValue:0,rules:[{required:!0}]}],expression:"['first', {initialValue: 0, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:0}},[e._v("关闭")]),a("a-radio",{attrs:{value:1}},[e._v("开启")])],1)],1),a("a-form-item",{attrs:{label:"是否快照",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["hot_type",{initialValue:0,rules:[{required:!0}]}],expression:"['hot_type', {initialValue: 0, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:0}},[e._v("不快照")]),a("a-radio",{attrs:{value:1}},[e._v("快照")])],1)],1),a("a-form-item",{attrs:{label:"限价",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input-number",{staticStyle:{width:"200px"},model:{value:e.limit_price,callback:function(t){e.limit_price=t},expression:"limit_price"}})],1),a("a-form-item",{attrs:{label:"限购",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input-number",{staticStyle:{width:"200px"},model:{value:e.get_limit,callback:function(t){e.get_limit=t},expression:"get_limit"}})],1),a("a-form-item",{attrs:{label:"发行量",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input-number",{staticStyle:{width:"200px"},model:{value:e.get_total,callback:function(t){e.get_total=t},expression:"get_total"}})],1),a("a-form-item",{attrs:{label:"虚拟发行量",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input-number",{staticStyle:{width:"200px"},model:{value:e.xn_sale,callback:function(t){e.xn_sale=t},expression:"xn_sale"}})],1),a("a-form-item",{attrs:{label:"优先购时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input-number",{staticStyle:{width:"200px"},model:{value:e.souTime,callback:function(t){e.souTime=t},expression:"souTime"}}),a("span",{staticClass:"ml-10"},[e._v("小时")]),a("div",{staticClass:"form-item-help"},[a("p",{staticClass:"extra"},[e._v("注：请填写整数字0~100，例：1，即提前一小时可购买")])])],1),a("a-form-item",{attrs:{label:"快照时间段",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-date-picker",{staticStyle:{width:"20%"},attrs:{showTime:"",format:"HH:mm:ss",placeholder:"请输入开始日期"},on:{change:e.changehot_starttime},model:{value:e.hot_starttime,callback:function(t){e.hot_starttime=t},expression:"hot_starttime"}}),a("p"),a("a-date-picker",{staticStyle:{width:"20%"},attrs:{showTime:"",format:"HH:mm:ss",placeholder:"请输入结束日期"},on:{change:e.changehot_endtime},model:{value:e.hot_endtime,callback:function(t){e.hot_endtime=t},expression:"hot_endtime"}})],1),a("a-form-item",{attrs:{label:"优先购指定拥有藏品",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary"},on:{click:e.change}},[e._v("选择商品")])],1),""!=e.arr?a("div",{staticStyle:{width:"100%",height:"100%",padding:"20px 30px 60px 120px",display:"flex","flex-wrap":"wrap"}},e._l(e.arr,(function(t,r){return a("div",{key:r,staticStyle:{padding:"20px"}},[a("div",{staticStyle:{width:"80px",height:"80px"}},[a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.goods_image}})]),a("div",{staticStyle:{color:"#000",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","max-width":"76px","text-align":"center"}},[e._v(e._s(t.goods_name))]),a("div",{staticStyle:{"text-align":"center"}},[e._v("ID:"+e._s(t.goods_id))])])})),0):e._e(),a("a-form-item",{attrs:{label:"快照指定藏品",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary"},on:{click:e.changeKuai}},[e._v("选择商品")])],1),""!=e.arrKuai?a("div",{staticStyle:{width:"100%",height:"100%",padding:"20px 30px 60px 120px",display:"flex","flex-wrap":"wrap"}},e._l(e.arrKuai,(function(t,r){return a("div",{key:r,staticStyle:{padding:"20px"}},[a("div",{staticStyle:{width:"80px",height:"80px"}},[a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.goods_image}})]),a("div",{staticStyle:{color:"#000",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","max-width":"76px","text-align":"center"}},[e._v(e._s(t.goods_name))]),a("div",{staticStyle:{"text-align":"center"}},[e._v("ID:"+e._s(t.goods_id))])])})),0):e._e(),a("a-form-item",{attrs:{label:"链上标识",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{attrs:{placeholder:"请输入链上标识"},model:{value:e.logo,callback:function(t){e.logo=t},expression:"logo"}})],1),a("a-form-item",{attrs:{label:"开售时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"请输入日期"},on:{change:e.changeTime},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}})],1),a("a-form-item",{attrs:{label:"抽签时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"请输入日期"},on:{change:e.changemakeTime},model:{value:e.maketime,callback:function(t){e.maketime=t},expression:"maketime"}})],1),a("a-form-item",{attrs:{label:"结束时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"请输入日期"},on:{change:e.changeendTime},model:{value:e.endtime,callback:function(t){e.endtime=t},expression:"endtime"}})],1),a("a-form-item",{attrs:{label:"验签时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"请输入日期"},on:{change:e.changepublishTime},model:{value:e.publishtime,callback:function(t){e.publishtime=t},expression:"publishtime"}})],1),a("a-form-item",{attrs:{label:"藏品排序",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"数字越小越靠前"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:100,rules:[{required:!0}]}],expression:"['sort', {initialValue: 100, rules:[{ required: true }]}]"}],attrs:{min:0}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.tabKey,expression:"tabKey == 1"}],staticClass:"tab-pane"},[a("a-form-item",{attrs:{label:"规格类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["spec_type",{initialValue:10,rules:[{required:!0}]}],expression:"['spec_type', { initialValue: 10, rules: [{ required: true }] }]"}],on:{change:function(t){return e.onForceUpdate()}}},[a("a-radio",{attrs:{value:10}},[e._v("单规格")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:20==e.form.getFieldValue("spec_type"),expression:"form.getFieldValue('spec_type') == 20"}]},[a("MultiSpec",{ref:"MultiSpec"})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:10==e.form.getFieldValue("spec_type"),expression:"form.getFieldValue('spec_type') == 10"}]},[a("a-form-item",{attrs:{label:"藏品价格",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"藏品的实际购买金额，最低0.01"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["goods_price",{initialValue:1,rules:[{required:!0,message:"请输入藏品价格"}]}],expression:"['goods_price', { initialValue: 1, rules: [{ required: true, message: '请输入藏品价格' }] }]"}],attrs:{min:.01,precision:2}}),a("span",{staticClass:"ml-10"},[e._v("元")])],1),a("a-form-item",{attrs:{label:"费率",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input-number",{attrs:{precision:2},model:{value:e.rate,callback:function(t){e.rate=t},expression:"rate"}})],1),a("a-form-item",{attrs:{label:"作者",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{attrs:{precision:2},model:{value:e.author,callback:function(t){e.author=t},expression:"author"}})],1),a("a-form-item",{attrs:{label:"发行方",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{attrs:{precision:2},model:{value:e.c_name,callback:function(t){e.c_name=t},expression:"c_name"}})],1),a("a-form-item",{attrs:{label:"赠送藏品券",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["give_num",{initialValue:0,rules:[{required:!0,message:"请输入赠送藏品券"}]}],expression:"['give_num', { initialValue: 0, rules: [{ required: true, message: '请输入赠送藏品券' }] }]"}],attrs:{precision:2}})],1),a("a-form-item",{attrs:{label:"销量",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sales_actual",{initialValue:1,rules:[{required:!0,message:"请输入销量"}]}],expression:"['sales_actual', { initialValue: 1, rules: [{ required: true, message: '请输入销量' }] }]"}]})],1),a("a-form-item",{attrs:{label:"当前库存数量",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"藏品的实际库存数量，为0时用户无法下单"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["stock_num",{initialValue:100,rules:[{required:!0,message:"请输入库存数量"}]}],expression:"['stock_num', { initialValue: 100, rules:[{ required: true, message: '请输入库存数量' }] }]"}],attrs:{min:0,precision:0}}),a("span",{staticClass:"ml-10"},[e._v("件")])],1)],1),a("a-form-item",{attrs:{label:"库存计算方式",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["deduct_stock_type",{initialValue:10,rules:[{required:!0}]}],expression:"['deduct_stock_type', {initialValue: 10, rules: [{ required: true }]}]"}]},[a("a-radio",{attrs:{value:10}},[e._v("下单减库存")]),a("a-radio",{attrs:{value:20}},[e._v("付款减库存")])],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.tabKey,expression:"tabKey == 2"}],staticClass:"tab-pane"},[a("a-form-item",{attrs:{label:"藏品详情",labelCol:e.labelCol,wrapperCol:{span:16}}},[a("Ueditor",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{rules:[{required:!0,message:"藏品详情不能为空"}]}],expression:"['content', { rules: [{ required: true, message: '藏品详情不能为空' }] }]"}]})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:3==e.tabKey,expression:"tabKey == 3"}],staticClass:"tab-pane"},[a("a-form-model-item",{attrs:{label:"文件选择"}},[a("a-upload",{attrs:{"before-upload":e.beforeUpload,remove:e.handleRemove,multiple:!1,"file-list":e.fileList}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),e._v(" 上传glb格式图片,限制一张 ")],1)],1)],1)],1)]),a("a-form-item",{staticClass:"mt-20",attrs:{"wrapper-col":{span:e.wrapperCol.span,offset:e.labelCol.span}}},[a("a-button",{attrs:{type:"primary","html-type":"submit",loading:e.isBtnLoading}},[e._v("提交")])],1)],1)],1),a("EditForm",{ref:"EditForm",attrs:{categoryList:e.shopArr,type:!0},on:{result:e.newResult}}),a("EditForm",{ref:"EditFormKuai",attrs:{categoryList:e.shopArrKuai},on:{result:e.newResultKuai}})],1)},i=[],o=(a("4160"),a("c975"),a("d81d"),a("fb6a"),a("a434"),a("b64b"),a("d3b7"),a("159b"),a("d084")),s=a("f585"),l=a("d292"),n=a("c1df"),u=a.n(n),c=a("2af9"),d=a("e1fe"),m=a("8430"),p={components:{SelectImage:c["d"],SelectVideo:c["e"],Ueditor:c["f"],InputNumberGroup:c["b"],MultiSpec:m["a"],EditForm:l["a"]},data:function(){return{tabKey:0,startTime:null,endtime:null,maketime:null,publishtime:null,hot_starttime:null,hot_endtime:null,overTime:null,goods_address:"",fileList:[],logo:"",souTime:"",labelCol:{span:3},wrapperCol:{span:10},isLoading:!1,type:"time",author:"",rate:0,c_name:"",isBtnLoading:!1,form:this.$form.createForm(this),formData:d["a"].formData,uploading:[],file_path:"",shopArr:[],shopArrKuai:[],arr:[],arrKuai:[],get_limit:0,limit_price:0,get_total:0,xn_sale:0}},created:function(){var e=this;this.isLoading=!0,d["a"].getFromData().then((function(){e.isLoading=!1})),s["f"]().then((function(t){t.data.list.forEach((function(e){e.show=!1})),t.data.list.map((function(t){t.num="1",e.shopArr.push(t)})),e.shopArrKuai=t.data.list})),s["f"]().then((function(t){t.data.list.forEach((function(e){e.show=!1})),e.shopArrKuai=t.data.list}))},methods:{change:function(){this.$refs.EditForm.edit(this.shopArr)},changeKuai:function(){this.$refs.EditFormKuai.edit(this.shopArrKuai)},onForceUpdate:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$forceUpdate(),t&&setTimeout((function(){e.$forceUpdate()}),10)},newResult:function(e){this.arr=e},newResultKuai:function(e){this.arrKuai=e},beforeUpload:function(e){var t=this;this.fileList=[e],this.isLoading=!0,this.uploading.push(!0);var a=new FormData;a.append("iFile",e),o["c"](a).then((function(e){t.file_path=e.data.fileInfo.file_path})).finally((function(e){t.uploading.pop(),0===t.uploading.length&&(t.isLoading=!1,t.handleRefresh(!0))}))},handleRemove:function(e){var t=this.fileList.indexOf(e),a=this.fileList.slice();a.splice(t,1),this.fileList=a},changeTime:function(e){var t=u()(e).format("YYYY-MM-DD HH:mm:ss");this.startTime=t},changeendTime:function(e){var t=u()(e).format("YYYY-MM-DD HH:mm:ss");this.endtime=t},changemakeTime:function(e){var t=u()(e).format("YYYY-MM-DD HH:mm:ss");this.maketime=t},changepublishTime:function(e){var t=u()(e).format("YYYY-MM-DD HH:mm:ss");this.publishtime=t},changehot_starttime:function(e){var t=u()(e).format("YYYY-MM-DD HH:mm:ss");this.hot_starttime=t},changehot_endtime:function(e){var t=u()(e).format("YYYY-MM-DD HH:mm:ss");this.hot_endtime=t},handleTabs:function(e){this.tabKey=e},handleRefresh:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.onForceUpdate()},onReloadCategoryList:function(){var e=this;this.isLoading=!0,d["a"].getCategoryList().then((function(){e.isLoading=!1}))},onReloadServiceList:function(){var e=this;this.isLoading=!0,d["a"].getServiceList().then((function(){e.isLoading=!1}))},onReloadDeliveryList:function(){var e=this;this.isLoading=!0,d["a"].getDeliveryList().then((function(){e.isLoading=!1}))},handleSubmit:function(e){var t=this;e.preventDefault();var a=this.form.validateFields;if(null==this.startTime)return this.$message.error("请选择开售时间",1.5);a((function(e,a){if(3==a.type){if(null==t.maketime)return t.$message.error("请选择抽签时间",1.5);if(null==t.endtime)return t.$message.error("请选择结束时间",1.5);if(null==t.publishtime)return t.$message.error("请选择验签时间",1.5)}if(e)return t.onTargetTabError(e),!1;if(20===a.spec_type){var r=t.$refs.MultiSpec;if(!r.verifyForm())return t.tabKey=1,!1;a.specData=r.getFromSpecData()}if(1==a.first&&null==t.souTime)return t.$message.error("请添加优先购提前时间",1.5);if(1==a.first&&""==t.arr)return t.$message.error("请选择优先购指定藏品",1.5);var i=[];t.arr.forEach((function(e){var t={};t[e.goods_id]=1*e.num,i.push(t)})),a.first_goods_num=i,a.first_goods_id=t.arr.map((function(e){return e.goods_id})),a.first_time=t.souTime,a.categoryIds=a.categorys.map((function(e){return e.value})),a.is_enable_grade=0,a.goods_weight=0,a.spec_type=10,a.is_points_gift=1,a.delivery_id=10001,a.is_points_discount=1,a.serviceIds=[10001,10003],a.startTime=t.startTime,a.endtime=t.endtime,a.maketime=t.maketime,a.publishtime=t.publishtime,a.hot_endtime=t.hot_endtime?t.hot_endtime.substring(t.hot_endtime.indexOf(" ")+1):0,a.hot_starttime=t.hot_starttime?t.hot_starttime.substring(t.hot_starttime.indexOf(" ")+1):0,a.author=t.author,a.rate=t.rate,a.c_name=t.c_name,a.goods_address=t.goods_address,a.logo=t.logo,a.file_path=t.file_path,a.get_limit=t.get_limit?t.get_limit:0,a.limit_price=t.limit_price?t.limit_price:0,a.get_total=t.get_total?t.get_total:0,a.xn_sale=t.xn_sale?t.xn_sale:0;var o=[];return t.arrKuai.forEach((function(e,t){o.push(e.goods_id)})),a.hot_ids=o,t.onFormSubmit(a),!0}))},onTargetTabError:function(e){var t=[["goods_name","categorys","imagesIds","cover_id","delivery_id","endtime","maketime","publishtime","hot_endtime","hot_starttime","hot_type"],["spec_type","goods_price"],["content"],["alone_grade_equity","first_money","second_money","third_money"]],a=Object.keys(e).shift();for(var r in t)if(t[r].indexOf(a)>-1){this.tabKey=parseInt(r);break}},onFormSubmit:function(e){var t=this;this.isLoading=!0,this.isBtnLoading=!0,o["a"]({form:e}).then((function(e){t.$message.success(e.message,1.5),setTimeout((function(){t.$router.push("./index")}),1500)})).catch((function(){t.isBtnLoading=!1})).finally((function(){t.isLoading=!1}))}}},f=p,h=(a("673d"),a("2877")),g=Object(h["a"])(f,r,i,!1,null,"1022cfaa",null);t["default"]=g.exports},f3064:function(e,t,a){"use strict";var r=a("7a0e"),i=a.n(r);i.a},f585:function(e,t,a){"use strict";a.d(t,"g",(function(){return s})),a.d(t,"a",(function(){return l})),a.d(t,"f",(function(){return n})),a.d(t,"c",(function(){return u})),a.d(t,"h",(function(){return c})),a.d(t,"d",(function(){return d})),a.d(t,"i",(function(){return m})),a.d(t,"b",(function(){return p})),a.d(t,"e",(function(){return f})),a.d(t,"k",(function(){return h})),a.d(t,"j",(function(){return g}));var r=a("5530"),i=a("b775"),o={detail:"/setting/detail",update:"/setting/update",boxInt:"/Store/drawBoxint",getKf:"/Setting/chakeAbout",setKf:"/Setting/aboutUsValue",getIntergral:"/Store/seleIntegrals",getAir:"/Store/getAirdrop",setAir:"/Store/setAirdrop",getGive:"/Store/chaGiveDay",setGive:"/Store/dayUp",getBlind:"/Goods/getBoxMoney",setBlind:"/Goods/setBoxMoney",getPoster:"/setting/detail&key=poster",getBox:"/setting/detail&key=box",blind:"/setting/detail&key=box_bg",getSetting:"/setting/detail&key=setting",getList:"/goods/allList"};function s(e){return Object(i["b"])({url:o.getPoster,method:"get",params:{key:e}})}function l(e){return Object(i["b"])({url:o.blind,method:"get",params:{key:e}})}function n(e){return Object(i["b"])({url:o.getList,method:"get",params:{key:e}})}function u(e){return Object(i["b"])({url:o.getBox,method:"get",params:{key:e}})}function c(e){return Object(i["b"])({url:o.getSetting,method:"get",params:{key:e}})}function d(e){return Object(i["b"])({url:o.getGive,method:"get",params:{key:e}})}function m(e){return Object(i["b"])({url:o.setGive,method:"post",data:Object(r["a"])({},e)})}function p(e){return Object(i["b"])({url:o.detail,method:"get",params:{key:e}})}function f(e){return Object(i["b"])({url:o.getKf,method:"get",params:{key:e}})}function h(e,t){return Object(i["b"])({url:o.update,method:"post",data:Object(r["a"])({key:e},t)})}function g(e){return Object(i["b"])({url:o.setKf,method:"post",data:Object(r["a"])({},e)})}}}]);